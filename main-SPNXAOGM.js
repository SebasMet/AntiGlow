import{$ as E_,$a as Rs,$b as Z_,A as Cl,Aa as Ts,Ab as Ds,B as wa,Ba as S_,Bb as Xi,C as Rl,Ca as Xt,Cb as z_,D as Ea,Da as Ml,Db as Pa,E as At,Ea as As,Eb as q_,F as Sn,Fa as Qi,Fb as ka,G as Cn,Ga as Yi,Gb as Na,H as g_,Ha as C_,Hb as jl,I as Dl,Ia as R_,Ib as Oa,J as yt,Ja as D_,Jb as Bl,K as __,Ka as P_,Kb as G_,L as ai,La as k_,Lb as $l,M as Rn,Ma as N_,Mb as Ma,N as Pl,Na as O_,Nb as W_,O as v_,Oa as ht,Ob as Zi,P as y_,Pa as M_,Pb as H_,Q as I_,Qa as Ss,Qb as K_,R as w_,Ra as te,Rb as Mn,S as ba,Sa as J,Sb as Ps,T as Ge,Ta,Tb as xn,U as Gi,Ua as x_,Ub as Q_,V as Ae,Va as Aa,Vb as hi,W as me,Wa as Sa,Wb as Y_,X as Dn,Xa as L_,Xb as J_,Y as Es,Ya as V_,Yb as Ne,Z as q,Za as Cs,Zb as X_,_ as ye,_a as Nn,_b as zl,a as M,aa as ee,ab as F_,ac as ev,b as pe,ba as kl,bb as xl,bc as ks,ca as L,cb as dt,cc as tv,d as Yt,da as B,db as U_,dc as nv,e as m,ea as Xe,eb as ui,ec as xa,f as ya,fa as Nl,fb as Pe,fc as La,g as Ia,ga as bs,gb as j_,gc as er,h as Jt,ha as _e,hb as Ji,hc as iv,i as bl,ia as Ie,ib as B_,ic as rv,j as Tl,ja as Ze,jb as F,jc as ql,k as st,ka as Ot,kb as $,kc as sv,l as vt,la as b_,lb as ke,lc as ov,m as d_,ma as Wi,mb as On,n as f_,na as Mt,nb as be,o as An,oa as Hi,ob as We,p as zi,pa as Pn,pb as Ll,q as Al,qa as kn,qb as Vl,r as Sl,ra as Ki,rb as Fl,s as De,sa as Ol,sb as re,t as U,ta as xt,tb as $_,u as oi,ua as T_,ub as ct,v as p_,va as at,vb as Ul,w as m_,wa as Ee,wb as Ca,x as j,xa as ci,xb as Ra,y as qi,ya as St,yb as Da,z as lt,za as A_,zb as li}from"./chunk-5BYI4FU6.js";var Wl=class{};var tr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Hl=class{encodeKey(e){return av(e)}encodeValue(e){return av(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function PA(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],u=t.get(o)||[];u.push(c),t.set(o,u)}),t}var kA=/%(\d[a-f0-9])/gi,NA={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function av(n){return encodeURIComponent(n).replace(kA,(e,t)=>NA[t]??e)}function Va(n){return`${n}`}var Ln=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Hl,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=PA(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Va):[Va(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Va(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Va(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Kl=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function OA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function cv(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uv(n){return typeof Blob<"u"&&n instanceof Blob}function lv(n){return typeof FormData<"u"&&n instanceof FormData}function MA(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ns=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(OA(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new tr,this.context??=new Kl,!this.params)this.params=new Ln,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),u=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||cv(this.body)||uv(this.body)||lv(this.body)||MA(this.body)?this.body:this.body instanceof Ln?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lv(this.body)?null:uv(this.body)?this.body.type||null:cv(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ln?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,h=e.headers||this.headers,f=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((I,S)=>I.set(S,e.setHeaders[S]),h)),e.setParams&&(f=Object.keys(e.setParams).reduce((I,S)=>I.set(S,e.setParams[S]),f)),new n(t,i,o,{params:f,headers:h,context:g,reportProgress:u,responseType:r,withCredentials:c,transferCache:s})}},hv=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(hv||{}),Ql=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new tr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Yl=class n extends Ql{constructor(e={}){super(e),this.type=hv.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function Gl(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var dv=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Ns)s=t;else{let u;r.headers instanceof tr?u=r.headers:u=new tr(r.headers);let h;r.params&&(r.params instanceof Ln?h=r.params:h=new Ln({fromObject:r.params})),s=new Ns(t,i,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:h,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=U(s).pipe(Cn(u=>this.handler.handle(u)));if(t instanceof Ns||r.observe==="events")return o;let c=o.pipe(At(u=>u instanceof Yl));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(j(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(j(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(j(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(j(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Ln().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Gl(r,i))}post(t,i,r={}){return this.request("POST",t,Gl(r,i))}put(t,i,r={}){return this.request("PUT",t,Gl(r,i))}static{this.\u0275fac=function(i){return new(i||n)(L(Wl))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();var Zl=class extends J_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},eh=class n extends Zl{static makeCurrent(){Y_(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=VA();return t==null?null:FA(t)}resetBaseElement(){Os=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tv(document.cookie,e)}},Os=null;function VA(){return Os=Os||document.querySelector("base"),Os?Os.getAttribute("href"):null}function FA(n){return new URL(n,document.baseURI).pathname}var th=class{addToWindow(e){Dn.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new me(5103,!1);return s},Dn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Dn.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Dn.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(c=>{c.whenStable(o)})};Dn.frameworkStabilizers||(Dn.frameworkStabilizers=[]),Dn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?hi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},UA=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),nh=new ee(""),mv=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new me(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(L(nh),L(Ee))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Fa=class{constructor(e){this._doc=e}},Jl="ng-app-id",gv=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ql(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Jl}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(Jl),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(Jl,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(L(Ne),L(Ts),L(As,8),L(Xt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Xl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rh=/%COMP%/g,_v="%COMP%",jA=`_nghost-${_v}`,BA=`_ngcontent-${_v}`,$A=!0,zA=new ee("",{providedIn:"root",factory:()=>$A});function qA(n){return BA.replace(rh,n)}function GA(n){return jA.replace(rh,n)}function vv(n,e){return e.map(t=>t.replace(rh,n))}var Ua=(()=>{class n{constructor(t,i,r,s,o,c,u,h=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=ql(c),this.defaultRenderer=new Ms(t,o,u,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===bs.ShadowDom&&(i=pe(M({},i),{encapsulation:bs.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof ja?r.applyToHost(t):r instanceof xs&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case bs.Emulated:s=new ja(u,h,i,this.appId,f,o,c,g);break;case bs.ShadowDom:return new ih(u,h,t,i,o,c,this.nonce,g);default:s=new xs(u,h,i,f,o,c,g);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(L(mv),L(gv),L(Ts),L(zA),L(Ne),L(Xt),L(Ee),L(As))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),Ms=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Xl[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(fv(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(fv(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new me(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Xl[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Xl[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ss.DashCase|Ss.Important)?e.style.setProperty(t,i,r&Ss.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ss.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=hi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function fv(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ih=class extends Ms{constructor(e,t,i,r,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=vv(r.id,r.styles);for(let f of h){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xs=class extends Ms{constructor(e,t,i,r,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=u?vv(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ja=class extends xs{constructor(e,t,i,r,s,o,c,u){let h=r+"-"+i.id;super(e,t,i,s,o,c,u,h),this.contentAttr=qA(h),this.hostAttr=GA(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},WA=(()=>{class n extends Fa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(L(Ne))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),pv=["alt","control","meta","shift"],HA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KA={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},QA=(()=>{class n extends Fa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hi().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),o="code."),pv.forEach(h=>{let f=i.indexOf(h);f>-1&&(i.splice(f,1),o+=h+".")}),o+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=r,u.fullKey=o,u}static matchEventFullKeyCode(t,i){let r=HA[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),pv.forEach(o=>{if(o!==r){let c=KA[o];c(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(L(Ne))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function YA(){eh.makeCurrent()}function JA(){return new ci}function XA(){return A_(document),document}var ZA=[{provide:Xt,useValue:iv},{provide:S_,useValue:YA,multi:!0},{provide:Ne,useFactory:XA,deps:[]}],yv=W_(H_,"browser",ZA),e0=new ee(""),t0=[{provide:ka,useClass:th,deps:[]},{provide:q_,useClass:Na,deps:[Ee,jl,ka]},{provide:Na,useClass:Na,deps:[Ee,jl,ka]}],n0=[{provide:b_,useValue:"root"},{provide:ci,useFactory:JA,deps:[]},{provide:nh,useClass:WA,multi:!0,deps:[Ne,Ee,Xt]},{provide:nh,useClass:QA,multi:!0,deps:[Ne]},Ua,gv,mv,{provide:Aa,useExisting:Ua},{provide:ov,useClass:UA,deps:[]},[]],Iv=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ts,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(L(e0,12))}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({providers:[...n0,...t0],imports:[er,K_]})}}return n})();var wv=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(L(Ne))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var sh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=L(i0),r},providedIn:"root"})}}return n})(),i0=(()=>{class n extends sh{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case ht.NONE:return i;case ht.HTML:return Yi(i,"HTML")?Qi(i):O_(this._doc,String(i)).toString();case ht.STYLE:return Yi(i,"Style")?Qi(i):i;case ht.SCRIPT:if(Yi(i,"Script"))return Qi(i);throw new me(5200,!1);case ht.URL:return Yi(i,"URL")?Qi(i):N_(String(i));case ht.RESOURCE_URL:if(Yi(i,"ResourceURL"))return Qi(i);throw new me(5201,!1);default:throw new me(5202,!1)}}bypassSecurityTrustHtml(t){return C_(t)}bypassSecurityTrustStyle(t){return R_(t)}bypassSecurityTrustScript(t){return D_(t)}bypassSecurityTrustUrl(t){return P_(t)}bypassSecurityTrustResourceUrl(t){return k_(t)}static{this.\u0275fac=function(i){return new(i||n)(L(Ne))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Z="primary",Ys=Symbol("RouteTitle"),hh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ar(n){return new hh(n)}function o0(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function a0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Lt(n[t],e[t]))return!1;return!0}function Lt(n,e){let t=n?dh(n):void 0,i=e?dh(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Nv(n[r],e[r]))return!1;return!0}function dh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Nv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function Ov(n){return n.length>0?n[n.length-1]:null}function Un(n){return p_(n)?n:Oa(n)?De(Promise.resolve(n)):U(n)}var c0={exact:xv,subset:Lv},Mv={exact:u0,subset:l0,ignored:()=>!0};function Ev(n,e,t){return c0[t.paths](n.root,e.root,t.matrixParams)&&Mv[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function u0(n,e){return Lt(n,e)}function xv(n,e,t){if(!fi(n.segments,e.segments)||!za(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!xv(n.children[i],e.children[i],t))return!1;return!0}function l0(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Nv(n[t],e[t]))}function Lv(n,e,t){return Vv(n,e,e.segments,t)}function Vv(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!fi(r,t)||e.hasChildren()||!za(r,t,i))}else if(n.segments.length===t.length){if(!fi(n.segments,t)||!za(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Lv(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!fi(n.segments,r)||!za(n.segments,r,i)||!n.children[Z]?!1:Vv(n.children[Z],e,s,i)}}function za(n,e,t){return e.every((i,r)=>Mv[t](n[r].parameters,i.parameters))}var en=class{constructor(e=new le([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){return f0.serialize(this)}},le=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qa(this)}},di=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ar(this.parameters),this._parameterMap}toString(){return Uv(this)}};function h0(n,e){return fi(n,e)&&n.every((t,i)=>Lt(t.parameters,e[i].parameters))}function fi(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function d0(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Z&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Z&&(t=t.concat(e(r,i)))}),t}var Js=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:()=>new cr,providedIn:"root"})}}return n})(),cr=class{parse(e){let t=new ph(e);return new en(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ls(e.root,!0)}`,i=g0(e.queryParams),r=typeof e.fragment=="string"?`#${p0(e.fragment)}`:"";return`${t}${i}${r}`}},f0=new cr;function qa(n){return n.segments.map(e=>Uv(e)).join("/")}function Ls(n,e){if(!n.hasChildren())return qa(n);if(e){let t=n.children[Z]?Ls(n.children[Z],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Z&&i.push(`${r}:${Ls(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=d0(n,(i,r)=>r===Z?[Ls(n.children[Z],!1)]:[`${r}:${Ls(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Z]!=null?`${qa(n)}/${t[0]}`:`${qa(n)}/(${t.join("//")})`}}function Fv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ba(n){return Fv(n).replace(/%3B/gi,";")}function p0(n){return encodeURI(n)}function fh(n){return Fv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ga(n){return decodeURIComponent(n)}function bv(n){return Ga(n.replace(/\+/g,"%20"))}function Uv(n){return`${fh(n.path)}${m0(n.parameters)}`}function m0(n){return Object.entries(n).map(([e,t])=>`;${fh(e)}=${fh(t)}`).join("")}function g0(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Ba(t)}=${Ba(r)}`).join("&"):`${Ba(t)}=${Ba(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var _0=/^[^\/()?;#]+/;function ah(n){let e=n.match(_0);return e?e[0]:""}var v0=/^[^\/()?;=#]+/;function y0(n){let e=n.match(v0);return e?e[0]:""}var I0=/^[^=?&#]+/;function w0(n){let e=n.match(I0);return e?e[0]:""}var E0=/^[^&#]+/;function b0(n){let e=n.match(E0);return e?e[0]:""}var ph=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Z]=new le(e,t)),i}parseSegment(){let e=ah(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new me(4009,!1);return this.capture(e),new di(Ga(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=y0(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=ah(this.remaining);r&&(i=r,this.capture(i))}e[Ga(t)]=Ga(i)}parseQueryParam(e){let t=w0(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=b0(this.remaining);o&&(i=o,this.capture(i))}let r=bv(t),s=bv(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=ah(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new me(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Z);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Z]:new le([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new me(4011,!1)}};function jv(n){return n.segments.length>0?new le([],{[Z]:n}):n}function Bv(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=Bv(r);if(i===Z&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new le(n.segments,e);return T0(t)}function T0(n){if(n.numberOfChildren===1&&n.children[Z]){let e=n.children[Z];return new le(n.segments.concat(e.segments),e.children)}return n}function $s(n){return n instanceof en}function A0(n,e,t=null,i=null){let r=$v(n);return zv(r,e,t,i)}function $v(n){let e;function t(s){let o={};for(let u of s.children){let h=t(u);o[u.outlet]=h}let c=new le(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=jv(i);return e??r}function zv(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return ch(r,r,r,t,i);let s=S0(e);if(s.toRoot())return ch(r,r,new le([],{}),t,i);let o=C0(s,r,n),c=o.processChildren?Us(o.segmentGroup,o.index,s.commands):Gv(o.segmentGroup,o.index,s.commands);return ch(r,o.segmentGroup,c,t,i)}function Wa(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function zs(n){return typeof n=="object"&&n!=null&&n.outlets}function ch(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([u,h])=>{s[u]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let o;n===e?o=t:o=qv(n,e,t);let c=jv(Bv(o));return new en(c,s,r)}function qv(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=qv(s,e,t)}),new le(n.segments,i)}var Ha=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Wa(i[0]))throw new me(4003,!1);let r=i.find(zs);if(r&&r!==Ov(i))throw new me(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S0(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ha(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,h])=>{c[u]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Ha(t,e,i)}var rr=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function C0(n,e,t){if(n.isAbsolute)return new rr(e,!0,0);if(!t)return new rr(e,!1,NaN);if(t.parent===null)return new rr(t,!0,0);let i=Wa(n.commands[0])?0:1,r=t.segments.length-1+i;return R0(t,r,n.numberOfDoubleDots)}function R0(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new me(4005,!1);r=i.segments.length}return new rr(i,!1,r-s)}function D0(n){return zs(n[0])?n[0].outlets:{[Z]:n}}function Gv(n,e,t){if(n??=new le([],{}),n.segments.length===0&&n.hasChildren())return Us(n,e,t);let i=P0(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new le(n.segments.slice(0,i.pathIndex),{});return s.children[Z]=new le(n.segments.slice(i.pathIndex),n.children),Us(s,0,r)}else return i.match&&r.length===0?new le(n.segments,{}):i.match&&!n.hasChildren()?mh(n,e,t):i.match?Us(n,0,r):mh(n,e,t)}function Us(n,e,t){if(t.length===0)return new le(n.segments,{});{let i=D0(t),r={};if(Object.keys(i).some(s=>s!==Z)&&n.children[Z]&&n.numberOfChildren===1&&n.children[Z].segments.length===0){let s=Us(n.children[Z],e,t);return new le(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Gv(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new le(n.segments,r)}}function P0(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(zs(c))break;let u=`${c}`,h=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&h&&typeof h=="object"&&h.outlets===void 0){if(!Av(u,h,o))return s;i+=2}else{if(!Av(u,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function mh(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(zs(s)){let u=k0(s.outlets);return new le(i,u)}if(r===0&&Wa(t[0])){let u=n.segments[e];i.push(new di(u.path,Tv(t[0]))),r++;continue}let o=zs(s)?s.outlets[Z]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&Wa(c)?(i.push(new di(o,Tv(c))),r+=2):(i.push(new di(o,{})),r++)}return new le(i,{})}function k0(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=mh(new le([],{}),0,i))}),e}function Tv(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Av(n,e,t){return n==t.path&&Lt(e,t.parameters)}var js="imperative",Be=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Be||{}),It=class{constructor(e,t){this.id=e,this.url=t}},ur=class extends It{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Be.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tn=class extends It{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(pt||{}),Ka=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ka||{}),Zt=class extends It{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vn=class extends It{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Be.NavigationSkipped}},qs=class extends It{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qa=class extends It{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class extends It{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_h=class extends It{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vh=class extends It{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yh=class extends It{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ih=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wh=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Eh=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bh=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Th=class{constructor(e){this.snapshot=e,this.type=Be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ah=class{constructor(e){this.snapshot=e,this.type=Be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ya=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=Be.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Gs=class{},lr=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function N0(n,e){return n.providers&&!n._injector&&(n._injector=xl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ct(n){return n.outlet||Z}function O0(n,e){let t=n.filter(i=>Ct(i)===e);return t.push(...n.filter(i=>Ct(i)!==e)),t}function Xs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Sh=class{get injector(){return Xs(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Zs(this.rootInjector),this.attachRef=null}},Zs=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Sh(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(L(Wi))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ja=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ch(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Ch(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Rh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Rh(e,this._root).map(t=>t.value)}};function Ch(n,e){if(n===e.value)return e;for(let t of e.children){let i=Ch(n,t);if(i)return i}return null}function Rh(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Rh(n,t);if(i.length)return i.unshift(e),i}return[]}var ft=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ir(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Xa=class extends Ja{constructor(e,t){super(e),this.snapshot=t,Vh(this,e)}toString(){return this.snapshot.toString()}};function Wv(n){let e=M0(n),t=new vt([new di("",{})]),i=new vt({}),r=new vt({}),s=new vt({}),o=new vt(""),c=new Fn(t,i,s,o,r,Z,n,e.root);return c.snapshot=e.root,new Xa(new ft(c,[]),e)}function M0(n){let e={},t={},i={},r="",s=new sr([],e,i,r,t,Z,n,null,{});return new ec("",new ft(s,[]))}var Fn=class{constructor(e,t,i,r,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(j(h=>h[Ys]))??U(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(e=>ar(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(e=>ar(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Za(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),r?.data),n._resolvedData)}:i={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},r&&Kv(r)&&(i.resolve[Ys]=r.title),i}var sr=class{get title(){return this.data?.[Ys]}constructor(e,t,i,r,s,o,c,u,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ar(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ec=class extends Ja{constructor(e,t){super(t),this.url=e,Vh(this,t)}toString(){return Hv(this._root)}};function Vh(n,e){e.value._routerState=n,e.children.forEach(t=>Vh(n,t))}function Hv(n){let e=n.children.length>0?` { ${n.children.map(Hv).join(", ")} } `:"";return`${n.value}${e}`}function uh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Lt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Lt(e.params,t.params)||n.paramsSubject.next(t.params),a0(e.url,t.url)||n.urlSubject.next(t.url),Lt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Dh(n,e){let t=Lt(n.params,e.params)&&h0(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Dh(n.parent,e.parent))}function Kv(n){return typeof n.title=="string"||n.title===null}var Fh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Z,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=B(Zs),this.location=B(L_),this.changeDetector=B(Zi),this.inputBinder=B(sc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new me(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new me(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new me(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new me(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Ph(t,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hi]})}}return n})(),Ph=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Fn?this.route:e===Zs?this.childContexts:this.parent.get(e,t)}},sc=new ee(""),Sv=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=qi([i.queryParams,i.params,i.data]).pipe(Ge(([s,o,c],u)=>(c=M(M(M({},s),o),c),u===0?U(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let o=Q_(i.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function x0(n,e,t){let i=Ws(n,e._root,t?t._root:void 0);return new Xa(i,e)}function Ws(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=L0(n,e,t);return new ft(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Ws(n,c)),o}}let i=V0(e.value),r=e.children.map(s=>Ws(n,s));return new ft(i,r)}}function L0(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ws(n,i,r);return Ws(n,i)})}function V0(n){return new Fn(new vt(n.url),new vt(n.params),new vt(n.queryParams),new vt(n.fragment),new vt(n.data),n.outlet,n.component,n)}var Hs=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Qv="ngNavigationCancelingError";function tc(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=$s(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Yv(!1,pt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Yv(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Qv]=!0,t.cancellationCode=e,t}function F0(n){return Jv(n)&&$s(n.url)}function Jv(n){return!!n&&n[Qv]}var U0=(n,e,t,i)=>j(r=>(new kh(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),kh=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),uh(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=ir(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ir(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ir(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=ir(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ah(s.value.snapshot))}),e.children.length&&this.forwardEvent(new bh(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(uh(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),uh(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},nc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},or=class{constructor(e,t){this.component=e,this.route=t}};function j0(n,e,t){let i=n._root,r=e?e._root:null;return Vs(i,r,t,[i.value])}function B0(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function dr(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!E_(n)?n:e.get(n):i}function Vs(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ir(e);return n.children.forEach(o=>{$0(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Bs(c,t.getContext(o),r)),r}function $0(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=z0(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new nc(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Vs(n,e,c?c.children:null,i,r):Vs(n,e,t,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new or(c.outlet.component,o))}else o&&Bs(e,c,r),r.canActivateChecks.push(new nc(i)),s.component?Vs(n,null,c?c.children:null,i,r):Vs(n,null,t,i,r);return r}function z0(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!fi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fi(n.url,e.url)||!Lt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dh(n,e)||!Lt(n.queryParams,e.queryParams);case"paramsChange":default:return!Dh(n,e)}}function Bs(n,e,t){let i=ir(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Bs(o,e.children.getContext(s),t):Bs(o,null,t):Bs(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new or(e.outlet.component,r)):t.canDeactivateChecks.push(new or(null,r)):t.canDeactivateChecks.push(new or(null,r))}function eo(n){return typeof n=="function"}function q0(n){return typeof n=="boolean"}function G0(n){return n&&eo(n.canLoad)}function W0(n){return n&&eo(n.canActivate)}function H0(n){return n&&eo(n.canActivateChild)}function K0(n){return n&&eo(n.canDeactivate)}function Q0(n){return n&&eo(n.canMatch)}function Xv(n){return n instanceof m_||n?.name==="EmptyError"}var $a=Symbol("INITIAL_VALUE");function hr(){return Ge(n=>qi(n.map(e=>e.pipe(yt(1),ba($a)))).pipe(j(e=>{for(let t of e)if(t!==!0){if(t===$a)return $a;if(t===!1||Y0(t))return t}return!0}),At(e=>e!==$a),yt(1)))}function Y0(n){return $s(n)||n instanceof Hs}function J0(n,e){return lt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?U(pe(M({},t),{guardsResult:!0})):X0(o,i,r,n).pipe(lt(c=>c&&q0(c)?Z0(i,s,n,e):U(c)),j(c=>pe(M({},t),{guardsResult:c})))})}function X0(n,e,t,i){return De(n).pipe(lt(r=>rS(r.component,r.route,t,e,i)),Rn(r=>r!==!0,!0))}function Z0(n,e,t,i){return De(e).pipe(Cn(r=>wa(tS(r.route.parent,i),eS(r.route,i),iS(n,r.path,t),nS(n,r.route,t))),Rn(r=>r!==!0,!0))}function eS(n,e){return n!==null&&e&&e(new Th(n)),U(!0)}function tS(n,e){return n!==null&&e&&e(new Eh(n)),U(!0)}function nS(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return U(!0);let r=i.map(s=>Rl(()=>{let o=Xs(e)??t,c=dr(s,o),u=W0(c)?c.canActivate(e,n):Mt(o,()=>c(e,n));return Un(u).pipe(Rn())}));return U(r).pipe(hr())}function iS(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>B0(o)).filter(o=>o!==null).map(o=>Rl(()=>{let c=o.guards.map(u=>{let h=Xs(o.node)??t,f=dr(u,h),g=H0(f)?f.canActivateChild(i,n):Mt(h,()=>f(i,n));return Un(g).pipe(Rn())});return U(c).pipe(hr())}));return U(s).pipe(hr())}function rS(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return U(!0);let o=s.map(c=>{let u=Xs(e)??r,h=dr(c,u),f=K0(h)?h.canDeactivate(n,e,t,i):Mt(u,()=>h(n,e,t,i));return Un(f).pipe(Rn())});return U(o).pipe(hr())}function sS(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return U(!0);let s=r.map(o=>{let c=dr(o,n),u=G0(c)?c.canLoad(e,t):Mt(n,()=>c(e,t));return Un(u)});return U(s).pipe(hr(),Zv(i))}function Zv(n){return Ia(Ae(e=>{if(typeof e!="boolean")throw tc(n,e)}),j(e=>e===!0))}function oS(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return U(!0);let s=r.map(o=>{let c=dr(o,n),u=Q0(c)?c.canMatch(e,t):Mt(n,()=>c(e,t));return Un(u)});return U(s).pipe(hr(),Zv(i))}var Ks=class{constructor(e){this.segmentGroup=e||null}},Qs=class extends Error{constructor(e){super(),this.urlTree=e}};function nr(n){return oi(new Ks(n))}function aS(n){return oi(new me(4e3,!1))}function cS(n){return oi(Yv(!1,pt.GuardRejected))}var Nh=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return U(i);if(r.numberOfChildren>1||!r.children[Z])return aS(`${e.redirectTo}`);r=r.children[Z]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:h,routeConfig:f,url:g,outlet:I,params:S,data:D,title:N}=r,P=Mt(s,()=>c({params:S,data:D,queryParams:u,fragment:h,routeConfig:f,url:g,outlet:I,title:N}));if(P instanceof en)throw new Qs(P);t=P}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Qs(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new en(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,i,r)}),new le(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new me(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Oh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uS(n,e,t,i,r){let s=ey(n,e,t);return s.matched?(i=N0(e,i),oS(i,e,t,r).pipe(j(o=>o===!0?s:M({},Oh)))):U(s)}function ey(n,e,t){if(e.path==="**")return lS(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},Oh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||o0)(t,n,e);if(!r)return M({},Oh);let s={};Object.entries(r.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=r.consumed.length>0?M(M({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function lS(n){return{matched:!0,parameters:n.length>0?Ov(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Cv(n,e,t,i){return t.length>0&&fS(n,t,i)?{segmentGroup:new le(e,dS(i,new le(t,n.children))),slicedSegments:[]}:t.length===0&&pS(n,t,i)?{segmentGroup:new le(n.segments,hS(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new le(n.segments,n.children),slicedSegments:t}}function hS(n,e,t,i){let r={};for(let s of t)if(oc(n,e,s)&&!i[Ct(s)]){let o=new le([],{});r[Ct(s)]=o}return M(M({},i),r)}function dS(n,e){let t={};t[Z]=e;for(let i of n)if(i.path===""&&Ct(i)!==Z){let r=new le([],{});t[Ct(i)]=r}return t}function fS(n,e,t){return t.some(i=>oc(n,e,i)&&Ct(i)!==Z)}function pS(n,e,t){return t.some(i=>oc(n,e,i))}function oc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function mS(n,e,t){return e.length===0&&!n.children[t]}var Mh=class{};function gS(n,e,t,i,r,s,o="emptyOnly"){return new xh(n,e,t,i,r,o,s).recognize()}var _S=31,xh=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Nh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new me(4002,`'${e.segmentGroup}'`)}recognize(){let e=Cv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(j(({children:t,rootSnapshot:i})=>{let r=new ft(i,t),s=new ec("",r),o=A0(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new sr([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,t).pipe(j(i=>({children:i,rootSnapshot:t})),Sn(i=>{if(i instanceof Qs)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ks?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(j(o=>o instanceof ft?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return De(s).pipe(Cn(o=>{let c=i.children[o],u=O0(t,o);return this.processSegmentGroup(e,u,c,o,r)}),y_((o,c)=>(o.push(...c),o)),Dl(null),v_(),lt(o=>{if(o===null)return nr(i);let c=ty(o);return vS(c),U(c)}))}processSegment(e,t,i,r,s,o,c){return De(t).pipe(Cn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,s,o,c).pipe(Sn(h=>{if(h instanceof Ks)return U(null);throw h}))),Rn(u=>!!u),Sn(u=>{if(Xv(u))return mS(i,r,s)?U(new Mh):nr(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,u){return Ct(i)!==o&&(o===Z||!oc(r,s,i))?nr(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,u):nr(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:u,parameters:h,consumedSegments:f,positionalParamSegments:g,remainingSegments:I}=ey(t,r,s);if(!u)return nr(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_S&&(this.allowRedirects=!1));let S=new sr(s,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Rv(r),Ct(r),r.component??r._loadedComponent??null,r,Dv(r)),D=Za(S,c,this.paramsInheritanceStrategy);S.params=Object.freeze(D.params),S.data=Object.freeze(D.data);let N=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,g,S,e);return this.applyRedirects.lineralizeSegments(r,N).pipe(lt(P=>this.processSegment(e,i,t,P.concat(I),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=uS(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(Ge(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Ge(({routes:h})=>{let f=i._loadedInjector??e,{parameters:g,consumedSegments:I,remainingSegments:S}=u,D=new sr(I,g,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Rv(i),Ct(i),i.component??i._loadedComponent??null,i,Dv(i)),N=Za(D,o,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:P,slicedSegments:W}=Cv(t,I,S,h);if(W.length===0&&P.hasChildren())return this.processChildren(f,h,P,D).pipe(j(Y=>new ft(D,Y)));if(h.length===0&&W.length===0)return U(new ft(D,[]));let Q=Ct(i)===s;return this.processSegment(f,h,P,W,Q?Z:s,!0,D).pipe(j(Y=>new ft(D,Y instanceof ft?[Y]:[])))}))):nr(t)))}getChildConfig(e,t,i){return t.children?U({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?U({routes:t._loadedRoutes,injector:t._loadedInjector}):sS(e,t,i,this.urlSerializer).pipe(lt(r=>r?this.configLoader.loadChildren(e,t).pipe(Ae(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):cS(t))):U({routes:[],injector:e})}};function vS(n){n.sort((e,t)=>e.value.outlet===Z?-1:t.value.outlet===Z?1:e.value.outlet.localeCompare(t.value.outlet))}function yS(n){let e=n.value.routeConfig;return e&&e.path===""}function ty(n){let e=[],t=new Set;for(let i of n){if(!yS(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=ty(i.children);e.push(new ft(i.value,r))}return e.filter(i=>!t.has(i))}function Rv(n){return n.data||{}}function Dv(n){return n.resolve||{}}function IS(n,e,t,i,r,s){return lt(o=>gS(n,e,t,i,o.extractedUrl,r,s).pipe(j(({state:c,tree:u})=>pe(M({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function wS(n,e){return lt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return U(t);let s=new Set(r.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let h of ny(u))o.add(h);let c=0;return De(o).pipe(Cn(u=>s.has(u)?ES(u,i,n,e):(u.data=Za(u,u.parent,n).resolve,U(void 0))),Ae(()=>c++),Pl(1),lt(u=>c===o.size?U(t):An))})}function ny(n){let e=n.children.map(t=>ny(t)).flat();return[n,...e]}function ES(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!Kv(r)&&(s[Ys]=r.title),bS(s,n,e,i).pipe(j(o=>(n._resolvedData=o,n.data=Za(n,n.parent,t).resolve,null)))}function bS(n,e,t,i){let r=dh(n);if(r.length===0)return U({});let s={};return De(r).pipe(lt(o=>TS(n[o],e,t,i).pipe(Rn(),Ae(c=>{if(c instanceof Hs)throw tc(new cr,c);s[o]=c}))),Pl(1),__(s),Sn(o=>Xv(o)?An:oi(o)))}function TS(n,e,t,i){let r=Xs(e)??i,s=dr(n,r),o=s.resolve?s.resolve(e,t):Mt(r,()=>s(e,t));return Un(o)}function lh(n){return Ge(e=>{let t=n(e);return t?De(t).pipe(j(()=>e)):U(e)})}var iy=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Z);return i}getResolvedTitleForRoute(t){return t.data[Ys]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(AS),providedIn:"root"})}}return n})(),AS=(()=>{class n extends iy{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(L(wv))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),to=new ee("",{providedIn:"root",factory:()=>({})}),SS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ds],decls:1,vars:0,template:function(i,r){i&1&&ke(0,"router-outlet")},dependencies:[Fh],encapsulation:2})}}return n})();function Uh(n){let e=n.children&&n.children.map(Uh),t=e?pe(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Z&&(t.component=SS),t}var ic=new ee(""),jh=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Ma)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return U(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Un(t.loadComponent()).pipe(j(ry),Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ai(()=>{this.componentLoaders.delete(t)})),r=new Tl(i,()=>new st).pipe(bl());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return U({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=CS(i,this.compiler,t,this.onLoadEndListener).pipe(ai(()=>{this.childrenLoaders.delete(i)})),o=new Tl(s,()=>new st).pipe(bl());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function CS(n,e,t,i){return Un(n.loadChildren()).pipe(j(ry),lt(r=>r instanceof F_||Array.isArray(r)?U(r):De(e.compileModuleAsync(r))),j(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(ic,[],{optional:!0,self:!0}).flat()),{routes:o.map(Uh),injector:s}}))}function RS(n){return n&&typeof n=="object"&&"default"in n}function ry(n){return RS(n)?n.default:n}var Bh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(DS),providedIn:"root"})}}return n})(),DS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sy=new ee(""),oy=new ee("");function PS(n,e,t){let i=n.get(oy),r=n.get(Ne);return n.get(Ee).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),c=r.startViewTransition(()=>(s(),kS(n))),{onViewTransitionCreated:u}=i;return u&&Mt(n,()=>u({transition:c,from:e,to:t})),o})}function kS(n){return new Promise(e=>{U_({read:()=>setTimeout(e)},{injector:n})})}var NS=new ee(""),$h=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new st,this.transitionAbortSubject=new st,this.configLoader=B(jh),this.environmentInjector=B(Wi),this.urlSerializer=B(Js),this.rootContexts=B(Zs),this.location=B(ks),this.inputBindingEnabled=B(sc,{optional:!0})!==null,this.titleStrategy=B(iy),this.options=B(to,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(Bh),this.createViewTransition=B(sy,{optional:!0}),this.navigationErrorHandler=B(NS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>U(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Ih(r)),i=r=>this.events.next(new wh(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(pe(M(M({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new vt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:js,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(At(s=>s.id!==0),j(s=>pe(M({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ge(s=>{let o=!1,c=!1;return U(s).pipe(Ge(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",pt.SupersededByNewNavigation),An;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?pe(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!h&&f!=="reload"){let g="";return this.events.next(new Vn(u.id,this.urlSerializer.serialize(u.rawUrl),g,Ka.IgnoredSameUrlNavigation)),u.resolve(!1),An}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return U(u).pipe(Ge(g=>{let I=this.transitions?.getValue();return this.events.next(new ur(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),I!==this.transitions?.getValue()?An:Promise.resolve(g)}),IS(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ae(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=pe(M({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let I=new Qa(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(I)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:I,source:S,restoredState:D,extras:N}=u,P=new ur(g,this.urlSerializer.serialize(I),S,D);this.events.next(P);let W=Wv(this.rootComponentType).snapshot;return this.currentTransition=s=pe(M({},u),{targetSnapshot:W,urlAfterRedirects:I,extras:pe(M({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,U(s)}else{let g="";return this.events.next(new Vn(u.id,this.urlSerializer.serialize(u.extractedUrl),g,Ka.IgnoredByUrlHandlingStrategy)),u.resolve(!1),An}}),Ae(u=>{let h=new gh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),j(u=>(this.currentTransition=s=pe(M({},u),{guards:j0(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),J0(this.environmentInjector,u=>this.events.next(u)),Ae(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw tc(this.urlSerializer,u.guardsResult);let h=new _h(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),At(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",pt.GuardRejected),!1)),lh(u=>{if(u.guards.canActivateChecks.length)return U(u).pipe(Ae(h=>{let f=new vh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),Ge(h=>{let f=!1;return U(h).pipe(wS(this.paramsInheritanceStrategy,this.environmentInjector),Ae({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",pt.NoDataFromResolver)}}))}),Ae(h=>{let f=new yh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),lh(u=>{let h=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ae(I=>{f.component=I}),j(()=>{})));for(let I of f.children)g.push(...h(I));return g};return qi(h(u.targetSnapshot.root)).pipe(Dl(null),yt(1))}),lh(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:u,targetSnapshot:h}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return f?De(f).pipe(j(()=>s)):U(s)}),j(u=>{let h=x0(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=pe(M({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),Ae(()=>{this.events.next(new Gs)}),U0(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),yt(1),Ae({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Gi(this.transitionAbortSubject.pipe(Ae(u=>{throw u}))),ai(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",pt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Sn(u=>{if(c=!0,Jv(u))this.events.next(new Zt(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),F0(u)?this.events.next(new lr(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let h=new qs(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let f=Mt(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(f instanceof Hs){let{message:g,cancellationCode:I}=tc(this.urlSerializer,f);this.events.next(new Zt(s.id,this.urlSerializer.serialize(s.extractedUrl),g,I)),this.events.next(new lr(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(h);let g=t.errorHandler(u);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return An}))}))}cancelNavigationTransition(t,i,r){let s=new Zt(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OS(n){return n!==js}var MS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(xS),providedIn:"root"})}}return n})(),Lh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},xS=(()=>{class n extends Lh{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ki(n)))(r||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ay=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:()=>B(LS),providedIn:"root"})}}return n})(),LS=(()=>{class n extends ay{constructor(){super(...arguments),this.location=B(ks),this.urlSerializer=B(Js),this.options=B(to,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(Bh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new en,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Wv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof ur)this.stateMemento=this.createStateMemento();else if(t instanceof Vn)this.rawUrlTree=i.initialUrl;else if(t instanceof Qa){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Gs?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Zt&&(t.code===pt.GuardRejected||t.code===pt.NoDataFromResolver)?this.restoreHistory(i):t instanceof qs?this.restoreHistory(i,!0):t instanceof tn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof en?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=M(M({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ki(n)))(r||n)}})()}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fs=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Fs||{});function cy(n,e){n.events.pipe(At(t=>t instanceof tn||t instanceof Zt||t instanceof qs||t instanceof Vn),j(t=>t instanceof tn||t instanceof Vn?Fs.COMPLETE:(t instanceof Zt?t.code===pt.Redirect||t.code===pt.SupersededByNewNavigation:!1)?Fs.REDIRECTING:Fs.FAILED),At(t=>t!==Fs.REDIRECTING),yt(1)).subscribe(()=>{e()})}function VS(n){throw n}var FS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},US={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Fe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(Pa),this.stateManager=B(ay),this.options=B(to,{optional:!0})||{},this.pendingTasks=B(T_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B($h),this.urlSerializer=B(Js),this.location=B(ks),this.urlHandlingStrategy=B(Bh),this._events=new st,this.errorHandler=this.options.errorHandler||VS,this.navigated=!1,this.routeReuseStrategy=B(MS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(ic,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(sc,{optional:!0}),this.eventsSubscription=new ya,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Zt&&i.code!==pt.Redirect&&i.code!==pt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof tn)this.navigated=!0;else if(i instanceof lr){let o=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=M({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||OS(r.source)},o);this.scheduleNavigation(c,js,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}BS(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),js,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let u=M({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Uh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=i,h=u?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=M(M({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let I=r?r.snapshot:this.routerState.snapshot.root;g=$v(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return zv(g,t,f,h??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=$s(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,js,null,i)}navigate(t,i={skipLocationChange:!1}){return jS(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=M({},FS):i===!1?r=M({},US):r=i,$s(t))return Ev(this.currentUrlTree,t,r);let s=this.parseUrl(t);return Ev(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,h;o?(c=o.resolve,u=o.reject,h=o.promise):h=new Promise((g,I)=>{c=g,u=I});let f=this.pendingTasks.add();return cy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jS(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new me(4008,!1)}function BS(n){return!(n instanceof Gs)&&!(n instanceof lr)}var rc=class{};var $S=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(At(t=>t instanceof tn),Cn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=xl(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return De(r).pipe(Cl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=U(null);let s=r.pipe(lt(o=>o===null?U(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return De([s,o]).pipe(Cl())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(L(Fe),L(Ma),L(Wi),L(rc),L(jh))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uy=new ee(""),zS=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ur?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Vn&&t.code===Ka.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ya&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ya(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Ta()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})();function qS(n){return n.routerState.root}function no(n,e){return{\u0275kind:n,\u0275providers:e}}function GS(){let n=B(xt);return e=>{let t=n.get($l);if(e!==t.components[0])return;let i=n.get(Fe),r=n.get(ly);n.get(zh)===1&&i.initialNavigation(),n.get(hy,null,kl.Optional)?.setUpPreloading(),n.get(uy,null,kl.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var ly=new ee("",{factory:()=>new st}),zh=new ee("",{providedIn:"root",factory:()=>1});function WS(){return no(2,[{provide:zh,useValue:0},{provide:Bl,multi:!0,deps:[xt],useFactory:e=>{let t=e.get(X_,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(Fe),s=e.get(ly);cy(r,()=>{i(!0)}),e.get($h).afterPreactivation=()=>(i(!0),s.closed?U(void 0):s),r.initialNavigation()}))}}])}function HS(){return no(3,[{provide:Bl,multi:!0,useFactory:()=>{let e=B(Fe);return()=>{e.setUpLocationChangeListener()}}},{provide:zh,useValue:2}])}var hy=new ee("");function KS(n){return no(0,[{provide:hy,useExisting:$S},{provide:rc,useExisting:n}])}function QS(){return no(8,[Sv,{provide:sc,useExisting:Sv}])}function YS(n){let e=[{provide:sy,useValue:PS},{provide:oy,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return no(9,e)}var Pv=new ee("ROUTER_FORROOT_GUARD"),JS=[ks,{provide:Js,useClass:cr},Fe,Zs,{provide:Fn,useFactory:qS,deps:[Fe]},jh,[]],qh=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[JS,[],{provide:ic,multi:!0,useValue:t},{provide:Pv,useFactory:tC,deps:[[Fe,new Xe,new Nl]]},{provide:to,useValue:i||{}},i?.useHash?ZS():eC(),XS(),i?.preloadingStrategy?KS(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?nC(i):[],i?.bindToComponentInputs?QS().\u0275providers:[],i?.enableViewTransitions?YS().\u0275providers:[],iC()]}}static forChild(t){return{ngModule:n,providers:[{provide:ic,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(L(Pv,8))}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({})}}return n})();function XS(){return{provide:uy,useFactory:()=>{let n=B(sv),e=B(Ee),t=B(to),i=B($h),r=B(Js);return t.scrollOffset&&n.setOffset(t.scrollOffset),new zS(r,i,n,e,t)}}}function ZS(){return{provide:zl,useClass:ev}}function eC(){return{provide:zl,useClass:Z_}}function tC(n){return"guarded"}function nC(n){return[n.initialNavigation==="disabled"?HS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?WS().\u0275providers:[]]}var kv=new ee("");function iC(){return[{provide:kv,useFactory:GS},{provide:G_,multi:!0,useExisting:kv}]}var fy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},rC=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},py={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,u=r+2<n.length,h=u?n[r+2]:0,f=s>>2,g=(s&3)<<4|c>>4,I=(c&15)<<2|h>>6,S=h&63;u||(S=64,o||(I=64)),i.push(t[f],t[g],t[I],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let g=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||h==null||g==null)throw new Wh;let I=s<<2|c>>4;if(i.push(I),h!==64){let S=c<<4&240|h>>2;if(i.push(S),g!==64){let D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Wh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},sC=function(n){let e=fy(n);return py.encodeByteArray(e,!0)},io=function(n){return sC(n).replace(/\./g,"")},Kh=function(n){try{return py.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aC=()=>oC().__FIREBASE_DEFAULTS__,cC=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Kh(n[1]);return e&&JSON.parse(e)},cc=()=>{try{return aC()||cC()||uC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qh=n=>{var e,t;return(t=(e=cc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},my=n=>{let e=Qh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Yh=()=>{var n;return(n=cc())===null||n===void 0?void 0:n.config},Jh=n=>{var e;return(e=cc())===null||e===void 0?void 0:e[`_${n}`]};var ac=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function gy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[io(JSON.stringify(t)),io(JSON.stringify(o)),""].join(".")}function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function lC(){var n;let e=(n=cc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Iy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wy(){let n=$e();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ey(){return!lC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xh(){try{return typeof indexedDB=="object"}catch{return!1}}function by(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var hC="FirebaseError",mt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=hC,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nn.prototype.create)}},nn=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?dC(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new mt(r,c,i)}};function dC(n,e){return n.replace(fC,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var fC=/\{\$([^}]+)}/g;function Ty(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jn(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(dy(s)&&dy(o)){if(!jn(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function dy(n){return n!==null&&typeof n=="object"}function ro(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function mr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ay(n,e){let t=new Hh(n,e);return t.subscribe.bind(t)}var Hh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");pC(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Gh),r.error===void 0&&(r.error=Gh),r.complete===void 0&&(r.complete=Gh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function pC(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gh(){}var WL=4*60*60*1e3;function Ue(n){return n&&n._delegate?n._delegate:n}var wt=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var pi="[DEFAULT]";var Zh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new ac;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gC(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mC(n){return n===pi?void 0:n}function gC(n){return n.instantiationMode==="EAGER"}var uc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Zh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var _C=[],ne=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ne||{}),vC={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},yC=ne.INFO,IC={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},wC=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=IC[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Bn=class{constructor(e){this.name=e,this._logLevel=yC,this._logHandler=wC,this._userLogHandler=null,_C.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var EC=(n,e)=>e.some(t=>n instanceof t),Sy,Cy;function bC(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TC(){return Cy||(Cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ry=new WeakMap,td=new WeakMap,Dy=new WeakMap,ed=new WeakMap,id=new WeakMap;function AC(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Vt(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Ry.set(t,n)}).catch(()=>{}),id.set(e,n),e}function SC(n){if(td.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});td.set(n,e)}var nd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return td.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Dy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Py(n){nd=n(nd)}function CC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(lc(this),e,...t);return Dy.set(i,e.sort?e.sort():[e]),Vt(i)}:TC().includes(n)?function(...e){return n.apply(lc(this),e),Vt(Ry.get(this))}:function(...e){return Vt(n.apply(lc(this),e))}}function RC(n){return typeof n=="function"?CC(n):(n instanceof IDBTransaction&&SC(n),EC(n,bC())?new Proxy(n,nd):n)}function Vt(n){if(n instanceof IDBRequest)return AC(n);if(ed.has(n))return ed.get(n);let e=RC(n);return e!==n&&(ed.set(n,e),id.set(e,n)),e}var lc=n=>id.get(n);function hc(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=Vt(o);return i&&o.addEventListener("upgradeneeded",u=>{i(Vt(o.result),u.oldVersion,u.newVersion,Vt(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var DC=["get","getKey","getAll","getAllKeys","count"],PC=["put","add","delete","clear"],rd=new Map;function ky(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rd.get(e))return rd.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=PC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||DC.includes(t)))return;let s=function(o,...c){return m(this,null,function*(){let u=this.transaction(o,r?"readwrite":"readonly"),h=u.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),r&&u.done]))[0]})};return rd.set(e,s),s}Py(n=>pe(M({},n),{get:(e,t,i)=>ky(e,t)||n.get(e,t,i),has:(e,t)=>!!ky(e,t)||n.has(e,t)}));var od=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kC(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function kC(n){let e=n.getComponent();return e?.type==="VERSION"}var ad="@firebase/app",Ny="0.10.13";var rn=new Bn("@firebase/app"),NC="@firebase/app-compat",OC="@firebase/analytics-compat",MC="@firebase/analytics",xC="@firebase/app-check-compat",LC="@firebase/app-check",VC="@firebase/auth",FC="@firebase/auth-compat",UC="@firebase/database",jC="@firebase/data-connect",BC="@firebase/database-compat",$C="@firebase/functions",zC="@firebase/functions-compat",qC="@firebase/installations",GC="@firebase/installations-compat",WC="@firebase/messaging",HC="@firebase/messaging-compat",KC="@firebase/performance",QC="@firebase/performance-compat",YC="@firebase/remote-config",JC="@firebase/remote-config-compat",XC="@firebase/storage",ZC="@firebase/storage-compat",eR="@firebase/firestore",tR="@firebase/vertexai-preview",nR="@firebase/firestore-compat",iR="firebase",rR="10.14.1";var cd="[DEFAULT]",sR={[ad]:"fire-core",[NC]:"fire-core-compat",[MC]:"fire-analytics",[OC]:"fire-analytics-compat",[LC]:"fire-app-check",[xC]:"fire-app-check-compat",[VC]:"fire-auth",[FC]:"fire-auth-compat",[UC]:"fire-rtdb",[jC]:"fire-data-connect",[BC]:"fire-rtdb-compat",[$C]:"fire-fn",[zC]:"fire-fn-compat",[qC]:"fire-iid",[GC]:"fire-iid-compat",[WC]:"fire-fcm",[HC]:"fire-fcm-compat",[KC]:"fire-perf",[QC]:"fire-perf-compat",[YC]:"fire-rc",[JC]:"fire-rc-compat",[XC]:"fire-gcs",[ZC]:"fire-gcs-compat",[eR]:"fire-fst",[nR]:"fire-fst-compat",[tR]:"fire-vertex","fire-js":"fire-js",[iR]:"fire-js-all"};var so=new Map,oR=new Map,ud=new Map;function Oy(n,e){try{n.container.addComponent(e)}catch(t){rn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zn(n){let e=n.name;if(ud.has(e))return rn.debug(`There were multiple attempts to register component ${e}.`),!1;ud.set(e,n);for(let t of so.values())Oy(t,n);for(let t of oR.values())Oy(t,n);return!0}function ao(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rt(n){return n.settings!==void 0}var aR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new nn("app","Firebase",aR);var ld=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}};var qn=rR;function fd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:cd,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw $n.create("bad-app-name",{appName:String(r)});if(t||(t=Yh()),!t)throw $n.create("no-options");let s=so.get(r);if(s){if(jn(t,s.options)&&jn(i,s.config))return s;throw $n.create("duplicate-app",{appName:r})}let o=new uc(r);for(let u of ud.values())o.addComponent(u);let c=new ld(t,i,o);return so.set(r,c),c}function gr(n=cd){let e=so.get(n);if(!e&&n===cd&&Yh())return fd();if(!e)throw $n.create("no-app",{appName:n});return e}function dc(){return Array.from(so.values())}function Oe(n,e,t){var i;let r=(i=sR[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rn.warn(c.join(" "));return}zn(new wt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var cR="firebase-heartbeat-database",uR=1,oo="firebase-heartbeat-store",sd=null;function Vy(){return sd||(sd=hc(cR,uR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oo)}catch(t){console.warn(t)}}}}).catch(n=>{throw $n.create("idb-open",{originalErrorMessage:n.message})})),sd}function lR(n){return m(this,null,function*(){try{let t=(yield Vy()).transaction(oo),i=yield t.objectStore(oo).get(Fy(n));return yield t.done,i}catch(e){if(e instanceof mt)rn.warn(e.message);else{let t=$n.create("idb-get",{originalErrorMessage:e?.message});rn.warn(t.message)}}})}function My(n,e){return m(this,null,function*(){try{let i=(yield Vy()).transaction(oo,"readwrite");yield i.objectStore(oo).put(e,Fy(n)),yield i.done}catch(t){if(t instanceof mt)rn.warn(t.message);else{let i=$n.create("idb-set",{originalErrorMessage:t?.message});rn.warn(i.message)}}})}function Fy(n){return`${n.name}!${n.options.appId}`}var hR=1024,dR=30*24*60*60*1e3,hd=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new dd(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=dR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){rn.warn(i)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=xy(),{heartbeatsToSend:i,unsentEntries:r}=fR(this._heartbeatsCache.heartbeats),s=io(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return rn.warn(t),""}})}};function xy(){return new Date().toISOString().substring(0,10)}function fR(n,e=hR){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Ly(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Ly(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var dd=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Xh()?by().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield lR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return My(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return My(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Ly(n){return io(JSON.stringify({version:2,heartbeats:n})).length}function pR(n){zn(new wt("platform-logger",e=>new od(e),"PRIVATE")),zn(new wt("heartbeat",e=>new hd(e),"PRIVATE")),Oe(ad,Ny,n),Oe(ad,Ny,"esm2017"),Oe("fire-js","")}pR("");var mR="firebase",gR="10.14.1";Oe(mR,gR,"app");var gi=new Xi("ANGULARFIRE2_VERSION");function pc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var co=(n,e)=>{let t=e?[e]:dc(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},vr=class{constructor(){return co(_R)}},_R="app-check";function _r(){}var fc=class{zone;delegate;constructor(e,t=f_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},pd=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_r,{},_r,_r)),t.pipe(Ae({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},yr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new fc(Zone.current)),this.insideAngular=t.run(()=>new fc(Zone.current,d_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(L(Ee))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function vR(n){return mc().ngZone.runOutsideAngular(()=>n())}function mi(n){return mc().ngZone.run(()=>n())}function yR(n){return IR(mc())(n)}function IR(n){return function(t){return t=t.lift(new pd(n.ngZone)),t.pipe(Sl(n.outsideAngular),Al(n.insideAngular))}}var wR=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),mi(()=>n.apply(void 0,i))},Me=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=mi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_r,{},_r,_r))),i[s]=wR(i[s],t));let r=vR(()=>n.apply(this,i));if(!e)if(r instanceof Jt){let s=mc();return r.pipe(Sl(s.outsideAngular),Al(s.insideAngular))}else return mi(()=>r);return r instanceof Jt?r.pipe(yR):r instanceof Promise?mi(()=>new Promise((s,o)=>r.then(c=>mi(()=>s(c)),c=>mi(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:mi(()=>r)};var sn=class{constructor(e){return e}},_i=class{constructor(){return dc()}};function ER(n){return n&&n.length===1?n[0]:new sn(gr())}var md=new ee("angularfire2._apps"),bR={provide:sn,useFactory:ER,deps:[[new Xe,md]]},TR={provide:_i,deps:[[new Xe,md]]};function AR(n){return(e,t)=>{let i=t.get(Xt);Oe("angularfire",gi.full,"core"),Oe("angularfire",gi.full,"app"),Oe("angular",z_.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new sn(r)}}function Uy(n,...e){return Ot([bR,TR,{provide:md,useFactory:AR(n),multi:!0,deps:[Ee,xt,yr,...e]}])}var jy=Me(fd,!0);var By=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},SR=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},$y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,u=r+2<n.length,h=u?n[r+2]:0,f=s>>2,g=(s&3)<<4|c>>4,I=(c&15)<<2|h>>6,S=h&63;u||(S=64,o||(I=64)),i.push(t[f],t[g],t[I],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(By(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let g=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||h==null||g==null)throw new _d;let I=s<<2|c>>4;if(i.push(I),h!==64){let S=c<<4&240|h>>2;if(i.push(S),g!==64){let D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_d=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CR=function(n){let e=By(n);return $y.encodeByteArray(e,!0)},yd=function(n){return CR(n).replace(/\./g,"")},Id=function(n){try{return $y.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function RR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var DR=()=>RR().__FIREBASE_DEFAULTS__,PR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},kR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Id(n[1]);return e&&JSON.parse(e)},NR=()=>{try{return DR()||PR()||kR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var zy=n=>{var e;return(e=NR())===null||e===void 0?void 0:e[`_${n}`]};function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function Gy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Hy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ky(){try{return typeof indexedDB=="object"}catch{return!1}}function Qy(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var OR="FirebaseError",Ft=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=OR,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}},on=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?MR(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Ft(r,c,i)}};function MR(n,e){return n.replace(xR,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var xR=/\{\$([^}]+)}/g;function wd(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yy(n,e){let t=new vd(n,e);return t.subscribe.bind(t)}var vd=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");LR(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=gd),r.error===void 0&&(r.error=gd),r.complete===void 0&&(r.complete=gd);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function LR(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gd(){}var M1=4*60*60*1e3;function vi(n){return n&&n._delegate?n._delegate:n}var an=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var VR=[],ve=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ve||{}),FR={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},UR=ve.INFO,jR={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},BR=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=jR[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ir=class{constructor(e){this.name=e,this._logLevel=UR,this._logHandler=BR,this._userLogHandler=null,VR.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};var bd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zR(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function zR(n){let e=n.getComponent();return e?.type==="VERSION"}var Td="@firebase/app",Jy="0.10.17";var cn=new Ir("@firebase/app"),qR="@firebase/app-compat",GR="@firebase/analytics-compat",WR="@firebase/analytics",HR="@firebase/app-check-compat",KR="@firebase/app-check",QR="@firebase/auth",YR="@firebase/auth-compat",JR="@firebase/database",XR="@firebase/data-connect",ZR="@firebase/database-compat",eD="@firebase/functions",tD="@firebase/functions-compat",nD="@firebase/installations",iD="@firebase/installations-compat",rD="@firebase/messaging",sD="@firebase/messaging-compat",oD="@firebase/performance",aD="@firebase/performance-compat",cD="@firebase/remote-config",uD="@firebase/remote-config-compat",lD="@firebase/storage",hD="@firebase/storage-compat",dD="@firebase/firestore",fD="@firebase/vertexai",pD="@firebase/firestore-compat",mD="firebase",gD="11.1.0";var _D={[Td]:"fire-core",[qR]:"fire-core-compat",[WR]:"fire-analytics",[GR]:"fire-analytics-compat",[KR]:"fire-app-check",[HR]:"fire-app-check-compat",[QR]:"fire-auth",[YR]:"fire-auth-compat",[JR]:"fire-rtdb",[XR]:"fire-data-connect",[ZR]:"fire-rtdb-compat",[eD]:"fire-fn",[tD]:"fire-fn-compat",[nD]:"fire-iid",[iD]:"fire-iid-compat",[rD]:"fire-fcm",[sD]:"fire-fcm-compat",[oD]:"fire-perf",[aD]:"fire-perf-compat",[cD]:"fire-rc",[uD]:"fire-rc-compat",[lD]:"fire-gcs",[hD]:"fire-gcs-compat",[dD]:"fire-fst",[pD]:"fire-fst-compat",[fD]:"fire-vertex","fire-js":"fire-js",[mD]:"fire-js-all"};var vD=new Map,yD=new Map,Xy=new Map;function Zy(n,e){try{n.container.addComponent(e)}catch(t){cn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Er(n){let e=n.name;if(Xy.has(e))return cn.debug(`There were multiple attempts to register component ${e}.`),!1;Xy.set(e,n);for(let t of vD.values())Zy(t,n);for(let t of yD.values())Zy(t,n);return!0}function br(n){return n.settings!==void 0}var ID={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cd=new on("app","Firebase",ID);var gc=gD;function wr(n,e,t){var i;let r=(i=_D[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cn.warn(c.join(" "));return}Er(new an(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var wD="firebase-heartbeat-database",ED=1,uo="firebase-heartbeat-store",Ed=null;function iI(){return Ed||(Ed=hc(wD,ED,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Cd.create("idb-open",{originalErrorMessage:n.message})})),Ed}function bD(n){return m(this,null,function*(){try{let t=(yield iI()).transaction(uo),i=yield t.objectStore(uo).get(rI(n));return yield t.done,i}catch(e){if(e instanceof Ft)cn.warn(e.message);else{let t=Cd.create("idb-get",{originalErrorMessage:e?.message});cn.warn(t.message)}}})}function eI(n,e){return m(this,null,function*(){try{let i=(yield iI()).transaction(uo,"readwrite");yield i.objectStore(uo).put(e,rI(n)),yield i.done}catch(t){if(t instanceof Ft)cn.warn(t.message);else{let i=Cd.create("idb-set",{originalErrorMessage:t?.message});cn.warn(i.message)}}})}function rI(n){return`${n.name}!${n.options.appId}`}var TD=1024,AD=30*24*60*60*1e3,Ad=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Sd(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tI();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=AD}),this._storage.overwrite(this._heartbeatsCache))}catch(i){cn.warn(i)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=tI(),{heartbeatsToSend:i,unsentEntries:r}=SD(this._heartbeatsCache.heartbeats),s=yd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return cn.warn(t),""}})}};function tI(){return new Date().toISOString().substring(0,10)}function SD(n,e=TD){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),nI(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),nI(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Sd=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Ky()?Qy().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield bD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return eI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return eI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function nI(n){return yd(JSON.stringify({version:2,heartbeats:n})).length}function CD(n){Er(new an("platform-logger",e=>new bd(e),"PRIVATE")),Er(new an("heartbeat",e=>new Ad(e),"PRIVATE")),wr(Td,Jy,n),wr(Td,Jy,"esm2017"),wr("fire-js","")}CD("");function dI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fI=dI,pI=new on("auth","Firebase",dI());var Ic=new Ir("@firebase/auth");function RD(n,...e){Ic.logLevel<=ve.WARN&&Ic.warn(`Auth (${gc}): ${n}`,...e)}function vc(n,...e){Ic.logLevel<=ve.ERROR&&Ic.error(`Auth (${gc}): ${n}`,...e)}function sI(n,...e){throw Ud(n,...e)}function Fd(n,...e){return Ud(n,...e)}function mI(n,e,t){let i=Object.assign(Object.assign({},fI()),{[e]:t});return new on("auth","Firebase",i).create(e,{appName:n.name})}function yc(n){return mI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ud(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return pI.create(n,...e)}function ue(n,e,...t){if(!n)throw Ud(e,...t)}function lo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw vc(e),new Error(e)}function wc(n,e){n||lo(e)}function DD(){return oI()==="http:"||oI()==="https:"}function oI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function PD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DD()||Wy()||"connection"in navigator)?navigator.onLine:!0}function kD(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ii=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,wc(t>e,"Short delay should be less than long delay!"),this.isMobile=qy()||Hy()}get(){return PD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ND(n,e){wc(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ec=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var OD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var MD=new Ii(3e4,6e4);function gI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Sc(s,o,c,u){return m(this,arguments,function*(n,e,t,i,r={}){return _I(n,r,()=>m(this,null,function*(){let h={},f={};i&&(e==="GET"?f=i:h={body:JSON.stringify(i)});let g=wd(Object.assign({key:n.config.apiKey},f)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:I},h);return Gy()||(S.referrerPolicy="no-referrer"),Ec.fetch()(vI(n,n.config.apiHost,t,g),S)}))})}function _I(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},OD),e);try{let r=new Pd(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw _c(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _c(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw _c(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw _c(n,"user-disabled",o);let f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mI(n,f,h);sI(n,f)}}catch(r){if(r instanceof Ft)throw r;sI(n,"network-request-failed",{message:String(r)})}})}function vI(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?ND(n.config,r):`${n.config.apiScheme}://${r}`}var Pd=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Fd(this.auth,"network-request-failed")),MD.get())})}};function _c(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Fd(n,e,i);return r.customData._tokenResponse=t,r}function xD(n,e){return m(this,null,function*(){return Sc(n,"POST","/v1/accounts:delete",e)})}function yI(n,e){return m(this,null,function*(){return Sc(n,"POST","/v1/accounts:lookup",e)})}function ho(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function II(n,e=!1){return m(this,null,function*(){let t=vi(n),i=yield t.getIdToken(e),r=wI(i);ue(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:ho(Rd(r.auth_time)),issuedAtTime:ho(Rd(r.iat)),expirationTime:ho(Rd(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Rd(n){return Number(n)*1e3}function wI(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return vc("JWT malformed, contained fewer than 3 sections"),null;try{let r=Id(t);return r?JSON.parse(r):(vc("Failed to decode base64 JWT payload"),null)}catch(r){return vc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function aI(n){let e=wI(n);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function kd(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Ft&&LD(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function LD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Nd=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var po=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ho(this.lastLoginAt),this.creationTime=ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function bc(n){return m(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield kd(n,yI(t,{idToken:i}));ue(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bI(s.providerUserInfo):[],c=VD(n.providerData,o),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=u?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new po(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function EI(n){return m(this,null,function*(){let e=vi(n);yield bc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function VD(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bI(n){return n.map(e=>{var{providerId:t}=e,i=zi(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function FD(n,e){return m(this,null,function*(){let t=yield _I(n,{},()=>m(this,null,function*(){let i=wd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=vI(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ec.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function UD(n,e){return m(this,null,function*(){return Sc(n,"POST","/v2/accounts:revokeToken",gI(n,e))})}var fo=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ue(e.length!==0,"internal-error");let t=aI(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield FD(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(ue(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return lo("not implemented")}};function Gn(n,e){ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var mo=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=zi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new po(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield kd(this,this.stsTokenManager.getToken(this.auth,e));return ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return II(this,e)}reload(){return EI(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield bc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(br(this.auth.app))return Promise.reject(yc(this.auth));let e=yield this.getIdToken();return yield kd(this,xD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,u,h,f;let g=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(r=t.email)!==null&&r!==void 0?r:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,P=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,W=(h=t.createdAt)!==null&&h!==void 0?h:void 0,Q=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:Y,emailVerified:fe,isAnonymous:je,providerData:oe,stsTokenManager:E}=t;ue(Y&&E,e,"internal-error");let _=fo.fromJSON(this.name,E);ue(typeof Y=="string",e,"internal-error"),Gn(g,e.name),Gn(I,e.name),ue(typeof fe=="boolean",e,"internal-error"),ue(typeof je=="boolean",e,"internal-error"),Gn(S,e.name),Gn(D,e.name),Gn(N,e.name),Gn(P,e.name),Gn(W,e.name),Gn(Q,e.name);let v=new n({uid:Y,auth:e,email:I,emailVerified:fe,displayName:g,isAnonymous:je,photoURL:D,phoneNumber:S,tenantId:N,stsTokenManager:_,createdAt:W,lastLoginAt:Q});return oe&&Array.isArray(oe)&&(v.providerData=oe.map(w=>Object.assign({},w))),P&&(v._redirectEventId=P),v}static _fromIdTokenResponse(e,t,i=!1){return m(this,null,function*(){let r=new fo;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield bc(s),s})}static _fromGetAccountInfoResponse(e,t,i){return m(this,null,function*(){let r=t.users[0];ue(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?bI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new fo;c.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new po(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(u,h),u})}};var cI=new Map;function yi(n){wc(n instanceof Function,"Expected a class definition");let e=cI.get(n);return e?(wc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cI.set(n,e),e)}var jD=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,i){return m(this,null,function*(){this.storage[t]=i})}_get(t){return m(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Od=jD;function Dd(n,e,t){return`firebase:${n}:${e}:${t}`}var Tc=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Dd(this.userKey,r.apiKey,s),this.fullPersistenceKey=Dd("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?mo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return m(this,null,function*(){if(!t.length)return new n(yi(Od),e,i);let r=(yield Promise.all(t.map(h=>m(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=r[0]||yi(Od),o=Dd(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let g=mo._fromJSON(e,f);h!==s&&(c=g),s=h;break}}catch{}let u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,i):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>m(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,i))})}};function uI(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WD(e))return"Blackberry";if(HD(e))return"Webos";if($D(e))return"Safari";if((e.includes("chrome/")||zD(e))&&!e.includes("edge/"))return"Chrome";if(GD(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function BD(n=Dt()){return/firefox\//i.test(n)}function $D(n=Dt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zD(n=Dt()){return/crios\//i.test(n)}function qD(n=Dt()){return/iemobile/i.test(n)}function GD(n=Dt()){return/android/i.test(n)}function WD(n=Dt()){return/blackberry/i.test(n)}function HD(n=Dt()){return/webos/i.test(n)}function TI(n,e=[]){let t;switch(n){case"Browser":t=uI(Dt());break;case"Worker":t=`${uI(Dt())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gc}/${i}`}var Md=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function KD(t){return m(this,arguments,function*(n,e={}){return Sc(n,"GET","/v2/passwordPolicy",gI(n,e))})}var QD=6,xd=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:QD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Ld=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ac(this),this.idTokenSubscription=new Ac(this),this.beforeStateQueue=new Md(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Tc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield yI(this,{idToken:e}),i=yield mo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(br(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield bc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=kD()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(br(this.app))return Promise.reject(yc(this));let t=e?vi(e):null;return t&&ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return br(this.app)?Promise.reject(yc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return br(this.app)?Promise.reject(yc(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(yi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield KD(this),t=new xd(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new on("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield UD(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&yi(e)||this._popupRedirectResolver;ue(t,this,"argument-error"),this.redirectPersistenceManager=yield Tc.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return m(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&RD(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function YD(n){return vi(n)}var Ac=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yy(t=>this.observer=t)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var JD={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XD(n){JD=n}function ZD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function eP(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(yi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function jd(n,e,t,i){return vi(n).onIdTokenChanged(e,t,i)}function Bd(n,e,t,i){return vi(n).onAuthStateChanged(e,t,i)}var dV=ZD("rcb"),fV=new Ii(3e4,6e4);var pV=new Ii(2e3,1e4);var mV=10*60*1e3;var gV=new Ii(3e4,6e4);var _V=new Ii(5e3,15e3);var vV=encodeURIComponent("fac");var lI="@firebase/auth",hI="1.8.1";var Vd=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nP(n){Er(new an("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TI(n)},h=new Ld(i,r,s,u);return eP(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Er(new an("auth-internal",e=>{let t=YD(e.getProvider("auth").getImmediate());return(i=>new Vd(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(lI,hI,tP(n)),wr(lI,hI,"esm2017")}var iP=5*60,yV=zy("authIdTokenMaxAge")||iP;function rP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}XD({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Fd("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",rP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nP("Browser");function AI(n){return new Jt(function(e){var t=Bd(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function SI(n){return new Jt(function(e){var t=jd(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function zI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qI=zI,GI=new nn("auth","Firebase",zI());var Nc=new Bn("@firebase/auth");function oP(n,...e){Nc.logLevel<=ne.WARN&&Nc.warn(`Auth (${qn}): ${n}`,...e)}function Rc(n,...e){Nc.logLevel<=ne.ERROR&&Nc.error(`Auth (${qn}): ${n}`,...e)}function jt(n,...e){throw lf(n,...e)}function wi(n,...e){return lf(n,...e)}function WI(n,e,t){let i=Object.assign(Object.assign({},qI()),{[e]:t});return new nn("auth","Firebase",i).create(e,{appName:n.name})}function hn(n){return WI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lf(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return GI.create(n,...e)}function G(n,e,...t){if(!n)throw lf(e,...t)}function un(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Rc(e),new Error(e)}function Hn(n,e){n||un(e)}function Gd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function aP(){return CI()==="http:"||CI()==="https:"}function CI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function cP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aP()||yy()||"connection"in navigator)?navigator.onLine:!0}function uP(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ei=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hn(t>e,"Short delay should be less than long delay!"),this.isMobile=_y()||Iy()}get(){return cP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hf(n,e){Hn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Oc=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var lP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var hP=new Ei(3e4,6e4);function dn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function fn(s,o,c,u){return m(this,arguments,function*(n,e,t,i,r={}){return HI(n,r,()=>m(this,null,function*(){let h={},f={};i&&(e==="GET"?f=i:h={body:JSON.stringify(i)});let g=ro(Object.assign({key:n.config.apiKey},f)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:I},h);return vy()||(S.referrerPolicy="no-referrer"),Oc.fetch()(KI(n,n.config.apiHost,t,g),S)}))})}function HI(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},lP),e);try{let r=new Wd(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Cc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cc(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Cc(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Cc(n,"user-disabled",o);let f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw WI(n,f,h);jt(n,f)}}catch(r){if(r instanceof mt)throw r;jt(n,"network-request-failed",{message:String(r)})}})}function bo(s,o,c,u){return m(this,arguments,function*(n,e,t,i,r={}){let h=yield fn(n,e,t,i,r);return"mfaPendingCredential"in h&&jt(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function KI(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?hf(n.config,r):`${n.config.apiScheme}://${r}`}function dP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Wd=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(wi(this.auth,"network-request-failed")),hP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Cc(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=wi(n,e,i);return r.customData._tokenResponse=t,r}function RI(n){return n!==void 0&&n.enterprise!==void 0}var Hd=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function fP(n,e){return m(this,null,function*(){return fn(n,"GET","/v2/recaptchaConfig",dn(n,e))})}function pP(n,e){return m(this,null,function*(){return fn(n,"POST","/v1/accounts:delete",e)})}function QI(n,e){return m(this,null,function*(){return fn(n,"POST","/v1/accounts:lookup",e)})}function go(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function df(n,e=!1){return m(this,null,function*(){let t=Ue(n),i=yield t.getIdToken(e),r=ff(i);G(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:go($d(r.auth_time)),issuedAtTime:go($d(r.iat)),expirationTime:go($d(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function $d(n){return Number(n)*1e3}function ff(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Rc("JWT malformed, contained fewer than 3 sections"),null;try{let r=Kh(t);return r?JSON.parse(r):(Rc("Failed to decode base64 JWT payload"),null)}catch(r){return Rc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function DI(n){let e=ff(n);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vo(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof mt&&mP(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function mP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Kd=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Mc(n){return m(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield vo(n,QI(t,{idToken:i}));G(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YI(s.providerUserInfo):[],c=gP(n.providerData,o),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=u?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new yo(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function pf(n){return m(this,null,function*(){let e=Ue(n);yield Mc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function gP(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function YI(n){return n.map(e=>{var{providerId:t}=e,i=zi(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function _P(n,e){return m(this,null,function*(){let t=yield HI(n,{},()=>m(this,null,function*(){let i=ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=KI(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Oc.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function vP(n,e){return m(this,null,function*(){return fn(n,"POST","/v2/accounts:revokeToken",dn(n,e))})}var _o=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){G(e.length!==0,"internal-error");let t=DI(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield _P(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(G(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(G(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return un("not implemented")}};function Wn(n,e){G(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Tr=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=zi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield vo(this,this.stsTokenManager.getToken(this.auth,e));return G(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return df(this,e)}reload(){return pf(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Mc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Rt(this.auth.app))return Promise.reject(hn(this.auth));let e=yield this.getIdToken();return yield vo(this,pP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,u,h,f;let g=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(r=t.email)!==null&&r!==void 0?r:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,P=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,W=(h=t.createdAt)!==null&&h!==void 0?h:void 0,Q=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:Y,emailVerified:fe,isAnonymous:je,providerData:oe,stsTokenManager:E}=t;G(Y&&E,e,"internal-error");let _=_o.fromJSON(this.name,E);G(typeof Y=="string",e,"internal-error"),Wn(g,e.name),Wn(I,e.name),G(typeof fe=="boolean",e,"internal-error"),G(typeof je=="boolean",e,"internal-error"),Wn(S,e.name),Wn(D,e.name),Wn(N,e.name),Wn(P,e.name),Wn(W,e.name),Wn(Q,e.name);let v=new n({uid:Y,auth:e,email:I,emailVerified:fe,displayName:g,isAnonymous:je,photoURL:D,phoneNumber:S,tenantId:N,stsTokenManager:_,createdAt:W,lastLoginAt:Q});return oe&&Array.isArray(oe)&&(v.providerData=oe.map(w=>Object.assign({},w))),P&&(v._redirectEventId=P),v}static _fromIdTokenResponse(e,t,i=!1){return m(this,null,function*(){let r=new _o;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Mc(s),s})}static _fromGetAccountInfoResponse(e,t,i){return m(this,null,function*(){let r=t.users[0];G(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?YI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new _o;c.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new yo(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(u,h),u})}};var PI=new Map;function ln(n){Hn(n instanceof Function,"Expected a class definition");let e=PI.get(n);return e?(Hn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,PI.set(n,e),e)}var yP=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,i){return m(this,null,function*(){this.storage[t]=i})}_get(t){return m(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Qd=yP;function Dc(n,e,t){return`firebase:${n}:${e}:${t}`}var xc=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Dc(this.userKey,r.apiKey,s),this.fullPersistenceKey=Dc("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Tr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return m(this,null,function*(){if(!t.length)return new n(ln(Qd),e,i);let r=(yield Promise.all(t.map(h=>m(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=r[0]||ln(Qd),o=Dc(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let g=Tr._fromJSON(e,f);h!==s&&(c=g),s=h;break}}catch{}let u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,i):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>m(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,i))})}};function kI(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ew(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nw(e))return"Blackberry";if(iw(e))return"Webos";if(XI(e))return"Safari";if((e.includes("chrome/")||ZI(e))&&!e.includes("edge/"))return"Chrome";if(tw(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function JI(n=$e()){return/firefox\//i.test(n)}function XI(n=$e()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZI(n=$e()){return/crios\//i.test(n)}function ew(n=$e()){return/iemobile/i.test(n)}function tw(n=$e()){return/android/i.test(n)}function nw(n=$e()){return/blackberry/i.test(n)}function iw(n=$e()){return/webos/i.test(n)}function mf(n=$e()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function IP(n=$e()){var e;return mf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wP(){return wy()&&document.documentMode===10}function rw(n=$e()){return mf(n)||tw(n)||iw(n)||nw(n)||/windows phone/i.test(n)||ew(n)}function sw(n,e=[]){let t;switch(n){case"Browser":t=kI($e());break;case"Worker":t=`${kI($e())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qn}/${i}`}var Yd=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function EP(t){return m(this,arguments,function*(n,e={}){return fn(n,"GET","/v2/passwordPolicy",dn(n,e))})}var bP=6,Jd=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:bP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Xd=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lc(this),this.idTokenSubscription=new Lc(this),this.beforeStateQueue=new Yd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ln(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield xc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield QI(this,{idToken:e}),i=yield Tr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(Rt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Mc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=uP()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Rt(this.app))return Promise.reject(hn(this));let t=e?Ue(e):null;return t&&G(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Rt(this.app)?Promise.reject(hn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Rt(this.app)?Promise.reject(hn(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(ln(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield EP(this),t=new Jd(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nn("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield vP(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ln(e)||this._popupRedirectResolver;G(t,this,"argument-error"),this.redirectPersistenceManager=yield xc.create(this,[ln(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return m(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&oP(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Kn(n){return Ue(n)}var Lc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ay(t=>this.observer=t)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var qc={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TP(n){qc=n}function ow(n){return qc.loadJS(n)}function AP(){return qc.recaptchaEnterpriseScript}function SP(){return qc.gapiScript}function aw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var CP="recaptcha-enterprise",RP="NO_RECAPTCHA",Zd=class{constructor(e){this.type=CP,this.auth=Kn(e)}verify(e="verify",t=!1){return m(this,null,function*(){function i(s){return m(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>m(this,null,function*(){fP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new Hd(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})}))})}function r(s,o,c){let u=window.grecaptcha;RI(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(RP)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!t&&RI(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=AP();u.length!==0&&(u+=c),ow(u).then(()=>{r(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})})}};function NI(n,e,t,i=!1){return m(this,null,function*(){let r=new Zd(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Vc(n,e,t,i){return m(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield NI(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>m(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield NI(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function gf(n,e){let t=ao(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(jn(s,e??{}))return r;jt(r,"already-initialized")}return t.initialize({options:e})}function DP(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ln);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function _f(n,e,t){let i=Kn(n);G(i._canInitEmulator,i,"emulator-config-failed"),G(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=cw(e),{host:o,port:c}=PP(e),u=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||kP()}function cw(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function PP(n){let e=cw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:OI(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:OI(o)}}}function OI(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function kP(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Io=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return un("not implemented")}_getIdTokenResponse(e){return un("not implemented")}_linkToIdToken(e,t){return un("not implemented")}_getReauthenticationResolver(e){return un("not implemented")}};function NP(n,e){return m(this,null,function*(){return fn(n,"POST","/v1/accounts:signUp",e)})}function OP(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signInWithPassword",dn(n,e))})}function MP(n,e){return m(this,null,function*(){return fn(n,"POST","/v1/accounts:sendOobCode",dn(n,e))})}function xP(n,e){return m(this,null,function*(){return MP(n,e)})}function LP(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signInWithEmailLink",dn(n,e))})}function VP(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signInWithEmailLink",dn(n,e))})}var wo=class n extends Io{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vc(e,t,"signInWithPassword",OP);case"emailLink":return LP(e,{email:this._email,oobCode:this._password});default:jt(e,"internal-error")}})}_linkToIdToken(e,t){return m(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vc(e,i,"signUpPassword",NP);case"emailLink":return VP(e,{idToken:t,email:this._email,oobCode:this._password});default:jt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function zd(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signInWithIdp",dn(n,e))})}function FP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UP(n){let e=pr(mr(n)).link,t=e?pr(mr(e)).deep_link_id:null,i=pr(mr(n)).deep_link_id;return(i?pr(mr(i)).link:null)||i||t||e||n}var Fc=class n{constructor(e){var t,i,r,s,o,c;let u=pr(mr(e)),h=(t=u.apiKey)!==null&&t!==void 0?t:null,f=(i=u.oobCode)!==null&&i!==void 0?i:null,g=FP((r=u.mode)!==null&&r!==void 0?r:null);G(h&&f&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=UP(e);try{return new n(t)}catch{return null}}};var uw=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return wo._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=Fc.parseLink(i);return G(r,"argument-error"),wo._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Uc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ef=class extends Uc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function jP(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signUp",dn(n,e))})}var Ar=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return m(this,null,function*(){let s=yield Tr._fromIdTokenResponse(e,i,r),o=MI(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return m(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=MI(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function MI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var tf=class n extends mt{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function lw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?tf._fromErrorAndOperation(n,s,e,i):s})}function BP(n,e,t=!1){return m(this,null,function*(){let i=yield vo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ar._forOperation(n,"link",i)})}function $P(n,e,t=!1){return m(this,null,function*(){let{auth:i}=n;if(Rt(i.app))return Promise.reject(hn(i));let r="reauthenticate";try{let s=yield vo(n,lw(i,r,e,n),t);G(s.idToken,i,"internal-error");let o=ff(s.idToken);G(o,i,"internal-error");let{sub:c}=o;return G(n.uid===c,i,"user-mismatch"),Ar._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&jt(i,"user-mismatch"),s}})}function hw(n,e,t=!1){return m(this,null,function*(){if(Rt(n.app))return Promise.reject(hn(n));let i="signIn",r=yield lw(n,i,e),s=yield Ar._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function vf(n,e){return m(this,null,function*(){return hw(Kn(n),e)})}function zP(n,e,t){var i;G(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),G(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(G(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(G(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function dw(n){return m(this,null,function*(){let e=Kn(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function yf(n,e,t){return m(this,null,function*(){let i=Kn(n),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&zP(i,r,t),yield Vc(i,r,"getOobCode",xP)})}function If(n,e,t){return m(this,null,function*(){if(Rt(n.app))return Promise.reject(hn(n));let i=Kn(n),o=yield Vc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&dw(n),u}),c=yield Ar._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function wf(n,e,t){return Rt(n.app)?Promise.reject(hn(n)):vf(Ue(n),uw.credential(e,t)).catch(i=>m(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&dw(n),i}))}function Ef(n,e,t,i){return Ue(n).onIdTokenChanged(e,t,i)}function bf(n,e,t){return Ue(n).beforeAuthStateChanged(e,t)}function Tf(n){return Ue(n).signOut()}var jc="__sak";var Bc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var qP=1e3,GP=10,WP=(()=>{class n extends Bc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);wP()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,GP):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},qP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return m(this,null,function*(){yield Yt(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return m(this,null,function*(){let i=yield Yt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return m(this,null,function*(){yield Yt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),fw=WP;var HP=(()=>{class n extends Bc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),Af=HP;function KP(n){return Promise.all(n.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var QP=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return m(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let u=Array.from(c).map(f=>m(this,null,function*(){return f(i.origin,o)})),h=yield KP(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function pw(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var nf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return m(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let h=pw("",20);r.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(g){let I=g;if(I.data.eventId===h)switch(I.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(I.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ut(){return window}function YP(n){Ut().location.href=n}function mw(){return typeof Ut().WorkerGlobalScope<"u"&&typeof Ut().importScripts=="function"}function JP(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function XP(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZP(){return mw()?self:null}var gw="firebaseLocalStorageDb",ek=1,$c="firebaseLocalStorage",_w="fbase_key",bi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Gc(n,e){return n.transaction([$c],e?"readwrite":"readonly").objectStore($c)}function tk(){let n=indexedDB.deleteDatabase(gw);return new bi(n).toPromise()}function rf(){let n=indexedDB.open(gw,ek);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore($c,{keyPath:_w})}catch(r){t(r)}}),n.addEventListener("success",()=>m(this,null,function*(){let i=n.result;i.objectStoreNames.contains($c)?e(i):(i.close(),yield tk(),e(yield rf()))}))})}function xI(n,e,t){return m(this,null,function*(){let i=Gc(n,!0).put({[_w]:e,value:t});return new bi(i).toPromise()})}function nk(n,e){return m(this,null,function*(){let t=Gc(n,!1).get(e),i=yield new bi(t).toPromise();return i===void 0?null:i.value})}function LI(n,e){let t=Gc(n,!0).delete(e);return new bi(t).toPromise()}var ik=800,rk=3,sk=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield rf(),this.db)})}_withRetries(t){return m(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>rk)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return mw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=QP._getInstance(ZP()),this.receiver._subscribe("keyChanged",(t,i)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var t,i;if(this.activeServiceWorker=yield JP(),!this.activeServiceWorker)return;this.sender=new nf(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||XP()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let t=yield rf();return yield xI(t,jc,"1"),yield LI(t,jc),!0}catch{}return!1})}_withPendingWrite(t){return m(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>xI(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return m(this,null,function*(){let i=yield this._withRetries(r=>nk(r,t));return this.localCache[t]=i,i})}_remove(t){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>LI(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return m(this,null,function*(){let t=yield this._withRetries(s=>{let o=Gc(s,!1).getAll();return new bi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),ik)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),vw=sk;var aU=aw("rcb"),cU=new Ei(3e4,6e4);function ok(n,e){return e?ln(e):(G(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Eo=class extends Io{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zd(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ak(n){return hw(n.auth,new Eo(n),n.bypassAuthState)}function ck(n){let{auth:e,user:t}=n;return G(t,e,"internal-error"),$P(t,new Eo(n),n.bypassAuthState)}function uk(n){return m(this,null,function*(){let{auth:e,user:t}=n;return G(t,e,"internal-error"),BP(t,new Eo(n),n.bypassAuthState)})}var sf=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ak;case"linkViaPopup":case"linkViaRedirect":return uk;case"reauthViaPopup":case"reauthViaRedirect":return ck;default:jt(this.auth,"internal-error")}}resolve(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var uU=new Ei(2e3,1e4);var lk="pendingRedirect",Pc=new Map,of=class n extends sf{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return m(this,null,function*(){let e=Pc.get(this.auth._key());if(!e){try{let i=(yield hk(this.resolver,this.auth))?yield Yt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Pc.set(this.auth._key(),e)}return this.bypassAuthState||Pc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Yt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Yt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function hk(n,e){return m(this,null,function*(){let t=pk(e),i=fk(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function dk(n,e){Pc.set(n._key(),e)}function fk(n){return ln(n._redirectPersistence)}function pk(n){return Dc(lk,n.config.apiKey,n.name)}function mk(n,e,t=!1){return m(this,null,function*(){if(Rt(n.app))return Promise.reject(hn(n));let i=Kn(n),r=ok(i,e),o=yield new of(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var gk=10*60*1e3,af=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_k(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!yw(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(wi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gk&&this.cachedEventUids.clear(),this.cachedEventUids.has(VI(e))}saveEventToCache(e){this.cachedEventUids.add(VI(e)),this.lastProcessedEventTime=Date.now()}};function VI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function _k(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yw(n);default:return!1}}function vk(t){return m(this,arguments,function*(n,e={}){return fn(n,"GET","/v1/projects",e)})}var yk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ik=/^https?/;function wk(n){return m(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield vk(n);for(let t of e)try{if(Ek(t))return}catch{}jt(n,"unauthorized-domain")})}function Ek(n){let e=Gd(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!Ik.test(t))return!1;if(yk.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var bk=new Ei(3e4,6e4);function FI(){let n=Ut().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Tk(n){return new Promise((e,t)=>{var i,r,s;function o(){FI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FI(),t(wi(n,"network-request-failed"))},timeout:bk.get()})}if(!((r=(i=Ut().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ut().gapi)===null||s===void 0)&&s.load)o();else{let c=aw("iframefcb");return Ut()[c]=()=>{gapi.load?o():t(wi(n,"network-request-failed"))},ow(`${SP()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw kc=null,e})}var kc=null;function Ak(n){return kc=kc||Tk(n),kc}var Sk=new Ei(5e3,15e3),Ck="__/auth/iframe",Rk="emulator/auth/iframe",Dk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kk(n){let e=n.config;G(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?hf(e,Rk):`https://${n.config.authDomain}/${Ck}`,i={apiKey:e.apiKey,appName:n.name,v:qn},r=Pk.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ro(i).slice(1)}`}function Nk(n){return m(this,null,function*(){let e=yield Ak(n),t=Ut().gapi;return G(t,n,"internal-error"),e.open({where:document.body,url:kk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dk,dontclear:!0},i=>new Promise((r,s)=>m(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=wi(n,"network-request-failed"),c=Ut().setTimeout(()=>{s(o)},Sk.get());function u(){Ut().clearTimeout(c),r(i)}i.ping(u).then(u,()=>{s(o)})})))})}var Ok={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mk=500,xk=600,Lk="_blank",Vk="http://localhost",zc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Fk(n,e,t,i=Mk,r=xk){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",u=Object.assign(Object.assign({},Ok),{width:i.toString(),height:r.toString(),top:s,left:o}),h=$e().toLowerCase();t&&(c=ZI(h)?Lk:t),JI(h)&&(e=e||Vk,u.scrollbars="yes");let f=Object.entries(u).reduce((I,[S,D])=>`${I}${S}=${D},`,"");if(IP(h)&&c!=="_self")return Uk(e||"",c),new zc(null);let g=window.open(e||"",c,f);G(g,n,"popup-blocked");try{g.focus()}catch{}return new zc(g)}function Uk(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var jk="__/auth/handler",Bk="emulator/auth/handler",$k=encodeURIComponent("fac");function UI(n,e,t,i,r,s){return m(this,null,function*(){G(n.config.authDomain,n,"auth-domain-config-required"),G(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:qn,eventId:r};if(e instanceof Uc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Ty(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,g]of Object.entries(s||{}))o[f]=g}if(e instanceof ef){let f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield n._getAppCheckToken(),h=u?`#${$k}=${encodeURIComponent(u)}`:"";return`${zk(n)}?${ro(c).slice(1)}${h}`})}function zk({config:n}){return n.emulator?hf(n,Bk):`https://${n.authDomain}/${jk}`}var qd="webStorageSupport",cf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Af,this._completeRedirectFn=mk,this._overrideRedirectResult=dk}_openPopup(e,t,i,r){return m(this,null,function*(){var s;Hn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield UI(e,t,i,Gd(),r);return Fk(e,o,pw())})}_openRedirect(e,t,i,r){return m(this,null,function*(){yield this._originValidation(e);let s=yield UI(e,t,i,Gd(),r);return YP(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Hn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return m(this,null,function*(){let t=yield Nk(e),i=new af(e);return t.register("authEvent",r=>(G(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qd,{type:qd},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[qd];o!==void 0&&t(!!o),jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rw()||XI()||mf()}},Iw=cf;var jI="@firebase/auth",BI="1.7.9";var uf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gk(n){zn(new wt("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sw(n)},h=new Xd(i,r,s,u);return DP(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),zn(new wt("auth-internal",e=>{let t=Kn(e.getProvider("auth").getImmediate());return(i=>new uf(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oe(jI,BI,qk(n)),Oe(jI,BI,"esm2017")}var Wk=5*60,Hk=Jh("authIdTokenMaxAge")||Wk,$I=null,Kk=n=>e=>m(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Hk)return;let r=t?.token;$I!==r&&($I=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Sf(n=gr()){let e=ao(n,"auth");if(e.isInitialized())return e.getImmediate();let t=gf(n,{popupRedirectResolver:Iw,persistence:[vw,fw,Af]}),i=Jh("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=Kk(s.toString());bf(t,o,()=>o(t.currentUser)),Ef(t,c=>o(c))}}let r=Qh("auth");return r&&_f(t,`http://${r}`),t}function Qk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}TP({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=wi("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Qk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gk("Browser");var ww="auth",pn=class{constructor(e){return e}},To=class{constructor(){return co(ww)}};var Cf=new ee("angularfire2.auth-instances");function FN(n,e){let t=pc(ww,n,e);return t&&new pn(t)}function UN(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new pn(i)}}var jN={provide:To,deps:[[new Xe,Cf]]},BN={provide:pn,useFactory:FN,deps:[[new Xe,Cf],sn]};function Ew(n,...e){return Oe("angularfire",gi.full,"auth"),Ot([BN,jN,{provide:Cf,useFactory:UN(n),multi:!0,deps:[Ee,xt,yr,_i,[new Xe,vr],...e]}])}var bw=Me(AI,!0),Tw=Me(SI,!0);var Aw=Me(If,!0);var Sw=Me(Sf,!0);var Cw=Me(yf,!0);var Rw=Me(wf,!0);var Dw=Me(Tf,!0);var kw=j(n=>!!n),Rf=(()=>{class n{router;auth;constructor(t,i){this.router=t,this.auth=i}canActivate=(t,i)=>{let r=t.data.authGuardPipe||(()=>kw);return Tw(this.auth).pipe(yt(1),r(t,i),j(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(i){return new(i||n)(L(Fe),L(pn))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Nw=n=>Ia(kw,j(e=>e||n));var Ow=(()=>{class n{constructor(t){this.router=t}navigateToOverview(){this.router.navigate(["/overview"])}static{this.\u0275fac=function(i){return new(i||n)(J(Fe))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-landing-page-banner"]],decls:9,vars:0,consts:[[1,"w-full","h-full","flex","justify-between"],[1,"basis-1/2"],["href","https://ibb.co/3Y1Yc00"],["src","https://i.ibb.co/YT2Thtt/back-to-school-happy-pupils-children-learning-computer-reading-books-concept-png.png","alt","back-to-school-happy-pupils-children-learning-computer-reading-books-concept-png"],[1,"basis-1/2","font-fredoka","flex","flex-col","gap-20"],[1,"text-3xl","font-medium","text-center","mt-16"],[1,"bg-indigo-600","text-white","text-xl","font-bold","py-3","rounded-full","hover:bg-green-600",3,"click"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1)(2,"a",2),ke(3,"img",3),$()(),F(4,"div",4)(5,"h1",5),re(6,"Don't you hate it when ur internet traffic gets intercepted by some shady 3 letter agency? No more! Avoid the glowies with this new course."),$(),F(7,"button",6),be("click",function(){return r.navigateToOverview()}),re(8," Get started "),$()()())}})}}return n})();var Mw=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-landing-page-testimonials"]],decls:6,vars:0,consts:[[1,"flex","w-full","h-full","overflow-hidden","items-center","justify-center","flex-row","gap-x-10"],["src","https://i.ibb.co/F7kTGBs/1200px-Qubes-OS-Logo-svg-1.png","alt","afbeelding "],["src","https://i.ibb.co/N10MVxf/images-1.png","alt","afbeelding "],["src","https://i.ibb.co/RHvqhDw/GAw-Aix6-X0-AALv-E8-1.png","alt","afbeelding "],["src","https://i.ibb.co/cC44FBT/monero-symbol-1280-1.png","alt","afbeelding "],["src","https://i.ibb.co/8Y89yQm/Tor-logo-2011-flat-svg-1.png","alt","afbeelding "]],template:function(i,r){i&1&&(F(0,"div",0),ke(1,"img",1)(2,"img",2)(3,"img",3)(4,"img",4)(5,"img",5),$())}})}}return n})();var xw=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-landing-page-header"]],decls:5,vars:0,consts:[[1,"outline-red-500","min-h-[calc(100vh-4rem)]","flex","items-center","w-full"],[1,"outline-blue-400","w-full","h-96"],[1,"bottom-0","h-20","absolute","left-0","w-full","border-y-2"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1),ke(2,"app-landing-page-banner"),F(3,"div",2),ke(4,"app-landing-page-testimonials"),$()()())},dependencies:[Ow,Mw]})}}return n})();var Lw=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-landing-page"]],decls:2,vars:0,consts:[[1,"px-8","md:px-16","lg:px-32"]],template:function(i,r){i&1&&(F(0,"div",0),ke(1,"app-landing-page-header"),$())},dependencies:[xw]})}}return n})();var Vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fw={};var Qn,Df;(function(){var n;function e(E,_){function v(){}v.prototype=_.prototype,E.D=_.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,b,A){for(var y=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)y[Ht-2]=arguments[Ht];return _.prototype[b].apply(w,y)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,v){v||(v=0);var w=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)w[b]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(b=0;16>b;++b)w[b]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=E.g[0],v=E.g[1],b=E.g[2];var A=E.g[3],y=_+(A^v&(b^A))+w[0]+3614090360&4294967295;_=v+(y<<7&4294967295|y>>>25),y=A+(b^_&(v^b))+w[1]+3905402710&4294967295,A=_+(y<<12&4294967295|y>>>20),y=b+(v^A&(_^v))+w[2]+606105819&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(_^b&(A^_))+w[3]+3250441966&4294967295,v=b+(y<<22&4294967295|y>>>10),y=_+(A^v&(b^A))+w[4]+4118548399&4294967295,_=v+(y<<7&4294967295|y>>>25),y=A+(b^_&(v^b))+w[5]+1200080426&4294967295,A=_+(y<<12&4294967295|y>>>20),y=b+(v^A&(_^v))+w[6]+2821735955&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(_^b&(A^_))+w[7]+4249261313&4294967295,v=b+(y<<22&4294967295|y>>>10),y=_+(A^v&(b^A))+w[8]+1770035416&4294967295,_=v+(y<<7&4294967295|y>>>25),y=A+(b^_&(v^b))+w[9]+2336552879&4294967295,A=_+(y<<12&4294967295|y>>>20),y=b+(v^A&(_^v))+w[10]+4294925233&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(_^b&(A^_))+w[11]+2304563134&4294967295,v=b+(y<<22&4294967295|y>>>10),y=_+(A^v&(b^A))+w[12]+1804603682&4294967295,_=v+(y<<7&4294967295|y>>>25),y=A+(b^_&(v^b))+w[13]+4254626195&4294967295,A=_+(y<<12&4294967295|y>>>20),y=b+(v^A&(_^v))+w[14]+2792965006&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(_^b&(A^_))+w[15]+1236535329&4294967295,v=b+(y<<22&4294967295|y>>>10),y=_+(b^A&(v^b))+w[1]+4129170786&4294967295,_=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(_^v))+w[6]+3225465664&4294967295,A=_+(y<<9&4294967295|y>>>23),y=b+(_^v&(A^_))+w[11]+643717713&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^_&(b^A))+w[0]+3921069994&4294967295,v=b+(y<<20&4294967295|y>>>12),y=_+(b^A&(v^b))+w[5]+3593408605&4294967295,_=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(_^v))+w[10]+38016083&4294967295,A=_+(y<<9&4294967295|y>>>23),y=b+(_^v&(A^_))+w[15]+3634488961&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^_&(b^A))+w[4]+3889429448&4294967295,v=b+(y<<20&4294967295|y>>>12),y=_+(b^A&(v^b))+w[9]+568446438&4294967295,_=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(_^v))+w[14]+3275163606&4294967295,A=_+(y<<9&4294967295|y>>>23),y=b+(_^v&(A^_))+w[3]+4107603335&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^_&(b^A))+w[8]+1163531501&4294967295,v=b+(y<<20&4294967295|y>>>12),y=_+(b^A&(v^b))+w[13]+2850285829&4294967295,_=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(_^v))+w[2]+4243563512&4294967295,A=_+(y<<9&4294967295|y>>>23),y=b+(_^v&(A^_))+w[7]+1735328473&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^_&(b^A))+w[12]+2368359562&4294967295,v=b+(y<<20&4294967295|y>>>12),y=_+(v^b^A)+w[5]+4294588738&4294967295,_=v+(y<<4&4294967295|y>>>28),y=A+(_^v^b)+w[8]+2272392833&4294967295,A=_+(y<<11&4294967295|y>>>21),y=b+(A^_^v)+w[11]+1839030562&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^_)+w[14]+4259657740&4294967295,v=b+(y<<23&4294967295|y>>>9),y=_+(v^b^A)+w[1]+2763975236&4294967295,_=v+(y<<4&4294967295|y>>>28),y=A+(_^v^b)+w[4]+1272893353&4294967295,A=_+(y<<11&4294967295|y>>>21),y=b+(A^_^v)+w[7]+4139469664&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^_)+w[10]+3200236656&4294967295,v=b+(y<<23&4294967295|y>>>9),y=_+(v^b^A)+w[13]+681279174&4294967295,_=v+(y<<4&4294967295|y>>>28),y=A+(_^v^b)+w[0]+3936430074&4294967295,A=_+(y<<11&4294967295|y>>>21),y=b+(A^_^v)+w[3]+3572445317&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^_)+w[6]+76029189&4294967295,v=b+(y<<23&4294967295|y>>>9),y=_+(v^b^A)+w[9]+3654602809&4294967295,_=v+(y<<4&4294967295|y>>>28),y=A+(_^v^b)+w[12]+3873151461&4294967295,A=_+(y<<11&4294967295|y>>>21),y=b+(A^_^v)+w[15]+530742520&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^_)+w[2]+3299628645&4294967295,v=b+(y<<23&4294967295|y>>>9),y=_+(b^(v|~A))+w[0]+4096336452&4294967295,_=v+(y<<6&4294967295|y>>>26),y=A+(v^(_|~b))+w[7]+1126891415&4294967295,A=_+(y<<10&4294967295|y>>>22),y=b+(_^(A|~v))+w[14]+2878612391&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~_))+w[5]+4237533241&4294967295,v=b+(y<<21&4294967295|y>>>11),y=_+(b^(v|~A))+w[12]+1700485571&4294967295,_=v+(y<<6&4294967295|y>>>26),y=A+(v^(_|~b))+w[3]+2399980690&4294967295,A=_+(y<<10&4294967295|y>>>22),y=b+(_^(A|~v))+w[10]+4293915773&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~_))+w[1]+2240044497&4294967295,v=b+(y<<21&4294967295|y>>>11),y=_+(b^(v|~A))+w[8]+1873313359&4294967295,_=v+(y<<6&4294967295|y>>>26),y=A+(v^(_|~b))+w[15]+4264355552&4294967295,A=_+(y<<10&4294967295|y>>>22),y=b+(_^(A|~v))+w[6]+2734768916&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~_))+w[13]+1309151649&4294967295,v=b+(y<<21&4294967295|y>>>11),y=_+(b^(v|~A))+w[4]+4149444226&4294967295,_=v+(y<<6&4294967295|y>>>26),y=A+(v^(_|~b))+w[11]+3174756917&4294967295,A=_+(y<<10&4294967295|y>>>22),y=b+(_^(A|~v))+w[2]+718787259&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~_))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(b+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+A&4294967295}i.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var v=_-this.blockSize,w=this.B,b=this.h,A=0;A<_;){if(b==0)for(;A<=v;)r(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<_;)if(w[b++]=E.charCodeAt(A++),b==this.blockSize){r(this,w),b=0;break}}else for(;A<_;)if(w[b++]=E[A++],b==this.blockSize){r(this,w),b=0;break}}this.h=b,this.o+=_},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var v=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=v&255,v/=256;for(this.u(E),E=Array(16),_=v=0;4>_;++_)for(var w=0;32>w;w+=8)E[v++]=this.g[_]>>>w&255;return E};function s(E,_){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=_(E)}function o(E,_){this.h=_;for(var v=[],w=!0,b=E.length-1;0<=b;b--){var A=E[b]|0;w&&A==_||(v[b]=A,w=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return P(h(-E));for(var _=[],v=1,w=0;E>=v;w++)_[w]=E/v|0,v*=4294967296;return new o(_,0)}function f(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return P(f(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(_,8)),w=g,b=0;b<E.length;b+=8){var A=Math.min(8,E.length-b),y=parseInt(E.substring(b,b+A),_);8>A?(A=h(Math.pow(_,A)),w=w.j(A).add(h(y))):(w=w.j(v),w=w.add(h(y)))}return w}var g=u(0),I=u(1),S=u(16777216);n=o.prototype,n.m=function(){if(N(this))return-P(this).m();for(var E=0,_=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*_,_*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(N(this))return"-"+P(this).toString(E);for(var _=h(Math.pow(E,6)),v=this,w="";;){var b=fe(v,_).g;v=W(v,b.j(_));var A=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=b,D(v))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function N(E){return E.h==-1}n.l=function(E){return E=W(this,E),N(E)?-1:D(E)?0:1};function P(E){for(var _=E.g.length,v=[],w=0;w<_;w++)v[w]=~E.g[w];return new o(v,~E.h).add(I)}n.abs=function(){return N(this)?P(this):this},n.add=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],w=0,b=0;b<=_;b++){var A=w+(this.i(b)&65535)+(E.i(b)&65535),y=(A>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);w=y>>>16,A&=65535,y&=65535,v[b]=y<<16|A}return new o(v,v[v.length-1]&-2147483648?-1:0)};function W(E,_){return E.add(P(_))}n.j=function(E){if(D(this)||D(E))return g;if(N(this))return N(E)?P(this).j(P(E)):P(P(this).j(E));if(N(E))return P(this.j(P(E)));if(0>this.l(S)&&0>E.l(S))return h(this.m()*E.m());for(var _=this.g.length+E.g.length,v=[],w=0;w<2*_;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<E.g.length;b++){var A=this.i(w)>>>16,y=this.i(w)&65535,Ht=E.i(b)>>>16,is=E.i(b)&65535;v[2*w+2*b]+=y*is,Q(v,2*w+2*b),v[2*w+2*b+1]+=A*is,Q(v,2*w+2*b+1),v[2*w+2*b+1]+=y*Ht,Q(v,2*w+2*b+1),v[2*w+2*b+2]+=A*Ht,Q(v,2*w+2*b+2)}for(w=0;w<_;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=_;w<2*_;w++)v[w]=0;return new o(v,0)};function Q(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function Y(E,_){this.g=E,this.h=_}function fe(E,_){if(D(_))throw Error("division by zero");if(D(E))return new Y(g,g);if(N(E))return _=fe(P(E),_),new Y(P(_.g),P(_.h));if(N(_))return _=fe(E,P(_)),new Y(P(_.g),_.h);if(30<E.g.length){if(N(E)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var v=I,w=_;0>=w.l(E);)v=je(v),w=je(w);var b=oe(v,1),A=oe(w,1);for(w=oe(w,2),v=oe(v,2);!D(w);){var y=A.add(w);0>=y.l(E)&&(b=b.add(v),A=y),w=oe(w,1),v=oe(v,1)}return _=W(E,b.j(_)),new Y(b,_)}for(b=g;0<=E.l(_);){for(v=Math.max(1,Math.floor(E.m()/_.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=h(v),y=A.j(_);N(y)||0<y.l(E);)v-=w,A=h(v),y=A.j(_);D(A)&&(A=I),b=b.add(A),E=W(E,y)}return new Y(b,E)}n.A=function(E){return fe(this,E).h},n.and=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},n.or=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},n.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function je(E){for(var _=E.g.length+1,v=[],w=0;w<_;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function oe(E,_){var v=_>>5;_%=32;for(var w=E.g.length-v,b=[],A=0;A<w;A++)b[A]=0<_?E.i(A+v)>>>_|E.i(A+v+1)<<32-_:E.i(A+v);return new o(b,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Df=Fw.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Qn=Fw.Integer=o}).apply(typeof Vw<"u"?Vw:typeof self<"u"?self:typeof window<"u"?window:{});var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mn={};var Pf,GN,Sr,kf,Ao,Hc,Nf,Of,Mf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,d){return a==Array.prototype||a==Object.prototype||(a[l]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wc=="object"&&Wc];for(var l=0;l<a.length;++l){var d=a[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=t(this);function r(a,l){if(l)e:{var d=i;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in d))break e;d=d[T]}a=a[a.length-1],p=d[a],l=l(p),l!=p&&l!=null&&e(d,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var d=0,p=!1,T={next:function(){if(!p&&d<a.length){var C=d++;return{value:l(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(a){return a||function(){return s(this,function(l,d){return d})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function h(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,d){return a.call.apply(a.bind,arguments)}function g(a,l,d){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function I(a,l,d){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,I.apply(null,arguments)}function S(a,l){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function D(a,l){function d(){}d.prototype=l.prototype,a.aa=l.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(p,T,C){for(var O=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)O[ge-2]=arguments[ge];return l.prototype[T].apply(p,O)}}function N(a){let l=a.length;if(0<l){let d=Array(l);for(let p=0;p<l;p++)d[p]=a[p];return d}return[]}function P(a,l){for(let d=1;d<arguments.length;d++){let p=arguments[d];if(u(p)){let T=a.length||0,C=p.length||0;a.length=T+C;for(let O=0;O<C;O++)a[T+O]=p[O]}else a.push(p)}}class W{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Q(a){return/^[\s\xa0]*$/.test(a)}function Y(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function fe(a){return fe[" "](a),a}fe[" "]=function(){};var je=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function oe(a,l,d){for(let p in a)l.call(d,a[p],p,a)}function E(a,l){for(let d in a)l.call(void 0,a[d],d,a)}function _(a){let l={};for(let d in a)l[d]=a[d];return l}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let d,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(d in p)a[d]=p[d];for(let C=0;C<v.length;C++)d=v[C],Object.prototype.hasOwnProperty.call(p,d)&&(a[d]=p[d])}}function b(a){var l=1;a=a.split(":");let d=[];for(;0<l&&a.length;)d.push(a.shift()),l--;return a.length&&d.push(a.join(":")),d}function A(a){c.setTimeout(()=>{throw a},0)}function y(){var a=Xu;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Ht{constructor(){this.h=this.g=null}add(l,d){let p=is.get();p.set(l,d),this.h?this.h.next=p:this.g=p,this.h=p}}var is=new W(()=>new YT,a=>a.reset());class YT{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let rs,ss=!1,Xu=new Ht,hg=()=>{let a=c.Promise.resolve(void 0);rs=()=>{a.then(JT)}};var JT=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(d){A(d)}var l=is;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}ss=!1};function wn(){this.s=this.s,this.C=this.C}wn.prototype.s=!1,wn.prototype.ma=function(){this.s||(this.s=!0,this.N())},wn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ke(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Ke.prototype.h=function(){this.defaultPrevented=!0};var XT=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let d=()=>{};c.addEventListener("test",d,l),c.removeEventListener("test",d,l)}catch{}return a}();function os(a,l){if(Ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(je){e:{try{fe(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else d=="mouseover"?l=a.fromElement:d=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ZT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&os.aa.h.call(this)}}D(os,Ke);var ZT={2:"touch",3:"pen",4:"mouse"};os.prototype.h=function(){os.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var as="closure_listenable_"+(1e6*Math.random()|0),eA=0;function tA(a,l,d,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=d,this.capture=!!p,this.ha=T,this.key=++eA,this.da=this.fa=!1}function na(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ia(a){this.src=a,this.g={},this.h=0}ia.prototype.add=function(a,l,d,p,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var O=el(a,l,p,T);return-1<O?(l=a[O],d||(l.fa=!1)):(l=new tA(l,this.src,C,!!p,T),l.fa=d,a.push(l)),l};function Zu(a,l){var d=l.type;if(d in a.g){var p=a.g[d],T=Array.prototype.indexOf.call(p,l,void 0),C;(C=0<=T)&&Array.prototype.splice.call(p,T,1),C&&(na(l),a.g[d].length==0&&(delete a.g[d],a.h--))}}function el(a,l,d,p){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==l&&C.capture==!!d&&C.ha==p)return T}return-1}var tl="closure_lm_"+(1e6*Math.random()|0),nl={};function dg(a,l,d,p,T){if(p&&p.once)return pg(a,l,d,p,T);if(Array.isArray(l)){for(var C=0;C<l.length;C++)dg(a,l[C],d,p,T);return null}return d=ol(d),a&&a[as]?a.K(l,d,h(p)?!!p.capture:!!p,T):fg(a,l,d,!1,p,T)}function fg(a,l,d,p,T,C){if(!l)throw Error("Invalid event type");var O=h(T)?!!T.capture:!!T,ge=rl(a);if(ge||(a[tl]=ge=new ia(a)),d=ge.add(l,d,p,O,C),d.proxy)return d;if(p=nA(),d.proxy=p,p.src=a,p.listener=d,a.addEventListener)XT||(T=O),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(gg(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function nA(){function a(d){return l.call(a.src,a.listener,d)}let l=iA;return a}function pg(a,l,d,p,T){if(Array.isArray(l)){for(var C=0;C<l.length;C++)pg(a,l[C],d,p,T);return null}return d=ol(d),a&&a[as]?a.L(l,d,h(p)?!!p.capture:!!p,T):fg(a,l,d,!0,p,T)}function mg(a,l,d,p,T){if(Array.isArray(l))for(var C=0;C<l.length;C++)mg(a,l[C],d,p,T);else p=h(p)?!!p.capture:!!p,d=ol(d),a&&a[as]?(a=a.i,l=String(l).toString(),l in a.g&&(C=a.g[l],d=el(C,d,p,T),-1<d&&(na(C[d]),Array.prototype.splice.call(C,d,1),C.length==0&&(delete a.g[l],a.h--)))):a&&(a=rl(a))&&(l=a.g[l.toString()],a=-1,l&&(a=el(l,d,p,T)),(d=-1<a?l[a]:null)&&il(d))}function il(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[as])Zu(l.i,a);else{var d=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(d,p,a.capture):l.detachEvent?l.detachEvent(gg(d),p):l.addListener&&l.removeListener&&l.removeListener(p),(d=rl(l))?(Zu(d,a),d.h==0&&(d.src=null,l[tl]=null)):na(a)}}}function gg(a){return a in nl?nl[a]:nl[a]="on"+a}function iA(a,l){if(a.da)a=!0;else{l=new os(l,this);var d=a.listener,p=a.ha||a.src;a.fa&&il(a),a=d.call(p,l)}return a}function rl(a){return a=a[tl],a instanceof ia?a:null}var sl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ol(a){return typeof a=="function"?a:(a[sl]||(a[sl]=function(l){return a.handleEvent(l)}),a[sl])}function Qe(){wn.call(this),this.i=new ia(this),this.M=this,this.F=null}D(Qe,wn),Qe.prototype[as]=!0,Qe.prototype.removeEventListener=function(a,l,d,p){mg(this,a,l,d,p)};function it(a,l){var d,p=a.F;if(p)for(d=[];p;p=p.F)d.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Ke(l,a);else if(l instanceof Ke)l.target=l.target||a;else{var T=l;l=new Ke(p,a),w(l,T)}if(T=!0,d)for(var C=d.length-1;0<=C;C--){var O=l.g=d[C];T=ra(O,p,!0,l)&&T}if(O=l.g=a,T=ra(O,p,!0,l)&&T,T=ra(O,p,!1,l)&&T,d)for(C=0;C<d.length;C++)O=l.g=d[C],T=ra(O,p,!1,l)&&T}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var d=a.g[l],p=0;p<d.length;p++)na(d[p]);delete a.g[l],a.h--}}this.F=null},Qe.prototype.K=function(a,l,d,p){return this.i.add(String(a),l,!1,d,p)},Qe.prototype.L=function(a,l,d,p){return this.i.add(String(a),l,!0,d,p)};function ra(a,l,d,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,C=0;C<l.length;++C){var O=l[C];if(O&&!O.da&&O.capture==d){var ge=O.listener,qe=O.ha||O.src;O.fa&&Zu(a.i,O),T=ge.call(qe,p)!==!1&&T}}return T&&!p.defaultPrevented}function _g(a,l,d){if(typeof a=="function")d&&(a=I(a,d));else if(a&&typeof a.handleEvent=="function")a=I(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function vg(a){a.g=_g(()=>{a.g=null,a.i&&(a.i=!1,vg(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class rA extends wn{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:vg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(a){wn.call(this),this.h=a,this.g={}}D(cs,wn);var yg=[];function Ig(a){oe(a.g,function(l,d){this.g.hasOwnProperty(d)&&il(l)},a),a.g={}}cs.prototype.N=function(){cs.aa.N.call(this),Ig(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var al=c.JSON.stringify,sA=c.JSON.parse,oA=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function cl(){}cl.prototype.h=null;function wg(a){return a.h||(a.h=a.i())}function Eg(){}var us={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ul(){Ke.call(this,"d")}D(ul,Ke);function ll(){Ke.call(this,"c")}D(ll,Ke);var ni={},bg=null;function sa(){return bg=bg||new Qe}ni.La="serverreachability";function Tg(a){Ke.call(this,ni.La,a)}D(Tg,Ke);function ls(a){let l=sa();it(l,new Tg(l))}ni.STAT_EVENT="statevent";function Ag(a,l){Ke.call(this,ni.STAT_EVENT,a),this.stat=l}D(Ag,Ke);function rt(a){let l=sa();it(l,new Ag(l,a))}ni.Ma="timingevent";function Sg(a,l){Ke.call(this,ni.Ma,a),this.size=l}D(Sg,Ke);function hs(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function ds(){this.g=!0}ds.prototype.xa=function(){this.g=!1};function aA(a,l,d,p,T,C){a.info(function(){if(a.g)if(C)for(var O="",ge=C.split("&"),qe=0;qe<ge.length;qe++){var ae=ge[qe].split("=");if(1<ae.length){var Ye=ae[0];ae=ae[1];var Je=Ye.split("_");O=2<=Je.length&&Je[1]=="type"?O+(Ye+"="+ae+"&"):O+(Ye+"=redacted&")}}else O=null;else O=C;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+d+`
`+O})}function cA(a,l,d,p,T,C,O){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+d+`
`+C+" "+O})}function Ui(a,l,d,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+lA(a,d)+(p?" "+p:"")})}function uA(a,l){a.info(function(){return"TIMEOUT: "+l})}ds.prototype.info=function(){};function lA(a,l){if(!a.g)return l;if(!l)return null;try{var d=JSON.parse(l);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var p=d[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return al(d)}catch{return l}}var oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hl;function aa(){}D(aa,cl),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},hl=new aa;function En(a,l,d,p){this.j=a,this.i=l,this.l=d,this.R=p||1,this.U=new cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rg}function Rg(){this.i=null,this.g="",this.h=!1}var Dg={},dl={};function fl(a,l,d){a.L=1,a.v=ha(Kt(l)),a.m=d,a.P=!0,Pg(a,null)}function Pg(a,l){a.F=Date.now(),ca(a),a.A=Kt(a.v);var d=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),qg(d.i,"t",p),a.C=0,d=a.j.J,a.h=new Rg,a.g=c_(a.j,d?l:null,!a.m),0<a.O&&(a.M=new rA(I(a.Y,a,a.g),a.O)),l=a.U,d=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(yg[0]=T.toString()),T=yg);for(var C=0;C<T.length;C++){var O=dg(d,T[C],p||l.handleEvent,!1,l.h||l);if(!O)break;l.g[O.key]=O}l=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),ls(),aA(a.i,a.u,a.A,a.l,a.R,a.m)}En.prototype.ca=function(a){a=a.target;let l=this.M;l&&Qt(a)==3?l.j():this.Y(a)},En.prototype.Y=function(a){try{if(a==this.g)e:{let Je=Qt(this.g);var l=this.g.Ba();let $i=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||Jg(this.g)))){this.J||Je!=4||l==7||(l==8||0>=$i?ls(3):ls(2)),pl(this);var d=this.g.Z();this.X=d;t:if(kg(this)){var p=Jg(this.g);a="";var T=p.length,C=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),fs(this);var O="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(C&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=d==200,cA(this.i,this.u,this.A,this.l,this.R,Je,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,qe=this.g;if((ge=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(ge)){var ae=ge;break t}}ae=null}if(d=ae)Ui(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ml(this,d);else{this.o=!1,this.s=3,rt(12),ii(this),fs(this);break e}}if(this.P){d=!0;let Tt;for(;!this.J&&this.C<O.length;)if(Tt=hA(this,O),Tt==dl){Je==4&&(this.s=4,rt(14),d=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Dg){this.s=4,rt(15),Ui(this.i,this.l,O,"[Invalid Chunk]"),d=!1;break}else Ui(this.i,this.l,Tt,null),ml(this,Tt);if(kg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||O.length!=0||this.h.h||(this.s=1,rt(16),d=!1),this.o=this.o&&d,!d)Ui(this.i,this.l,O,"[Invalid Chunked Response]"),ii(this),fs(this);else if(0<O.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),wl(Ye),Ye.M=!0,rt(11))}}else Ui(this.i,this.l,O,null),ml(this,O);Je==4&&ii(this),this.o&&!this.J&&(Je==4?r_(this.j,this):(this.o=!1,ca(this)))}else RA(this.g),d==400&&0<O.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),ii(this),fs(this)}}}catch{}finally{}};function kg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function hA(a,l){var d=a.C,p=l.indexOf(`
`,d);return p==-1?dl:(d=Number(l.substring(d,p)),isNaN(d)?Dg:(p+=1,p+d>l.length?dl:(l=l.slice(p,p+d),a.C=p+d,l)))}En.prototype.cancel=function(){this.J=!0,ii(this)};function ca(a){a.S=Date.now()+a.I,Ng(a,a.I)}function Ng(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=hs(I(a.ba,a),l)}function pl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}En.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(uA(this.i,this.A),this.L!=2&&(ls(),rt(17)),ii(this),this.s=2,fs(this)):Ng(this,this.S-a)};function fs(a){a.j.G==0||a.J||r_(a.j,a)}function ii(a){pl(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,Ig(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function ml(a,l){try{var d=a.j;if(d.G!=0&&(d.g==a||gl(d.h,a))){if(!a.K&&gl(d.h,a)&&d.G==3){try{var p=d.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)ga(d),pa(d);else break e;Il(d),rt(18)}}else d.za=T[1],0<d.za-d.T&&37500>T[2]&&d.F&&d.v==0&&!d.C&&(d.C=hs(I(d.Za,d),6e3));if(1>=xg(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else si(d,11)}else if((a.K||d.g==a)&&ga(d),!Q(l))for(T=d.Da.g.parse(l),l=0;l<T.length;l++){let ae=T[l];if(d.T=ae[0],ae=ae[1],d.G==2)if(ae[0]=="c"){d.K=ae[1],d.ia=ae[2];let Ye=ae[3];Ye!=null&&(d.la=Ye,d.j.info("VER="+d.la));let Je=ae[4];Je!=null&&(d.Aa=Je,d.j.info("SVER="+d.Aa));let $i=ae[5];$i!=null&&typeof $i=="number"&&0<$i&&(p=1.5*$i,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;let Tt=a.g;if(Tt){let va=Tt.g?Tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var C=p.h;C.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(_l(C,C.h),C.h=null))}if(p.D){let El=Tt.g?Tt.g.getResponseHeader("X-HTTP-Session-Id"):null;El&&(p.ya=El,we(p.I,p.D,El))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var O=a;if(p.qa=a_(p,p.J?p.ia:null,p.W),O.K){Lg(p.h,O);var ge=O,qe=p.L;qe&&(ge.I=qe),ge.B&&(pl(ge),ca(ge)),p.g=O}else n_(p);0<d.i.length&&ma(d)}else ae[0]!="stop"&&ae[0]!="close"||si(d,7);else d.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?si(d,7):yl(d):ae[0]!="noop"&&d.l&&d.l.ta(ae),d.v=0)}}ls(4)}catch{}}var dA=class{constructor(a,l){this.g=a,this.map=l}};function Og(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function xg(a){return a.h?1:a.g?a.g.size:0}function gl(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function _l(a,l){a.g?a.g.add(l):a.h=l}function Lg(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Og.prototype.cancel=function(){if(this.i=Vg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Vg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let d of a.g.values())l=l.concat(d.D);return l}return N(a.i)}function fA(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],d=a.length,p=0;p<d;p++)l.push(a[p]);return l}l=[],d=0;for(p in a)l[d++]=a[p];return l}function pA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var d=0;d<a;d++)l.push(d);return l}l=[],d=0;for(let p in a)l[d++]=p;return l}}}function Fg(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var d=pA(a),p=fA(a),T=p.length,C=0;C<T;C++)l.call(void 0,p[C],d&&d[C],a)}var Ug=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mA(a,l){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var p=a[d].indexOf("="),T=null;if(0<=p){var C=a[d].substring(0,p);T=a[d].substring(p+1)}else C=a[d];l(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ri(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ri){this.h=a.h,ua(this,a.j),this.o=a.o,this.g=a.g,la(this,a.s),this.l=a.l;var l=a.i,d=new gs;d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),jg(this,d),this.m=a.m}else a&&(l=String(a).match(Ug))?(this.h=!1,ua(this,l[1]||"",!0),this.o=ps(l[2]||""),this.g=ps(l[3]||"",!0),la(this,l[4]),this.l=ps(l[5]||"",!0),jg(this,l[6]||"",!0),this.m=ps(l[7]||"")):(this.h=!1,this.i=new gs(null,this.h))}ri.prototype.toString=function(){var a=[],l=this.j;l&&a.push(ms(l,Bg,!0),":");var d=this.g;return(d||l=="file")&&(a.push("//"),(l=this.o)&&a.push(ms(l,Bg,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ms(d,d.charAt(0)=="/"?vA:_A,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ms(d,IA)),a.join("")};function Kt(a){return new ri(a)}function ua(a,l,d){a.j=d?ps(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function la(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function jg(a,l,d){l instanceof gs?(a.i=l,wA(a.i,a.h)):(d||(l=ms(l,yA)),a.i=new gs(l,a.h))}function we(a,l,d){a.i.set(l,d)}function ha(a){return we(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ps(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ms(a,l,d){return typeof a=="string"?(a=encodeURI(a).replace(l,gA),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function gA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Bg=/[#\/\?@]/g,_A=/[#\?:]/g,vA=/[#\?]/g,yA=/[#\?@]/g,IA=/#/g;function gs(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function bn(a){a.g||(a.g=new Map,a.h=0,a.i&&mA(a.i,function(l,d){a.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}n=gs.prototype,n.add=function(a,l){bn(this),this.i=null,a=ji(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(l),this.h+=1,this};function $g(a,l){bn(a),l=ji(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function zg(a,l){return bn(a),l=ji(a,l),a.g.has(l)}n.forEach=function(a,l){bn(this),this.g.forEach(function(d,p){d.forEach(function(T){a.call(l,T,p,this)},this)},this)},n.na=function(){bn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),d=[];for(let p=0;p<l.length;p++){let T=a[p];for(let C=0;C<T.length;C++)d.push(l[p])}return d},n.V=function(a){bn(this);let l=[];if(typeof a=="string")zg(this,a)&&(l=l.concat(this.g.get(ji(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)l=l.concat(a[d])}return l},n.set=function(a,l){return bn(this),this.i=null,a=ji(this,a),zg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function qg(a,l,d){$g(a,l),0<d.length&&(a.i=null,a.g.set(ji(a,l),N(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var d=0;d<l.length;d++){var p=l[d];let C=encodeURIComponent(String(p)),O=this.V(p);for(p=0;p<O.length;p++){var T=C;O[p]!==""&&(T+="="+encodeURIComponent(String(O[p]))),a.push(T)}}return this.i=a.join("&")};function ji(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function wA(a,l){l&&!a.j&&(bn(a),a.i=null,a.g.forEach(function(d,p){var T=p.toLowerCase();p!=T&&($g(this,p),qg(this,T,d))},a)),a.j=l}function EA(a,l){let d=new ds;if(c.Image){let p=new Image;p.onload=S(Tn,d,"TestLoadImage: loaded",!0,l,p),p.onerror=S(Tn,d,"TestLoadImage: error",!1,l,p),p.onabort=S(Tn,d,"TestLoadImage: abort",!1,l,p),p.ontimeout=S(Tn,d,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function bA(a,l){let d=new ds,p=new AbortController,T=setTimeout(()=>{p.abort(),Tn(d,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(T),C.ok?Tn(d,"TestPingServer: ok",!0,l):Tn(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),Tn(d,"TestPingServer: error",!1,l)})}function Tn(a,l,d,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(d)}catch{}}function TA(){this.g=new oA}function AA(a,l,d){let p=d||"";try{Fg(a,function(T,C){let O=T;h(T)&&(O=al(T)),l.push(p+C+"="+encodeURIComponent(O))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function _s(a){this.l=a.Ub||null,this.j=a.eb||!1}D(_s,cl),_s.prototype.g=function(){return new da(this.l,this.j)},_s.prototype.i=function(a){return function(){return a}}({});function da(a,l){Qe.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(da,Qe),n=da.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,ys(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ys(this)),this.g&&(this.readyState=3,ys(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?vs(this):ys(this),this.readyState==3&&Gg(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,vs(this))},n.Qa=function(a){this.g&&(this.response=a,vs(this))},n.ga=function(){this.g&&vs(this)};function vs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ys(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=l.next();return a.join(`\r
`)};function ys(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Wg(a){let l="";return oe(a,function(d,p){l+=p,l+=":",l+=d,l+=`\r
`}),l}function vl(a,l,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Wg(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):we(a,l,d))}function Ce(a){Qe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ce,Qe);var SA=/^https?$/i,CA=["POST","PUT"];n=Ce.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hl.g(),this.v=this.o?wg(this.o):wg(hl),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(C){Hg(this,C);return}if(a=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)d.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())d.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(CA,l,void 0))||p||T||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,O]of d)this.g.setRequestHeader(C,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yg(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){Hg(this,C)}};function Hg(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Kg(a),fa(a)}function Kg(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,it(this,"complete"),it(this,"abort"),fa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fa(this,!0)),Ce.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qg(this):this.bb())},n.bb=function(){Qg(this)};function Qg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Qt(a)!=4||a.Z()!=2)){if(a.u&&Qt(a)==4)_g(a.Ea,0,a);else if(it(a,"readystatechange"),Qt(a)==4){a.h=!1;try{let O=a.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var p;if(p=O===0){var T=String(a.D).match(Ug)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!SA.test(T?T.toLowerCase():"")}d=p}if(d)it(a,"complete"),it(a,"success");else{a.m=6;try{var C=2<Qt(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",Kg(a)}}finally{fa(a)}}}}function fa(a,l){if(a.g){Yg(a);let d=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||it(a,"ready");try{d.onreadystatechange=p}catch{}}}function Yg(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Qt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),sA(l)}};function Jg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function RA(a){let l={};a=(a.g&&2<=Qt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(Q(a[p]))continue;var d=b(a[p]);let T=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let C=l[T]||[];l[T]=C,C.push(d)}E(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(a,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||l}function Xg(a){this.Aa=0,this.i=[],this.j=new ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,a),this.cb=Is("retryDelaySeedMs",1e4,a),this.Wa=Is("forwardChannelMaxRetries",2,a),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Og(a&&a.concurrentRequestLimit),this.Da=new TA,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xg.prototype,n.la=8,n.G=1,n.connect=function(a,l,d,p){rt(0),this.W=a,this.H=l||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=a_(this,null,this.W),ma(this)};function yl(a){if(Zg(a),a.G==3){var l=a.U++,d=Kt(a.I);if(we(d,"SID",a.K),we(d,"RID",l),we(d,"TYPE","terminate"),ws(a,d),l=new En(a,a.j,l),l.L=2,l.v=ha(Kt(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=l.v,d=!0),d||(l.g=c_(l.j,null),l.g.ea(l.v)),l.F=Date.now(),ca(l)}o_(a)}function pa(a){a.g&&(wl(a),a.g.cancel(),a.g=null)}function Zg(a){pa(a),a.u&&(c.clearTimeout(a.u),a.u=null),ga(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ma(a){if(!Mg(a.h)&&!a.s){a.s=!0;var l=a.Ga;rs||hg(),ss||(rs(),ss=!0),Xu.add(l,a),a.B=0}}function DA(a,l){return xg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=hs(I(a.Ga,a,l),s_(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new En(this,this.j,a),C=this.o;if(this.S&&(C?(C=_(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=t_(this,T,l),d=Kt(this.I),we(d,"RID",a),we(d,"CVER",22),this.D&&we(d,"X-HTTP-Session-Id",this.D),ws(this,d),C&&(this.O?l="headers="+encodeURIComponent(String(Wg(C)))+"&"+l:this.m&&vl(d,this.m,C)),_l(this.h,T),this.Ua&&we(d,"TYPE","init"),this.P?(we(d,"$req",l),we(d,"SID","null"),T.T=!0,fl(T,d,null)):fl(T,d,l),this.G=2}}else this.G==3&&(a?e_(this,a):this.i.length==0||Mg(this.h)||e_(this))};function e_(a,l){var d;l?d=l.l:d=a.U++;let p=Kt(a.I);we(p,"SID",a.K),we(p,"RID",d),we(p,"AID",a.T),ws(a,p),a.m&&a.o&&vl(p,a.m,a.o),d=new En(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),l&&(a.i=l.D.concat(a.i)),l=t_(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),_l(a.h,d),fl(d,p,l)}function ws(a,l){a.H&&oe(a.H,function(d,p){we(l,p,d)}),a.l&&Fg({},function(d,p){we(l,p,d)})}function t_(a,l,d){d=Math.min(a.i.length,d);var p=a.l?I(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let O=["count="+d];C==-1?0<d?(C=T[0].g,O.push("ofs="+C)):C=0:O.push("ofs="+C);let ge=!0;for(let qe=0;qe<d;qe++){let ae=T[qe].g,Ye=T[qe].map;if(ae-=C,0>ae)C=Math.max(0,T[qe].g-100),ge=!1;else try{AA(Ye,O,"req"+ae+"_")}catch{p&&p(Ye)}}if(ge){p=O.join("&");break e}}}return a=a.i.splice(0,d),l.D=a,p}function n_(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;rs||hg(),ss||(rs(),ss=!0),Xu.add(l,a),a.v=0}}function Il(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=hs(I(a.Fa,a),s_(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,i_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=hs(I(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),pa(this),i_(this))};function wl(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function i_(a){a.g=new En(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Kt(a.qa);we(l,"RID","rpc"),we(l,"SID",a.K),we(l,"AID",a.T),we(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&we(l,"TO",a.ja),we(l,"TYPE","xmlhttp"),ws(a,l),a.m&&a.o&&vl(l,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=ha(Kt(l)),d.m=null,d.P=!0,Pg(d,a)}n.Za=function(){this.C!=null&&(this.C=null,pa(this),Il(this),rt(19))};function ga(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function r_(a,l){var d=null;if(a.g==l){ga(a),wl(a),a.g=null;var p=2}else if(gl(a.h,l))d=l.D,Lg(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){d=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=sa(),it(p,new Sg(p,d)),ma(a)}else n_(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&DA(a,l)||p==2&&Il(a)))switch(d&&0<d.length&&(l=a.h,l.i=l.i.concat(d)),T){case 1:si(a,5);break;case 4:si(a,10);break;case 3:si(a,6);break;default:si(a,2)}}}function s_(a,l){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*l}function si(a,l){if(a.j.info("Error code "+l),l==2){var d=I(a.fb,a),p=a.Xa;let T=!p;p=new ri(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ua(p,"https"),ha(p),T?EA(p.toString(),d):bA(p.toString(),d)}else rt(2);a.G=0,a.l&&a.l.sa(l),o_(a),Zg(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function o_(a){if(a.G=0,a.ka=[],a.l){let l=Vg(a.h);(l.length!=0||a.i.length!=0)&&(P(a.ka,l),P(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function a_(a,l,d){var p=d instanceof ri?Kt(d):new ri(d);if(p.g!="")l&&(p.g=l+"."+p.g),la(p,p.s);else{var T=c.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var C=new ri(null);p&&ua(C,p),l&&(C.g=l),T&&la(C,T),d&&(C.l=d),p=C}return d=a.D,l=a.ya,d&&l&&we(p,d,l),we(p,"VER",a.la),ws(a,p),p}function c_(a,l,d){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new Ce(new _s({eb:d})):new Ce(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function u_(){}n=u_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _a(){}_a.prototype.g=function(a,l){return new ut(a,l)};function ut(a,l){Qe.call(this),this.g=new Xg(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!Q(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Q(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Bi(this)}D(ut,Qe),ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ut.prototype.close=function(){yl(this.g)},ut.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=al(a),a=d);l.i.push(new dA(l.Ya++,a)),l.G==3&&ma(l)},ut.prototype.N=function(){this.g.l=null,delete this.j,yl(this.g),delete this.g,ut.aa.N.call(this)};function l_(a){ul.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let d in l){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}D(l_,ul);function h_(){ll.call(this),this.status=1}D(h_,ll);function Bi(a){this.g=a}D(Bi,u_),Bi.prototype.ua=function(){it(this.g,"a")},Bi.prototype.ta=function(a){it(this.g,new l_(a))},Bi.prototype.sa=function(a){it(this.g,new h_)},Bi.prototype.ra=function(){it(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,ut.prototype.send=ut.prototype.o,ut.prototype.open=ut.prototype.m,ut.prototype.close=ut.prototype.close,Mf=mn.createWebChannelTransport=function(){return new _a},Of=mn.getStatEventTarget=function(){return sa()},Nf=mn.Event=ni,Hc=mn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,Ao=mn.ErrorCode=oa,Cg.COMPLETE="complete",kf=mn.EventType=Cg,Eg.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Sr=mn.WebChannel=Eg,GN=mn.FetchXmlHttpFactory=_s,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,Pf=mn.XhrIo=Ce}).apply(typeof Wc<"u"?Wc:typeof self<"u"?self:typeof window<"u"?window:{});var Uw="@firebase/firestore";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var Kr="10.14.0";var Ci=new Bn("@firebase/firestore");function So(){return Ci.logLevel}function V(n,...e){if(Ci.logLevel<=ne.DEBUG){let t=e.map(ym);Ci.debug(`Firestore (${Kr}): ${n}`,...t)}}function gn(n,...e){if(Ci.logLevel<=ne.ERROR){let t=e.map(ym);Ci.error(`Firestore (${Kr}): ${n}`,...t)}}function Or(n,...e){if(Ci.logLevel<=ne.WARN){let t=e.map(ym);Ci.warn(`Firestore (${Kr}): ${n}`,...t)}}function ym(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${Kr}) INTERNAL ASSERTION FAILED: `+n;throw gn(e),new Error(e)}function de(n,e){n||H()}function K(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Pt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Xc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ze.UNAUTHENTICATED))}shutdown(){}},jf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Bf=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){de(this.o===void 0);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),s=new Pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(de(typeof i.accessToken=="string"),new Xc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new ze(e)}},$f=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},zf=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new $f(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Gf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){de(this.o===void 0);let i=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(de(typeof t.token=="string"),this.R=t.token,new qf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function WN(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Zc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=WN(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function ce(n,e){return n<e?-1:n>e?1:0}function Mr(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var He=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new x(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new He(0,0))}static max(){return new n(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var eu=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&H(),i===void 0?i=e.length-t:i>e.length-t&&H(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Se=class n extends eu{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new x(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},HN=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_t=class n extends eu{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return HN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new x(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new x(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new x(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new x(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};var Wf=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};Wf.UNKNOWN_ID=-1;function KN(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=X.fromTimestamp(i===1e9?new He(t+1,0):new He(t,i));return new Ri(r,z.empty(),e)}function QN(n){return new Ri(n.readTime,n.key,-1)}var Ri=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(X.min(),z.empty(),-1)}static max(){return new n(X.max(),z.empty(),-1)}};function YN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}var JN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zo(n){return m(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==JN)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},u=>i(u))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let h=u;t(e[h]).next(f=>{o[h]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function XN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qo(n){return n.name==="IndexedDbTransactionError"}var yE=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Nu(n){return n==null}function No(n){return n===0&&1/n==-1/0}function ZN(n){return typeof n=="number"&&Number.isInteger(n)&&!No(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var eO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dj=[...eO,"documentOverlays"],tO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nO=tO,iO=[...nO,"indexConfiguration","indexState","indexEntries"];var fj=[...iO,"globals"];function jw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Re=class n{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pr(this.root,e,this.comparator,!0)}},Pr=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$t=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,i,r,s){return this}insert(e,t,i){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class n{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tu(this.data.getIterator())}getIteratorFrom(e){return new tu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},tu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Et=class n{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new n([])}unionWith(e){let t=new tt(_t.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mr(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var nu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nu("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var rO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _n(n){if(de(!!n),typeof n=="string"){let e=0,t=rO.exec(n);if(de(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Te(n.seconds),nanos:Te(n.nanos)}}function Te(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xn(n){return typeof n=="string"?nt.fromBase64String(n):nt.fromUint8Array(n)}function Im(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function wm(n){let e=n.mapValue.fields.__previous_value__;return Im(e)?wm(e):e}function Oo(n){let e=_n(n.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}var Kf=class{constructor(e,t,i,r,s,o,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}},iu=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Kc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Di(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Im(n)?4:EE(n)?9007199254740991:wE(n)?10:11:H()}function Gt(n,e){if(n===e)return!0;let t=Di(n);if(t!==Di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oo(n).isEqual(Oo(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=_n(r.timestampValue),c=_n(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Xn(r.bytesValue).isEqual(Xn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Te(r.geoPointValue.latitude)===Te(s.geoPointValue.latitude)&&Te(r.geoPointValue.longitude)===Te(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Te(r.integerValue)===Te(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Te(r.doubleValue),c=Te(s.doubleValue);return o===c?No(o)===No(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Mr(n.arrayValue.values||[],e.arrayValue.values||[],Gt);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(jw(o)!==jw(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Gt(o[u],c[u])))return!1;return!0}(n,e);default:return H()}}function Mo(n,e){return(n.values||[]).find(t=>Gt(t,e))!==void 0}function xr(n,e){if(n===e)return 0;let t=Di(n),i=Di(e);if(t!==i)return ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Te(s.integerValue||s.doubleValue),u=Te(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return Bw(n.timestampValue,e.timestampValue);case 4:return Bw(Oo(n),Oo(e));case 5:return ce(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Xn(s),u=Xn(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){let f=ce(c[h],u[h]);if(f!==0)return f}return ce(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ce(Te(s.latitude),Te(o.latitude));return c!==0?c:ce(Te(s.longitude),Te(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $w(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,h,f;let g=s.fields||{},I=o.fields||{},S=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=(u=I.value)===null||u===void 0?void 0:u.arrayValue,N=ce(((h=S?.values)===null||h===void 0?void 0:h.length)||0,((f=D?.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:$w(S,D)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Kc.mapValue&&o===Kc.mapValue)return 0;if(s===Kc.mapValue)return 1;if(o===Kc.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let I=ce(u[g],f[g]);if(I!==0)return I;let S=xr(c[u[g]],h[f[g]]);if(S!==0)return S}return ce(u.length,f.length)}(n.mapValue,e.mapValue);default:throw H()}}function Bw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);let t=_n(n),i=_n(e),r=ce(t.seconds,i.seconds);return r!==0?r:ce(t.nanos,i.nanos)}function $w(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=xr(t[r],i[r]);if(s)return s}return ce(t.length,i.length)}function Lr(n){return Qf(n)}function Qf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=_n(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Qf(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Qf(t.fields[o])}`;return r+"}"}(n.mapValue):H()}function zw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yf(n){return!!n&&"integerValue"in n}function Em(n){return!!n&&"arrayValue"in n}function qw(n){return!!n&&"nullValue"in n}function Gw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yc(n){return!!n&&"mapValue"in n}function wE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ro(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Mi(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ro(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ro(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var gt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Yc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ro(t)}setAll(e){let t=_t.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=Ro(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Yc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Mi(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Ro(this.value))}};function bE(n){let e=[];return Mi(n.fields,(t,i)=>{let r=new _t([t]);if(Yc(i)){let s=bE(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Et(e)}var kt=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),gt.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,X.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),gt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),gt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vr=class{constructor(e,t){this.position=e,this.inclusive=t}};function Ww(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=z.comparator(z.fromName(o.referenceValue),t.key):i=xr(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Hw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gt(n.position[t],e.position[t]))return!1;return!0}var Fr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ru=class{},Ve=class n extends ru{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Xf(e,t,i):t==="array-contains"?new tp(e,i):t==="in"?new np(e,i):t==="not-in"?new ip(e,i):t==="array-contains-any"?new rp(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Zf(e,i):new ep(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xr(t,this.value)):t!==null&&Di(this.value)===Di(t)&&this.matchesComparison(xr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Nt=class n extends ru{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return TE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function TE(n){return n.op==="and"}function AE(n){return oO(n)&&TE(n)}function oO(n){for(let e of n.filters)if(e instanceof Nt)return!1;return!0}function Jf(n){if(n instanceof Ve)return n.field.canonicalString()+n.op.toString()+Lr(n.value);if(AE(n))return n.filters.map(e=>Jf(e)).join(",");{let e=n.filters.map(t=>Jf(t)).join(",");return`${n.op}(${e})`}}function SE(n,e){return n instanceof Ve?function(i,r){return r instanceof Ve&&i.op===r.op&&i.field.isEqual(r.field)&&Gt(i.value,r.value)}(n,e):n instanceof Nt?function(i,r){return r instanceof Nt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&SE(o,r.filters[c]),!0):!1}(n,e):void H()}function CE(n){return n instanceof Ve?function(t){return`${t.field.canonicalString()} ${t.op} ${Lr(t.value)}`}(n):n instanceof Nt?function(t){return t.op.toString()+" {"+t.getFilters().map(CE).join(" ,")+"}"}(n):"Filter"}var Xf=class extends Ve{constructor(e,t,i){super(e,t,i),this.key=z.fromName(i.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},Zf=class extends Ve{constructor(e,t){super(e,"in",t),this.keys=RE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ep=class extends Ve{constructor(e,t){super(e,"not-in",t),this.keys=RE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function RE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>z.fromName(i.referenceValue))}var tp=class extends Ve{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Em(t)&&Mo(t.arrayValue,this.value)}},np=class extends Ve{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Mo(this.value.arrayValue,t)}},ip=class extends Ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Mo(this.value.arrayValue,t)}},rp=class extends Ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Em(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Mo(this.value.arrayValue,i))}};var sp=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Kw(n,e=null,t=[],i=[],r=null,s=null,o=null){return new sp(n,e,t,i,r,s,o)}function bm(n){let e=K(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Jf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Nu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Lr(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Lr(i)).join(",")),e.ue=t}return e.ue}function Tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!SE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hw(n.startAt,e.startAt)&&Hw(n.endAt,e.endAt)}function op(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Pi=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function aO(n,e,t,i,r,s,o,c){return new Pi(n,e,t,i,r,s,o,c)}function Am(n){return new Pi(n)}function Qw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DE(n){return n.collectionGroup!==null}function Do(n){let e=K(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(_t.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Fr(s,i))}),t.has(_t.keyField().canonicalString())||e.ce.push(new Fr(_t.keyField(),i))}return e.ce}function zt(n){let e=K(n);return e.le||(e.le=cO(e,Do(n))),e.le}function cO(n,e){if(n.limitType==="F")return Kw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Fr(r.field,s)});let t=n.endAt?new Vr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Vr(n.startAt.position,n.startAt.inclusive):null;return Kw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ap(n,e){let t=n.filters.concat([e]);return new Pi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cp(n,e,t){return new Pi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ou(n,e){return Tm(zt(n),zt(e))&&n.limitType===e.limitType}function PE(n){return`${bm(zt(n))}|lt:${n.limitType}`}function Cr(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>CE(r)).join(", ")}]`),Nu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Lr(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Lr(r)).join(",")),`Target(${i})`}(zt(n))}; limitType=${n.limitType})`}function Mu(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):z.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Do(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,u){let h=Ww(o,c,u);return o.inclusive?h<=0:h<0}(i.startAt,Do(i),r)||i.endAt&&!function(o,c,u){let h=Ww(o,c,u);return o.inclusive?h>=0:h>0}(i.endAt,Do(i),r))}(n,e)}function uO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kE(n){return(e,t)=>{let i=!1;for(let r of Do(n)){let s=lO(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function lO(n,e,t){let i=n.field.isKeyField()?z.comparator(e.key,t.key):function(s,o,c){let u=o.data.field(s),h=c.data.field(s);return u!==null&&h!==null?xr(u,h):H()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return H()}}var Zn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return IE(this.inner)}size(){return this.innerSize}};var hO=new Re(z.comparator);function vn(){return hO}var NE=new Re(z.comparator);function Co(...n){let e=NE;for(let t of n)e=e.insert(t.key,t);return e}function OE(n){let e=NE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ti(){return Po()}function ME(){return Po()}function Po(){return new Zn(n=>n.toString(),(n,e)=>n.isEqual(e))}var dO=new Re(z.comparator),fO=new tt(z.comparator);function ie(...n){let e=fO;for(let t of n)e=e.add(t);return e}var pO=new tt(ce);function mO(){return pO}function Sm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:No(e)?"-0":e}}function xE(n){return{integerValue:""+n}}function gO(n,e){return ZN(e)?xE(e):Sm(n,e)}var Ur=class{constructor(){this._=void 0}};function _O(n,e,t){return n instanceof jr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Im(s)&&(s=wm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ei?VE(n,e):n instanceof ki?FE(n,e):function(r,s){let o=LE(r,s),c=Yw(o)+Yw(r.Pe);return Yf(o)&&Yf(r.Pe)?xE(c):Sm(r.serializer,c)}(n,e)}function vO(n,e,t){return n instanceof ei?VE(n,e):n instanceof ki?FE(n,e):t}function LE(n,e){return n instanceof Br?function(i){return Yf(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var jr=class extends Ur{},ei=class extends Ur{constructor(e){super(),this.elements=e}};function VE(n,e){let t=UE(e);for(let i of n.elements)t.some(r=>Gt(r,i))||t.push(i);return{arrayValue:{values:t}}}var ki=class extends Ur{constructor(e){super(),this.elements=e}};function FE(n,e){let t=UE(e);for(let i of n.elements)t=t.filter(r=>!Gt(r,i));return{arrayValue:{values:t}}}var Br=class extends Ur{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Yw(n){return Te(n.integerValue||n.doubleValue)}function UE(n){return Em(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var up=class{constructor(e,t){this.field=e,this.transform=t}};function yO(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof ei&&r instanceof ei||i instanceof ki&&r instanceof ki?Mr(i.elements,r.elements,Gt):i instanceof Br&&r instanceof Br?Gt(i.Pe,r.Pe):i instanceof jr&&r instanceof jr}(n.transform,e.transform)}var lp=class{constructor(e,t){this.version=e,this.transformResults=t}},Yn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var $r=class{};function jE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new su(n.key,Yn.none()):new Ni(n.key,n.data,Yn.none());{let t=n.data,i=gt.empty(),r=new tt(_t.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Wt(n.key,i,new Et(r.toArray()),Yn.none())}}function IO(n,e,t){n instanceof Ni?function(r,s,o){let c=r.value.clone(),u=Xw(r.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Wt?function(r,s,o){if(!Jc(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Xw(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(BE(r)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ko(n,e,t,i){return n instanceof Ni?function(s,o,c,u){if(!Jc(s.precondition,o))return c;let h=s.value.clone(),f=Zw(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,i):n instanceof Wt?function(s,o,c,u){if(!Jc(s.precondition,o))return c;let h=Zw(s.fieldTransforms,u,o),f=o.data;return f.setAll(BE(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,i):function(s,o,c){return Jc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function wO(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=LE(i.transform,r||null);s!=null&&(t===null&&(t=gt.empty()),t.set(i.field,s))}return t||null}function Jw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Mr(i,r,(s,o)=>yO(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ni=class extends $r{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Wt=class extends $r{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function BE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Xw(n,e,t){let i=new Map;de(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,vO(o,c,t[r]))}return i}function Zw(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,_O(s,o,e))}return i}var su=class extends $r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hp=class extends $r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dp=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&IO(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=ko(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=ko(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=ME();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let u=jE(o,c);u!==null&&i.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&Mr(this.mutations,e.mutations,(t,i)=>Jw(t,i))&&Mr(this.baseMutations,e.baseMutations,(t,i)=>Jw(t,i))}},fp=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){de(e.mutations.length===i.length);let r=function(){return dO}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var pp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var xe,se;function EO(n){switch(n){default:return H();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function $E(n){if(n===void 0)return gn("GRPC error has no .code"),R.UNKNOWN;switch(n){case xe.OK:return R.OK;case xe.CANCELLED:return R.CANCELLED;case xe.UNKNOWN:return R.UNKNOWN;case xe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case xe.INTERNAL:return R.INTERNAL;case xe.UNAVAILABLE:return R.UNAVAILABLE;case xe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case xe.NOT_FOUND:return R.NOT_FOUND;case xe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case xe.ABORTED:return R.ABORTED;case xe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case xe.DATA_LOSS:return R.DATA_LOSS;default:return H()}}(se=xe||(xe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var eE=null;function bO(){return new TextEncoder}var TO=new Qn([4294967295,4294967295],0);function tE(n){let e=bO().encode(n),t=new Df;return t.update(e),new Uint8Array(t.digest())}function nE(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qn([t,i],0),new Qn([r,s],0)]}var gp=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ai(`Invalid padding: ${t}`);if(i<0)throw new Ai(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ai(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ai(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Qn.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Qn.fromNumber(i)));return r.compare(TO)===1&&(r=new Qn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=tE(e),[i,r]=nE(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=tE(e),[i,r]=nE(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Ai=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ou=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,xo.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(X.min(),r,new Re(ce),vn(),ie())}},xo=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,ie(),ie(),ie())}};var kr=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},au=class{constructor(e,t){this.targetId=e,this.me=t}},cu=class{constructor(e,t,i=nt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},uu=class{constructor(){this.fe=0,this.ge=rE(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),i=ie();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:H()}}),new xo(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=rE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},_p=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=vn(),this.qe=iE(),this.Qe=new Re(ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(op(s))if(i===0){let o=new z(s.path);this.Ue(t,o,kt.newNoDocument(o,X.min()))}else de(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(t);let h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}eE?.et(function(f,g,I,S,D){var N,P,W,Q,Y,fe;let je={localCacheCount:f,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},oe=g.unchangedNames;return oe&&(je.bloomFilter={applied:D===0,hashCount:(N=oe?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(Q=(W=(P=oe?.bits)===null||P===void 0?void 0:P.bitmap)===null||W===void 0?void 0:W.length)!==null&&Q!==void 0?Q:0,padding:(fe=(Y=oe?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&fe!==void 0?fe:0,mightContain:E=>{var _;return(_=S?.mightContain(E))!==null&&_!==void 0&&_}}),je}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=Xn(i).toUint8Array()}catch(u){if(u instanceof nu)return Or("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new gp(o,r,s)}catch(u){return Or(u instanceof Ai?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&op(c.target)){let u=new z(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,kt.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=ie();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new ou(e,t,this.Qe,this.ke,i);return this.ke=vn(),this.qe=iE(),this.Qe=new Re(ce),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new uu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tt(ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function iE(){return new Re(z.comparator)}function rE(){return new Re(z.comparator)}var AO={asc:"ASCENDING",desc:"DESCENDING"},SO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CO={and:"AND",or:"OR"},vp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function yp(n,e){return n.useProto3Json||Nu(e)?e:{value:e}}function lu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function RO(n,e){return lu(n,e.toTimestamp())}function qt(n){return de(!!n),X.fromTimestamp(function(t){let i=_n(t);return new He(i.seconds,i.nanos)}(n))}function Cm(n,e){return Ip(n,e).canonicalString()}function Ip(n,e){let t=function(r){return new Se(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qE(n){let e=Se.fromString(n);return de(QE(e)),e}function wp(n,e){return Cm(n.databaseId,e.path)}function xf(n,e){let t=qE(e);if(t.get(1)!==n.databaseId.projectId)throw new x(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(WE(t))}function GE(n,e){return Cm(n.databaseId,e)}function DO(n){let e=qE(n);return e.length===4?Se.emptyPath():WE(e)}function Ep(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WE(n){return de(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function sE(n,e,t){return{name:wp(n,e),fields:t.value.mapValue.fields}}function PO(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(de(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){let f=h.code===void 0?R.UNKNOWN:$E(h.code);return new x(f,h.message||"")}(o);t=new cu(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=xf(n,i.document.name),s=qt(i.document.updateTime),o=i.document.createTime?qt(i.document.createTime):X.min(),c=new gt({mapValue:{fields:i.document.fields}}),u=kt.newFoundDocument(r,s,o,c),h=i.targetIds||[],f=i.removedTargetIds||[];t=new kr(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=xf(n,i.document),s=i.readTime?qt(i.readTime):X.min(),o=kt.newNoDocument(r,s),c=i.removedTargetIds||[];t=new kr([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=xf(n,i.document),s=i.removedTargetIds||[];t=new kr([],s,r,null)}else{if(!("filter"in e))return H();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new mp(r,s),c=i.targetId;t=new au(c,o)}}return t}function kO(n,e){let t;if(e instanceof Ni)t={update:sE(n,e.key,e.value)};else if(e instanceof su)t={delete:wp(n,e.key)};else if(e instanceof Wt)t={update:sE(n,e.key,e.data),updateMask:jO(e.fieldMask)};else{if(!(e instanceof hp))return H();t={verify:wp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof jr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ei)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ki)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Br)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw H()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:RO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(n,e.precondition)),t}function NO(n,e){return n&&n.length>0?(de(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?qt(r.updateTime):qt(s);return o.isEqual(X.min())&&(o=qt(s)),new lp(o,r.transformResults||[])}(t,e))):[]}function OO(n,e){return{documents:[GE(n,e.path)]}}function MO(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=GE(n,r);let s=function(h){if(h.length!==0)return KE(Nt.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(h){if(h.length!==0)return h.map(f=>function(I){return{field:Rr(I.field),direction:VO(I.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=yp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:r}}function xO(n){let e=DO(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){de(i===1);let f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let I=HE(g);return I instanceof Nt&&AE(I)?I.getFilters():[I]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(I=>function(D){return new Fr(Dr(D.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(I))}(t.orderBy));let c=null;t.limit&&(c=function(g){let I;return I=typeof g=="object"?g.value:g,Nu(I)?null:I}(t.limit));let u=null;t.startAt&&(u=function(g){let I=!!g.before,S=g.values||[];return new Vr(S,I)}(t.startAt));let h=null;return t.endAt&&(h=function(g){let I=!g.before,S=g.values||[];return new Vr(S,I)}(t.endAt)),aO(e,r,o,s,c,"F",u,h)}function LO(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Dr(t.unaryFilter.field);return Ve.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Dr(t.unaryFilter.field);return Ve.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Dr(t.unaryFilter.field);return Ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Dr(t.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return Ve.create(Dr(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Nt.create(t.compositeFilter.filters.map(i=>HE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function VO(n){return AO[n]}function FO(n){return SO[n]}function UO(n){return CO[n]}function Rr(n){return{fieldPath:n.canonicalString()}}function Dr(n){return _t.fromServerFormat(n.fieldPath)}function KE(n){return n instanceof Ve?function(t){if(t.op==="=="){if(Gw(t.value))return{unaryFilter:{field:Rr(t.field),op:"IS_NAN"}};if(qw(t.value))return{unaryFilter:{field:Rr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gw(t.value))return{unaryFilter:{field:Rr(t.field),op:"IS_NOT_NAN"}};if(qw(t.value))return{unaryFilter:{field:Rr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(t.field),op:FO(t.op),value:t.value}}}(n):n instanceof Nt?function(t){let i=t.getFilters().map(r=>KE(r));return i.length===1?i[0]:{compositeFilter:{op:UO(t.op),filters:i}}}(n):H()}function jO(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Lo=class n{constructor(e,t,i,r,s=X.min(),o=X.min(),c=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var bp=class{constructor(e){this.ct=e}};function BO(n){let e=xO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cp(e,e.limit,"L"):e}var hu=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Te(e.integerValue));else if("doubleValue"in e){let i=Te(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),No(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=_n(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Xn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?EE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):wE(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):H()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Te(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};hu.vt=new hu;var Tp=class{constructor(){this.un=new Ap}addToCollectionParentIndex(e,t){return this.un.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Ri.min())}updateCollectionGroup(e,t,i){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},Ap=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new tt(Se.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tt(Se.comparator)).toArray()}};var mj=new Uint8Array(0);var Bt=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(41943040,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);var Vo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Sp=class{constructor(){this.changes=new Zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?k.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Cp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Rp=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&ko(i.mutation,r,Et.empty(),He.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ie()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ie()){let r=Ti();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Co();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=Ti();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ie()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=vn(),o=Po(),c=function(){return Po()}();return t.forEach((u,h)=>{let f=i.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof Wt)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),ko(f.mutation,h,f.mutation.getFieldMask(),He.now())):o.set(h.key,Et.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var g;return c.set(h,new Cp(f,(g=o.get(h))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let i=Po(),r=new Re((o,c)=>o-c),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let h=t.get(u);if(h===null)return;let f=i.get(u)||Et.empty();f=c.applyToLocalView(h,f),i.set(u,f);let g=(r.get(c.batchId)||ie()).add(u);r=r.insert(c.batchId,g)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),h=u.key,f=u.value,g=ME();f.forEach(I=>{if(!s.has(I)){let S=jE(t.get(I),i.get(I));S!==null&&g.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return k.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):k.resolve(Ti()),c=-1,u=s;return o.next(h=>k.forEach(h,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?k.resolve():this.remoteDocumentCache.getEntry(e,f).next(I=>{u=u.insert(f,I)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ie())).next(f=>({batchId:c,changes:OE(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(i=>{let r=Co();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Co();return this.indexManager.getCollectionParents(e,s).next(c=>k.forEach(c,u=>{let h=function(g,I){return new Pi(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(f=>{f.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((u,h)=>{let f=h.getKey();o.get(f)===null&&(o=o.insert(f,kt.newInvalidDocument(f)))});let c=Co();return o.forEach((u,h)=>{let f=s.get(u);f!==void 0&&ko(f.mutation,h,Et.empty(),He.now()),Mu(t,h)&&(c=c.insert(u,h))}),c})}};var Dp=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return k.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:qt(r.createTime)}}(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:BO(r.bundledQuery),readTime:qt(r.readTime)}}(t)),k.resolve()}};var Pp=class{constructor(){this.overlays=new Re(z.comparator),this.Ir=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Ti();return k.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),k.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),k.resolve()}getOverlaysForCollection(e,t,i){let r=Ti(),s=t.length+1,o=new z(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return k.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Re((h,f)=>h-f),o=this.overlays.getIterator();for(;o.hasNext();){let h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let f=s.get(h.largestBatchId);f===null&&(f=Ti(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let c=Ti(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=r)););return k.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new pp(t,i));let s=this.Ir.get(t);s===void 0&&(s=ie(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var kp=class{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var Fo=class{constructor(){this.Tr=new tt(Le.Er),this.dr=new tt(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new Le(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Le(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new z(new Se([])),i=new Le(t,e),r=new Le(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new z(new Se([])),i=new Le(t,e),r=new Le(t,e+1),s=ie();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Le(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Le=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return z.comparator(e.key,t.key)||ce(e.wr,t.wr)}static Ar(e,t){return ce(e.wr,t.wr)||z.comparator(e.key,t.key)}};var Np=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new tt(Le.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new dp(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new Le(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,t){return k.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Le(t,0),r=new Le(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let c=this.Dr(o.wr);s.push(c)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(ce);return t.forEach(r=>{let s=new Le(r,0),o=new Le(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{i=i.add(c.wr)})}),k.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;z.isDocumentKey(s)||(s=s.child(""));let o=new Le(new z(s),0),c=new tt(ce);return this.br.forEachWhile(u=>{let h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(c=c.add(u.wr)),!0)},o),k.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){de(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return k.forEach(t.mutations,r=>{let s=new Le(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new Le(t,0),r=this.br.firstAfterOrEqual(i);return k.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Op=class{constructor(e){this.Mr=e,this.docs=function(){return new Re(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return k.resolve(i?i.document.mutableCopy():kt.newInvalidDocument(t))}getEntries(e,t){let i=vn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():kt.newInvalidDocument(r))}),k.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=vn(),o=t.path,c=new z(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||YN(QN(f),i)<=0||(r.has(f.key)||Mu(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,i,r){H()}Or(e,t){return k.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Mp(this)}getSize(e){return k.resolve(this.size)}},Mp=class extends Sp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),k.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var xp=class{constructor(e){this.persistence=e,this.Nr=new Zn(t=>bm(t),Tm),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Fo,this.targetCount=0,this.kr=Vo.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),k.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Kn(t),k.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),k.waitFor(s).next(()=>r)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return k.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),k.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return k.resolve(i)}containsKey(e,t){return k.resolve(this.Br.containsKey(t))}};var Lp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new yE(0),this.Kr=!1,this.Kr=!0,this.$r=new kp,this.referenceDelegate=e(this),this.Ur=new xp(this),this.indexManager=new Tp,this.remoteDocumentCache=function(r){return new Op(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new bp(t),this.Gr=new Dp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Np(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){V("MemoryPersistence","Starting transaction:",e);let r=new Vp(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return k.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},Vp=class extends Hf{constructor(e){super(),this.currentSequenceNumber=e}},Fp=class n{constructor(e){this.persistence=e,this.Jr=new Fo,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),k.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),k.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,i=>{let r=z.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return k.or([()=>k.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Up=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=ie(),r=ie();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var jp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ey()?8:XN($e())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new jp;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(So()<=ne.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Cr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(So()<=ne.DEBUG&&V("QueryEngine","Query:",Cr(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(So()<=ne.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Cr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zt(t))):k.resolve())}Yi(e,t){if(Qw(t))return k.resolve(null);let i=zt(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=cp(t,null,"F"),i=zt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=ie(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(u=>{let h=this.ts(t,c);return this.ns(t,h,o,u.readTime)?this.Yi(e,cp(t,null,"F")):this.rs(e,h,t,u)}))})))}Zi(e,t,i,r){return Qw(t)||r.isEqual(X.min())?k.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?k.resolve(null):(So()<=ne.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cr(t)),this.rs(e,o,t,KN(r,-1)).next(c=>c))})}ts(e,t){let i=new tt(kE(e));return t.forEach((r,s)=>{Mu(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return So()<=ne.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Cr(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ri.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var $p=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Re(ce),this._s=new Zn(s=>bm(s),Tm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function $O(n,e,t,i){return new $p(n,e,t,i)}function YE(n,e){return m(this,null,function*(){let t=K(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],u=ie();for(let h of r){o.push(h.batchId);for(let f of h.mutations)u=u.add(f.key)}for(let h of s){c.push(h.batchId);for(let f of h.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(i,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})})}function zO(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){let g=h.batch,I=g.keys(),S=k.resolve();return I.forEach(D=>{S=S.next(()=>f.getEntry(u,D)).next(N=>{let P=h.docVersions.get(D);de(P!==null),N.version.compareTo(P)<0&&(g.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=ie();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function JE(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function qO(n,e){let t=K(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((f,g)=>{let I=r.get(g);if(!I)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,g)));let S=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(nt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,i)),r=r.insert(g,S),function(N,P,W){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(I,S,f)&&c.push(t.Ur.updateTargetData(s,S))});let u=vn(),h=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(GO(s,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!i.isEqual(X.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return k.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(t.os=r,s))}function GO(n,e,t){let i=ie(),r=ie();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=vn();return t.forEach((c,u)=>{let h=s.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):V("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:r}})}function WO(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function HO(n,e){let t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,k.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new Lo(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function zp(n,e,t){return m(this,null,function*(){let i=K(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!qo(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function oE(n,e,t){let i=K(n),r=X.min(),s=ie();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){let g=K(u),I=g._s.get(f);return I!==void 0?k.resolve(g.os.get(I)):g.Ur.getTargetData(h,f)}(i,o,zt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:X.min(),t?s:ie())).next(c=>(KO(i,uO(e),c),{documents:c,Ts:s})))}function KO(n,e,t){let i=n.us.get(e)||X.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}var du=class{constructor(){this.activeTargetIds=mO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qp=class{constructor(){this.so=new du,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new du,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Gp=class{_o(e){}shutdown(){}};var fu=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Qc=null;function Lf(){return Qc===null?Qc=function(){return 268435456+Math.round(2147483648*Math.random())}():Qc++,"0x"+Qc.toString(16)}var QO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Wp=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var et="WebChannelConnection",Hp=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let c=Lf(),u=this.xo(t,i.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${c}:`,u,r);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(t,u,h,r).then(f=>(V("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Or("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",r),f})}Lo(t,i,r,s,o,c){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=QO[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=Lf();return new Promise((o,c)=>{let u=new Pf;u.setWithCredentials(!0),u.listenOnce(kf.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ao.NO_ERROR:let f=u.getResponseJson();V(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ao.TIMEOUT:V(et,`RPC '${e}' ${s} timed out`),c(new x(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ao.HTTP_ERROR:let g=u.getStatus();if(V(et,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let I=u.getResponseJson();Array.isArray(I)&&(I=I[0]);let S=I?.error;if(S&&S.status&&S.message){let D=function(P){let W=P.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(W)>=0?W:R.UNKNOWN}(S.status);c(new x(D,S.message))}else c(new x(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new x(R.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{V(et,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(r);V(et,`RPC '${e}' ${s} sending request:`,r),u.send(t,"POST",h,i,15)})}Bo(e,t,i){let r=Lf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mf(),c=Of(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let f=s.join("");V(et,`Creating RPC '${e}' stream ${r}: ${f}`,u);let g=o.createWebChannel(f,u),I=!1,S=!1,D=new Wp({Io:P=>{S?V(et,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(I||(V(et,`Opening RPC '${e}' stream ${r} transport.`),g.open(),I=!0),V(et,`RPC '${e}' stream ${r} sending:`,P),g.send(P))},To:()=>g.close()}),N=(P,W,Q)=>{P.listen(W,Y=>{try{Q(Y)}catch(fe){setTimeout(()=>{throw fe},0)}})};return N(g,Sr.EventType.OPEN,()=>{S||(V(et,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),N(g,Sr.EventType.CLOSE,()=>{S||(S=!0,V(et,`RPC '${e}' stream ${r} transport closed`),D.So())}),N(g,Sr.EventType.ERROR,P=>{S||(S=!0,Or(et,`RPC '${e}' stream ${r} transport errored:`,P),D.So(new x(R.UNAVAILABLE,"The operation could not be completed")))}),N(g,Sr.EventType.MESSAGE,P=>{var W;if(!S){let Q=P.data[0];de(!!Q);let Y=Q,fe=Y.error||((W=Y[0])===null||W===void 0?void 0:W.error);if(fe){V(et,`RPC '${e}' stream ${r} received error:`,fe);let je=fe.status,oe=function(v){let w=xe[v];if(w!==void 0)return $E(w)}(je),E=fe.message;oe===void 0&&(oe=R.INTERNAL,E="Unknown error status: "+je+" with message "+fe.message),S=!0,D.So(new x(oe,E)),g.close()}else V(et,`RPC '${e}' stream ${r} received:`,Q),D.bo(Q)}}),N(c,Nf.STAT_EVENT,P=>{P.stat===Hc.PROXY?V(et,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===Hc.NOPROXY&&V(et,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function Vf(){return typeof document<"u"?document:null}function xu(n){return new vp(n,!0)}var pu=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&V("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var mu=class{constructor(e,t,i,r,s,o,c,u){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return m(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return m(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return m(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(gn(t.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new x(R.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>m(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kp=class extends mu{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=PO(this.serializer,e),i=function(s){if(!("targetChange"in s))return X.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?qt(o.readTime):X.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=Ep(this.serializer),t.addTarget=function(s,o){let c,u=o.target;if(c=op(u)?{documents:OO(s,u)}:{query:MO(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=zE(s,o.resumeToken);let h=yp(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(X.min())>0){c.readTime=lu(s,o.snapshotVersion.toTimestamp());let h=yp(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);let i=LO(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=Ep(this.serializer),t.removeTarget=e,this.a_(t)}},Qp=class extends mu{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=NO(e.writeResults,e.commitTime),i=qt(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=Ep(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>kO(this.serializer,i))};this.a_(t)}};var Yp=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new x(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ip(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(R.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Ip(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(R.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Jp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gn(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Xp=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>m(this,null,function*(){xi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let h=K(u);h.L_.add(4),yield Go(h),h.q_.set("Unknown"),h.L_.delete(4),yield Lu(h)})}(this))}))}),this.q_=new Jp(i,r)}};function Lu(n){return m(this,null,function*(){if(xi(n))for(let e of n.B_)yield e(!0)})}function Go(n){return m(this,null,function*(){for(let e of n.B_)yield e(!1)})}function XE(n,e){let t=K(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),km(t)?Pm(t):Qr(t).r_()&&Dm(t,e))}function Rm(n,e){let t=K(n),i=Qr(t);t.N_.delete(e),i.r_()&&ZE(t,e),t.N_.size===0&&(i.r_()?i.o_():xi(t)&&t.q_.set("Unknown"))}function Dm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qr(n).A_(e)}function ZE(n,e){n.Q_.xe(e),Qr(n).R_(e)}function Pm(n){n.Q_=new _p({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Qr(n).start(),n.q_.v_()}function km(n){return xi(n)&&!Qr(n).n_()&&n.N_.size>0}function xi(n){return K(n).L_.size===0}function eb(n){n.Q_=void 0}function YO(n){return m(this,null,function*(){n.q_.set("Online")})}function JO(n){return m(this,null,function*(){n.N_.forEach((e,t)=>{Dm(n,e)})})}function XO(n,e){return m(this,null,function*(){eb(n),km(n)?(n.q_.M_(e),Pm(n)):n.q_.set("Unknown")})}function ZO(n,e,t){return m(this,null,function*(){if(n.q_.set("Online"),e instanceof cu&&e.state===2&&e.cause)try{yield function(r,s){return m(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield gu(n,i)}else if(e instanceof kr?n.Q_.Ke(e):e instanceof au?n.Q_.He(e):n.Q_.We(e),!t.isEqual(X.min()))try{let i=yield JE(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),ZE(s,u);let g=new Lo(f.target,u,h,f.sequenceNumber);Dm(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){V("RemoteStore","Failed to raise snapshot:",i),yield gu(n,i)}})}function gu(n,e,t){return m(this,null,function*(){if(!qo(e))throw e;n.L_.add(1),yield Go(n),n.q_.set("Offline"),t||(t=()=>JE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Lu(n)}))})}function tb(n,e){return e().catch(t=>gu(n,t,e))}function Vu(n){return m(this,null,function*(){let e=K(n),t=ti(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;eM(e);)try{let r=yield WO(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,tM(e,r)}catch(r){yield gu(e,r)}nb(e)&&ib(e)})}function eM(n){return xi(n)&&n.O_.length<10}function tM(n,e){n.O_.push(e);let t=ti(n);t.r_()&&t.V_&&t.m_(e.mutations)}function nb(n){return xi(n)&&!ti(n).n_()&&n.O_.length>0}function ib(n){ti(n).start()}function nM(n){return m(this,null,function*(){ti(n).p_()})}function iM(n){return m(this,null,function*(){let e=ti(n);for(let t of n.O_)e.m_(t.mutations)})}function rM(n,e,t){return m(this,null,function*(){let i=n.O_.shift(),r=fp.from(i,e,t);yield tb(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Vu(n)})}function sM(n,e){return m(this,null,function*(){e&&ti(n).V_&&(yield function(i,r){return m(this,null,function*(){if(function(o){return EO(o)&&o!==R.ABORTED}(r.code)){let s=i.O_.shift();ti(i).s_(),yield tb(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Vu(i)}})}(n,e)),nb(n)&&ib(n)})}function aE(n,e){return m(this,null,function*(){let t=K(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let i=xi(t);t.L_.add(3),yield Go(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Lu(t)})}function oM(n,e){return m(this,null,function*(){let t=K(n);e?(t.L_.delete(2),yield Lu(t)):e||(t.L_.add(2),yield Go(t),t.q_.set("Unknown"))})}function Qr(n){return n.K_||(n.K_=function(t,i,r){let s=K(t);return s.w_(),new Kp(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:YO.bind(null,n),Ro:JO.bind(null,n),mo:XO.bind(null,n),d_:ZO.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.K_.s_(),km(n)?Pm(n):n.q_.set("Unknown")):(yield n.K_.stop(),eb(n))}))),n.K_}function ti(n){return n.U_||(n.U_=function(t,i,r){let s=K(t);return s.w_(),new Qp(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nM.bind(null,n),mo:sM.bind(null,n),f_:iM.bind(null,n),g_:rM.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.U_.s_(),yield Vu(n)):(yield n.U_.stop(),n.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Zp=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Nm(n,e){if(gn("AsyncQueue",`${e}: ${n}`),qo(n))return new x(R.UNAVAILABLE,`${e}: ${n}`);throw n}var _u=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||z.comparator(t.key,i.key):(t,i)=>z.comparator(t.key,i.key),this.keyedMap=Co(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var vu=class{constructor(){this.W_=new Re(z.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},zr=class n{constructor(e,t,i,r,s,o,c,u,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,_u.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var em=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},tm=class{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=K(t),s=r.queries;r.queries=cE(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(i)})})(this,new x(R.ABORTED,"Firestore shutting down"))}};function cE(){return new Zn(n=>PE(n),Ou)}function rb(n,e){return m(this,null,function*(){let t=K(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new em,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=Nm(o,`Initialization of query '${Cr(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Om(t)})}function sb(n,e){return m(this,null,function*(){let t=K(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function aM(n,e){let t=K(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(i=!0);o.z_=r}}i&&Om(t)}function cM(n,e,t){let i=K(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function Om(n){n.Y_.forEach(e=>{e.next()})}var nm,uE;(uE=nm||(nm={})).ea="default",uE.Cache="cache";var yu=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new zr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nm.Cache}};var Iu=class{constructor(e){this.key=e}},wu=class{constructor(e){this.key=e}},im=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=kE(e),this.Ra=new _u(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new vu,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,g)=>{let I=r.get(f),S=Mu(this.query,g)?g:null,D=!!I&&this.mutatedKeys.has(I.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),P=!1;I&&S?I.data.isEqual(S.data)?D!==N&&(i.track({type:3,doc:S}),P=!0):this.ga(I,S)||(i.track({type:2,doc:S}),P=!0,(u&&this.Aa(S,u)>0||h&&this.Aa(S,h)<0)&&(c=!0)):!I&&S?(i.track({type:0,doc:S}),P=!0):I&&!S&&(i.track({type:1,doc:I}),P=!0,(u||h)&&(c=!0)),P&&(S?(o=o.add(S),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ra:o,fa:i,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(S,D){let N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return N(S)-N(D)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new zr(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new wu(i))}),this.da.forEach(i=>{e.has(i)||t.push(new Iu(i))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return zr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},rm=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},sm=class{constructor(e){this.key=e,this.va=!1}},om=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zn(c=>PE(c),Ou),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(z.comparator),this.Na=new Map,this.La=new Fo,this.Ba={},this.ka=new Map,this.qa=Vo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function uM(n,e,t=!0){return m(this,null,function*(){let i=hb(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield ob(i,e,t,!0),r})}function lM(n,e){return m(this,null,function*(){let t=hb(n);yield ob(t,e,!0,!1)})}function ob(n,e,t,i){return m(this,null,function*(){let r=yield HO(n.localStore,zt(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return i&&(c=yield hM(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&XE(n.remoteStore,r),c})}function hM(n,e,t,i,r){return m(this,null,function*(){n.Ka=(g,I,S)=>function(N,P,W,Q){return m(this,null,function*(){let Y=P.view.ma(W);Y.ns&&(Y=yield oE(N.localStore,P.query,!1).then(({documents:E})=>P.view.ma(E,Y)));let fe=Q&&Q.targetChanges.get(P.targetId),je=Q&&Q.targetMismatches.get(P.targetId)!=null,oe=P.view.applyChanges(Y,N.isPrimaryClient,fe,je);return hE(N,P.targetId,oe.wa),oe.snapshot})}(n,g,I,S);let s=yield oE(n.localStore,e,!0),o=new im(e,s.Ts),c=o.ma(s.documents),u=xo.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=o.applyChanges(c,n.isPrimaryClient,u);hE(n,t,h.wa);let f=new rm(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot})}function dM(n,e,t){return m(this,null,function*(){let i=K(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Ou(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Rm(i.remoteStore,r.targetId),am(i,r.targetId)}).catch(zo))):(am(i,r.targetId),yield zp(i.localStore,r.targetId,!0))})}function fM(n,e){return m(this,null,function*(){let t=K(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Rm(t.remoteStore,i.targetId))})}function pM(n,e,t){return m(this,null,function*(){let i=wM(n);try{let r=yield function(o,c){let u=K(o),h=He.now(),f=c.reduce((S,D)=>S.add(D.key),ie()),g,I;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=vn(),N=ie();return u.cs.getEntries(S,f).next(P=>{D=P,D.forEach((W,Q)=>{Q.isValidDocument()||(N=N.add(W))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,D)).next(P=>{g=P;let W=[];for(let Q of c){let Y=wO(Q,g.get(Q.key).overlayedDocument);Y!=null&&W.push(new Wt(Q.key,Y,bE(Y.value.mapValue),Yn.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,W,c)}).next(P=>{I=P;let W=P.applyToLocalDocumentSet(g,N);return u.documentOverlayCache.saveOverlays(S,P.batchId,W)})}).then(()=>({batchId:I.batchId,changes:OE(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Re(ce)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(i,r.batchId,t),yield Wo(i,r.changes),yield Vu(i.remoteStore)}catch(r){let s=Nm(r,"Failed to persist write");t.reject(s)}})}function ab(n,e){return m(this,null,function*(){let t=K(n);try{let i=yield qO(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(de(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?de(o.va):r.removedDocuments.size>0&&(de(o.va),o.va=!1))}),yield Wo(t,i,e)}catch(i){yield zo(i)}})}function lE(n,e,t){let i=K(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let u=K(o);u.onlineState=c;let h=!1;u.queries.forEach((f,g)=>{for(let I of g.j_)I.Z_(c)&&(h=!0)}),h&&Om(u)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function mM(n,e,t){return m(this,null,function*(){let i=K(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new Re(z.comparator);o=o.insert(s,kt.newNoDocument(s,X.min()));let c=ie().add(s),u=new ou(X.min(),new Map,new Re(ce),o,c);yield ab(i,u),i.Oa=i.Oa.remove(s),i.Na.delete(e),Mm(i)}else yield zp(i.localStore,e,!1).then(()=>am(i,e,t)).catch(zo)})}function gM(n,e){return m(this,null,function*(){let t=K(n),i=e.batch.batchId;try{let r=yield zO(t.localStore,e);ub(t,i,null),cb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Wo(t,r)}catch(r){yield zo(r)}})}function _M(n,e,t){return m(this,null,function*(){let i=K(n);try{let r=yield function(o,c){let u=K(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(g=>(de(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(i.localStore,e);ub(i,e,t),cb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Wo(i,r)}catch(r){yield zo(r)}})}function cb(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ub(n,e,t){let i=K(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||lb(n,i)})}function lb(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Rm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Mm(n))}function hE(n,e,t){for(let i of t)i instanceof Iu?(n.La.addReference(i.key,e),vM(n,i)):i instanceof wu?(V("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||lb(n,i.key)):H()}function vM(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(i),Mm(n))}function Mm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new z(Se.fromString(e)),i=n.qa.next();n.Na.set(i,new sm(t)),n.Oa=n.Oa.insert(t,i),XE(n.remoteStore,new Lo(zt(Am(t.path)),i,"TargetPurposeLimboResolution",yE.oe))}}function Wo(n,e,t){return m(this,null,function*(){let i=K(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,u)=>{o.push(i.Ka(u,e,t).then(h=>{var f;if((h||t)&&i.isPrimaryClient){let g=h?!h.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);let g=Up.Wi(u.targetId,h);s.push(g)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(u,h){return m(this,null,function*(){let f=K(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>k.forEach(h,I=>k.forEach(I.$i,S=>f.persistence.referenceDelegate.addReference(g,I.targetId,S)).next(()=>k.forEach(I.Ui,S=>f.persistence.referenceDelegate.removeReference(g,I.targetId,S)))))}catch(g){if(!qo(g))throw g;V("LocalStore","Failed to update sequence numbers: "+g)}for(let g of h){let I=g.targetId;if(!g.fromCache){let S=f.os.get(I),D=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(D);f.os=f.os.insert(I,N)}}})}(i.localStore,s))})}function yM(n,e){return m(this,null,function*(){let t=K(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let i=yield YE(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new x(R.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Wo(t,i.hs)}})}function IM(n,e){let t=K(n),i=t.Na.get(e);if(i&&i.va)return ie().add(i.key);{let r=ie(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function hb(n){let e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ab.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mM.bind(null,e),e.Ca.d_=aM.bind(null,e.eventManager),e.Ca.$a=cM.bind(null,e.eventManager),e}function wM(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_M.bind(null,e),e}var dE=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return m(this,null,function*(){this.serializer=xu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return $O(this.persistence,new Bp,t.initialUser,this.serializer)}Ga(t){return new Lp(Fp.Zr,this.serializer)}Wa(t){return new qp}terminate(){return m(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var EM=(()=>{class n{initialize(t,i){return m(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yM.bind(null,this.syncEngine),yield oM(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new tm}()}createDatastore(t){let i=xu(t.databaseInfo.databaseId),r=function(o){return new Hp(o)}(t.databaseInfo);return function(o,c,u,h){return new Yp(o,c,u,h)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,c,u){return new Xp(r,s,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,i=>lE(this.syncEngine,i,0),function(){return fu.D()?new fu:new Gp}())}createSyncEngine(t,i){return function(s,o,c,u,h,f,g){let I=new om(s,o,c,u,h,f);return g&&(I.Qa=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return m(this,null,function*(){var t,i;yield function(s){return m(this,null,function*(){let o=K(s);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Go(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var Eu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var cm=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ze.UNAUTHENTICATED,this.clientId=Zc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,o=>m(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=Nm(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Ff(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>m(this,null,function*(){i.isEqual(r)||(yield YE(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function fE(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield bM(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>aE(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>aE(e.remoteStore,r)),n._onlineComponents=e})}function bM(n){return m(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ff(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===R.FAILED_PRECONDITION||r.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Or("Error using user provided cache. Falling back to memory cache: "+t),yield Ff(n,new dE)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Ff(n,new dE);return n._offlineComponents})}function db(n){return m(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield fE(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield fE(n,new EM))),n._onlineComponents})}function TM(n){return db(n).then(e=>e.syncEngine)}function fb(n){return m(this,null,function*(){let e=yield db(n),t=e.eventManager;return t.onListen=uM.bind(null,e.syncEngine),t.onUnlisten=dM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fM.bind(null,e.syncEngine),t})}function AM(n,e,t={}){let i=new Pt;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,c,u,h){let f=new Eu({next:I=>{f.Za(),o.enqueueAndForget(()=>sb(s,g));let S=I.docs.has(c);!S&&I.fromCache?h.reject(new x(R.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&I.fromCache&&u&&u.source==="server"?h.reject(new x(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(I)},error:I=>h.reject(I)}),g=new yu(Am(c.path),f,{includeMetadataChanges:!0,_a:!0});return rb(s,g)}(yield fb(n),n.asyncQueue,e,t,i)})),i.promise}function SM(n,e,t={}){let i=new Pt;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,c,u,h){let f=new Eu({next:I=>{f.Za(),o.enqueueAndForget(()=>sb(s,g)),I.fromCache&&u.source==="server"?h.reject(new x(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(I)},error:I=>h.reject(I)}),g=new yu(c,f,{includeMetadataChanges:!0,_a:!0});return rb(s,g)}(yield fb(n),n.asyncQueue,e,t,i)})),i.promise}function pb(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var pE=new Map;function mb(n,e,t){if(!t)throw new x(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CM(n,e,t,i){if(e===!0&&i===!0)throw new x(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mE(n){if(!z.isDocumentKey(n))throw new x(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gE(n){if(z.isDocumentKey(n))throw new x(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Fu(n);throw new x(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var bu=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new x(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qr=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bu(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Uf;switch(i.type){case"firstParty":return new zf(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new x(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=pE.get(t);i&&(V("ComponentProvider","Removing Datastore"),pE.delete(t),i.terminate())}(this),Promise.resolve()}};function gb(n,e,t,i={}){var r;let s=(n=yn(n,qr))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=ze.MOCK_USER;else{c=gy(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new x(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ze(h)}n._authCredentials=new jf(new Xc(c,u))}}var Gr=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ot=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Jn=class n extends Gr{constructor(e,t,i){super(e,t,Am(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function _b(n,e,...t){if(n=Ue(n),mb("collection","path",e),n instanceof qr){let i=Se.fromString(e,...t);return gE(i),new Jn(n,null,i)}{if(!(n instanceof ot||n instanceof Jn))throw new x(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Se.fromString(e,...t));return gE(i),new Jn(n.firestore,null,i)}}function vb(n,e,...t){if(n=Ue(n),arguments.length===1&&(e=Zc.newId()),mb("doc","path",e),n instanceof qr){let i=Se.fromString(e,...t);return mE(i),new ot(n,null,new z(i))}{if(!(n instanceof ot||n instanceof Jn))throw new x(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Se.fromString(e,...t));return mE(i),new ot(n.firestore,n instanceof Jn?n.converter:null,new z(i))}}var Tu=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pu(this,"async_queue_retry"),this.Vu=()=>{let i=Vf();i&&V("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=Vf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Vf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Pt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return m(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!qo(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw gn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=Zp.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&H()}verifyOperationInProgress(){}wu(){return m(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Oi=class extends qr{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Tu,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Tu(e),this._firestoreClient=void 0,yield e}})}};function yb(n,e){let t=typeof n=="object"?n:gr(),i=typeof n=="string"?n:e||"(default)",r=ao(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=my("firestore");s&&gb(r,...s)}return r}function xm(n){if(n._terminated)throw new x(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||RM(n),n._firestoreClient}function RM(n){var e,t,i;let r=n._freezeSettings(),s=function(c,u,h,f){return new Kf(c,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,pb(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new cm(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var Uo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nt.fromBase64String(e))}catch(t){throw new x(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Wr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hr=class{constructor(e){this._methodName=e}};var jo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var Bo=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var DM=/^__.*__$/,um=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Wt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ni(e,this.data,t,this.fieldTransforms)}},Au=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Wt(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Ib(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var Su=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ru(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ib(this.Cu)&&DM.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},lm=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||xu(e)}Qu(e,t,i,r=!1){return new Su({Cu:e,methodName:t,qu:i,path:_t.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Lm(n){let e=n._freezeSettings(),t=xu(n._databaseId);return new lm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PM(n,e,t,i,r,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,r);Vm("Data must be an object, but it was:",o,i);let c=wb(i,o),u,h;if(s.merge)u=new Et(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let g of s.mergeFields){let I=dm(e,g,t);if(!o.contains(I))throw new x(R.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);bb(f,I)||f.push(I)}u=new Et(f),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new um(new gt(c),u,h)}var Cu=class n extends Hr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function kM(n,e,t){return new Su({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var hm=class n extends Hr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=kM(this,e,!0),i=this.Ku.map(s=>Yr(s,t)),r=new ei(i);return new up(e.path,r)}isEqual(e){return e instanceof n&&jn(this.Ku,e.Ku)}};function NM(n,e,t,i){let r=n.Qu(1,e,t);Vm("Data must be an object, but it was:",r,i);let s=[],o=gt.empty();Mi(i,(u,h)=>{let f=Fm(e,u,t);h=Ue(h);let g=r.Nu(f);if(h instanceof Cu)s.push(f);else{let I=Yr(h,g);I!=null&&(s.push(f),o.set(f,I))}});let c=new Et(s);return new Au(o,c,r.fieldTransforms)}function OM(n,e,t,i,r,s){let o=n.Qu(1,e,t),c=[dm(e,i,t)],u=[r];if(s.length%2!=0)throw new x(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)c.push(dm(e,s[I])),u.push(s[I+1]);let h=[],f=gt.empty();for(let I=c.length-1;I>=0;--I)if(!bb(h,c[I])){let S=c[I],D=u[I];D=Ue(D);let N=o.Nu(S);if(D instanceof Cu)h.push(S);else{let P=Yr(D,N);P!=null&&(h.push(S),f.set(S,P))}}let g=new Et(h);return new Au(f,g,o.fieldTransforms)}function MM(n,e,t,i=!1){return Yr(t,n.Qu(i?4:3,e))}function Yr(n,e){if(Eb(n=Ue(n)))return Vm("Unsupported field value:",e,n),wb(n,e);if(n instanceof Hr)return function(i,r){if(!Ib(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let u=Yr(c,r.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Ue(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=He.fromDate(i);return{timestampValue:lu(r.serializer,s)}}if(i instanceof He){let s=new He(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lu(r.serializer,s)}}if(i instanceof jo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Uo)return{bytesValue:zE(r.serializer,i._byteString)};if(i instanceof ot){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Cm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Bo)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Sm(c.serializer,u)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Fu(i)}`)}(n,e)}function wb(n,e){let t={};return IE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(n,(i,r)=>{let s=Yr(r,e.Mu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function Eb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof jo||n instanceof Uo||n instanceof ot||n instanceof Hr||n instanceof Bo)}function Vm(n,e,t){if(!Eb(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Fu(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function dm(n,e,t){if((e=Ue(e))instanceof Wr)return e._internalPath;if(typeof e=="string")return Fm(n,e);throw Ru("Field path arguments must be of type string or ",n,!1,void 0,t)}var xM=new RegExp("[~\\*/\\[\\]]");function Fm(n,e,t){if(e.search(xM)>=0)throw Ru(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wr(...e.split("."))._internalPath}catch{throw Ru(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ru(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${i}`),o&&(u+=` in document ${r}`),u+=")"),new x(R.INVALID_ARGUMENT,c+n+u)}function bb(n,e){return n.some(t=>t.isEqual(e))}var Du=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Tb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},fm=class extends Du{data(){return super.data()}};function Tb(n,e){return typeof e=="string"?Fm(n,e):e instanceof Wr?e._internalPath:e._delegate._internalPath}function LM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $o=class{},pm=class extends $o{};function Ab(n,e,...t){let i=[];e instanceof $o&&i.push(e),i=i.concat(t),function(s){let o=s.filter(u=>u instanceof gm).length,c=s.filter(u=>u instanceof mm).length;if(o>1||o>0&&c>0)throw new x(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var mm=class n extends pm{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return Sb(e._query,t),new Gr(e.firestore,e.converter,ap(e._query,t))}_parse(e){let t=Lm(e.firestore);return function(s,o,c,u,h,f,g){let I;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new x(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){vE(g,f);let S=[];for(let D of g)S.push(_E(u,s,D));I={arrayValue:{values:S}}}else I=_E(u,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||vE(g,f),I=MM(c,o,g,f==="in"||f==="not-in");return Ve.create(h,f,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var gm=class n extends $o{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Nt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let u of c)Sb(o,u),o=ap(o,u)}(e._query,t),new Gr(e.firestore,e.converter,ap(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function _E(n,e,t){if(typeof(t=Ue(t))=="string"){if(t==="")throw new x(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DE(e)&&t.indexOf("/")!==-1)throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Se.fromString(t));if(!z.isDocumentKey(i))throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zw(n,new z(i))}if(t instanceof ot)return zw(n,t._key);throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fu(t)}.`)}function vE(n,e){if(!Array.isArray(n)||n.length===0)throw new x(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sb(n,e){let t=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new x(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var _m=class{convertValue(e,t="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Mi(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Te(o.doubleValue));return new Bo(s)}convertGeoPoint(e){return new jo(Te(e.latitude),Te(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=wm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){let t=_n(e);return new He(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Se.fromString(e);de(QE(i));let r=new iu(i.get(1),i.get(3)),s=new z(i.popFirst(5));return r.isEqual(t)||gn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function VM(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Si=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pu=class extends Du{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Nr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Tb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Nr=class extends Pu{data(e={}){return super.data(e)}},vm=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Si(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Nr(this._firestore,this._userDataWriter,i.key,i,new Si(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let u=new Nr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Si(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Nr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Si(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:FM(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function FM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function Cb(n){n=yn(n,ot);let e=yn(n.firestore,Oi);return AM(xm(e),n._key).then(t=>UM(e,n,t))}var ku=class extends _m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}};function Rb(n){n=yn(n,Gr);let e=yn(n.firestore,Oi),t=xm(e),i=new ku(e);return LM(n._query),SM(t,n._query).then(r=>new vm(e,i,n,r))}function Db(n,e,t){n=yn(n,ot);let i=yn(n.firestore,Oi),r=VM(n.converter,e,t);return kb(i,[PM(Lm(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Yn.none())])}function Pb(n,e,t,...i){n=yn(n,ot);let r=yn(n.firestore,Oi),s=Lm(r),o;return o=typeof(e=Ue(e))=="string"||e instanceof Wr?OM(s,"updateDoc",n._key,e,t,i):NM(s,"updateDoc",n._key,e),kb(r,[o.toMutation(n._key,Yn.exists(!0))])}function kb(n,e){return function(i,r){let s=new Pt;return i.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return pM(yield TM(i),r,s)})),s.promise}(xm(n),e)}function UM(n,e,t){let i=t.docs.get(e._key),r=new ku(n);return new Pu(n,r,e._key,i,new Si(t.hasPendingWrites,t.fromCache),e.converter)}function Nb(...n){return new hm("arrayUnion",n)}(function(e,t=!0){(function(r){Kr=r})(qn),zn(new wt("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new Oi(new Bf(i.getProvider("auth-internal")),new Gf(i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new x(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(h.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Oe(Uw,"4.7.3",e),Oe(Uw,"4.7.3","esm2017")})();var Li=class{constructor(e){return e}},Ob="firestore",Um=class{constructor(){return co(Ob)}};var jm=new ee("angularfire2.firestore-instances");function jM(n,e){let t=pc(Ob,n,e);return t&&new Li(t)}function BM(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Li(i)}}var $M={provide:Um,deps:[[new Xe,jm]]},zM={provide:Li,useFactory:jM,deps:[[new Xe,jm],sn]};function Mb(n,...e){return Oe("angularfire",gi.full,"fst"),Ot([zM,$M,{provide:jm,useFactory:BM(n),multi:!0,deps:[Ee,xt,yr,_i,[new Xe,To],[new Xe,vr],...e]}])}var xb=Me(Nb,!0);var Lb=Me(_b,!0);var Bm=Me(vb,!0);var Vb=Me(Cb,!0);var Fb=Me(Rb,!0);var Ub=Me(yb,!0);var jb=Me(Ab,!0);var Bb=Me(Db,!0);var $m=Me(Pb,!0);var Jr=(()=>{class n{constructor(t,i){this.auth=t,this.router=i,this.user$=bw(t)}login(t,i){return Rw(this.auth,t,i).then(r=>{console.log("Login successful!",r.user),this.router.navigate(["/overview"])}).catch(r=>{throw console.error("Error during login:",r.message),r})}authState(){return this.user$}register(t,i){return Aw(this.auth,t,i).then(r=>{console.log("Registration successful!",r.user),this.router.navigate(["/overview"])}).catch(r=>{throw console.error("Error during registration:",r.message),r})}logout(){return Dw(this.auth).then(()=>{console.log("Logout successful!"),this.router.navigate(["/login"])}).catch(t=>{throw console.error("Error during logout:",t.message),t})}forgotPassword(t){return Cw(this.auth,t).then(()=>{console.log("Mail sent")}).catch(i=>{throw console.error("Error during passsword reset:",i.message),i})}getCurrentUser(){return this.auth.currentUser}static{this.\u0275fac=function(i){return new(i||n)(L(pn),L(Fe))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Xr=(()=>{class n{constructor(t,i){this.firestore=t,this.authService=i}getCompletedCourses(){return this.getUserUid().pipe(j(t=>Bm(this.firestore,"users",t)),Ge(t=>De(Vb(t)).pipe(Ge(i=>m(this,null,function*(){if(i.exists()){let s=i.data().completed_courses;return s||(s=[],yield $m(t,{completed_courses:s}),console.log("Created 'completed_courses' field for user:",i.id)),s}else return yield Bb(t,{completed_courses:[]}),console.log("Created new user document with 'completed_courses' field:",t.id),[]})))))}addCompletedCourse(t){return this.getUserUid().pipe(j(i=>Bm(this.firestore,"users",i)),Ge(i=>De($m(i,{completed_courses:xb(t)})).pipe(j(()=>{console.log("Course added to completed_courses:",t)}))))}getAllCourses(){let t=Lb(this.firestore,"courses");return De(Fb(jb(t))).pipe(j(i=>i.docs.map(r=>r.data())))}getUserUid(){return this.authService.authState().pipe(At(t=>!!t),j(t=>t.uid))}static{this.\u0275fac=function(i){return new(i||n)(L(Li),L(Jr))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Gm;try{Gm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Gm=!1}var Ko=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?rv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Gm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(L(Xt))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ho;function GM(){if(Ho==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ho=!0}))}finally{Ho=Ho||!1}return Ho}function Wm(n){return GM()?n:!!n.capture}function $b(n){return n.composedPath?n.composedPath()[0]:n.target}function zb(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Hm(n){return Array.isArray(n)?n:[n]}function Km(n){return n instanceof St?n.nativeElement:n}var Gb=new Set,Vi,WM=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):KM}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&HM(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(L(Ko),L(As,8))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HM(n,e){if(!Gb.has(n))try{Vi||(Vi=document.createElement("style"),e&&Vi.setAttribute("nonce",e),Vi.setAttribute("type","text/css"),document.head.appendChild(Vi)),Vi.sheet&&(Vi.sheet.insertRule(`@media ${n} {body{ }}`,0),Gb.add(n))}catch(t){console.error(t)}}function KM(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Hb=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new st}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Wb(Hm(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=Wb(Hm(t)).map(o=>this._registerQuery(o).observable),s=qi(r);return s=wa(s.pipe(yt(1)),s.pipe(w_(1),g_(0))),s.pipe(j(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:u,query:h})=>{c.matches=c.matches||u,c.breakpoints[h]=u}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),s={observable:new Jt(o=>{let c=u=>this._zone.run(()=>o.next(u));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(ba(i),j(({matches:o})=>({query:t,matches:o})),Gi(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static{this.\u0275fac=function(i){return new(i||n)(L(WM),L(Ee))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Wb(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Yb(n){return n.buttons===0||n.detail===0}function Jb(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Fi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Fi||{}),Kb="cdk-high-contrast-black-on-white",Qb="cdk-high-contrast-white-on-black",Qm="cdk-high-contrast-active",Xb=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=B(Hb).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Fi.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Fi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Fi.BLACK_ON_WHITE}return Fi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Qm,Kb,Qb),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Fi.BLACK_ON_WHITE?t.add(Qm,Kb):i===Fi.WHITE_ON_BLACK&&t.add(Qm,Qb)}}static{this.\u0275fac=function(i){return new(i||n)(L(Ko),L(Ne))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ym=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({})}}return n})();function YM(){return!0}var JM=new ee("mat-sanity-checks",{providedIn:"root",factory:YM}),Zm=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return zb()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(L(Xb),L(JM,8),L(Ne))}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({imports:[Ym,Ym]})}}return n})();var bt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(bt||{}),Jm=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=bt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Zb=Wm({passive:!0,capture:!0}),Xm=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=$b(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Zb)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Zb)))}},eT={enterDuration:225,exitDuration:150},XM=800,tT=Wm({passive:!0,capture:!0}),nT=["mousedown","touchstart"],iT=["mouseup","mouseleave","touchend","touchcancel"],rT=class n{static{this._eventManager=new Xm}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Km(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=M(M({},eT),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||ZM(e,t,r),c=e-r.left,u=t-r.top,h=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${u-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(f);let g=window.getComputedStyle(f),I=g.transitionProperty,S=g.transitionDuration,D=I==="none"||S==="0s"||S==="0s, 0s"||r.width===0&&r.height===0,N=new Jm(this,f,i,D);f.style.transform="scale3d(1, 1, 1)",N.state=bt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=N);let P=null;return!D&&(h||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let W=()=>this._finishRippleTransition(N),Q=()=>this._destroyRipple(N);f.addEventListener("transitionend",W),f.addEventListener("transitioncancel",Q),P={onTransitionEnd:W,onTransitionCancel:Q}}),this._activeRipples.set(N,P),(D||!h)&&this._finishRippleTransition(N),N}fadeOutRipple(e){if(e.state===bt.FADING_OUT||e.state===bt.HIDDEN)return;let t=e.element,i=M(M({},eT),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=bt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Km(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,nT.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{iT.forEach(t=>{this._triggerElement.addEventListener(t,this,tT)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===bt.FADING_IN?this._startFadeOutTransition(e):e.state===bt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=bt.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=bt.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){let t=Yb(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+XM;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Jb(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===bt.VISIBLE||e.config.terminateOnPointerUp&&e.state===bt.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(nT.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(iT.forEach(t=>e.removeEventListener(t,this,tT)),this._pointerUpEventsRegistered=!1))}};function ZM(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var ex=["*"],Uu;function tx(){if(Uu===void 0&&(Uu=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Uu=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Uu}function Qo(n){return tx()?.createHTML(n)||n}function sT(n){return Error(`Unable to find icon with the name "${n}"`)}function nx(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function oT(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function aT(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var In=class{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},ix=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new In(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){let o=this._sanitizer.sanitize(ht.HTML,r);if(!o)throw aT(r);let c=Qo(o);return this._addSvgIconConfig(t,i,new In("",c,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new In(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let s=this._sanitizer.sanitize(ht.HTML,i);if(!s)throw aT(i);let o=Qo(s);return this._addSvgIconSetConfig(t,new In("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(ht.RESOURCE_URL,t);if(!i)throw oT(t);let r=this._cachedIconsByUrl.get(i);return r?U(ju(r)):this._loadSvgIconFromConfig(new In(t,null)).pipe(Ae(s=>this._cachedIconsByUrl.set(i,s)),j(s=>ju(s)))}getNamedSvgIcon(t,i=""){let r=cT(i,t),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):oi(sT(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?U(ju(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(j(i=>ju(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return U(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Sn(c=>{let h=`Loading icon set URL: ${this._sanitizer.sanitize(ht.RESOURCE_URL,o.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(h)),U(null)})));return Ea(s).pipe(j(()=>{let o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw sT(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(o,t,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ae(i=>t.svgText=i),j(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?U(null):this._fetchIcon(t).pipe(Ae(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let s=t.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let c=this._svgElementFromString(Qo("<svg></svg>"));return c.appendChild(o),this._setSvgAttributes(c,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(Qo("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){let{name:o,value:c}=r[s];o!=="id"&&i.setAttribute(o,c)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw nx();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(ht.RESOURCE_URL,i);if(!o)throw oT(i);let c=this._inProgressUrlFetches.get(o);if(c)return c;let u=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(j(h=>Qo(h)),ai(()=>this._inProgressUrlFetches.delete(o)),I_());return this._inProgressUrlFetches.set(o,u),u}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(cT(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,t);if(s)return rx(s)?new In(s.url,null,s.options):new In(s,null)}}static{this.\u0275fac=function(i){return new(i||n)(L(dv,8),L(sh),L(Ne,8),L(ci))}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ju(n){return n.cloneNode(!0)}function cT(n,e){return n+":"+e}function rx(n){return!!(n.url&&n.options)}var sx=new ee("MAT_ICON_DEFAULT_OPTIONS"),ox=new ee("mat-icon-location",{providedIn:"root",factory:ax});function ax(){let n=B(Ne),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var uT=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],cx=uT.map(n=>`[${n}]`).join(", "),ux=/^url\(['"]?#(.*?)['"]?\)$/,Bu=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,c){this._elementRef=t,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ya.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(cx),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)uT.forEach(o=>{let c=i[s],u=c.getAttribute(o),h=u?u.match(ux):null;if(h){let f=r.get(c);f||(f=[],r.set(c,f)),f.push({name:o,value:h[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(yt(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(i){return new(i||n)(J(St),J(ix),Ol("aria-hidden"),J(ox),J(ci),J(sx,8))}}static{this.\u0275cmp=_e({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(ui("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),B_(r.color?"mat-"+r.color:""),Ji("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Mn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Rs,Ds],ngContentSelectors:ex,decls:1,vars:0,template:function(i,r){i&1&&(Ll(),Vl(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),lT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({imports:[Zm,Zm]})}}return n})();var dT=(()=>{class n{constructor(){this.image="",this.material=""}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-display-learning-material"]],inputs:{image:"image",material:"material"},decls:5,vars:3,consts:[[1,"h-full","flex","px-1","items-end","bg-cover","bg-center","bg-no-repeat"],[1,"h-fit","w-full","xl:max-w-[80%]","lg:max-w-[100%]","mx-auto","shadow-2xl","bg-slate-300","bg-opacity-65","p-4","backdrop-blur-sm","overflow-scroll","xl:mb-12","lg:mb-6","md:mb-0"],[1,"font-mono","text-sm"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),re(4),$()()()()),i&2&&(j_("background-image","url("+r.image+")"),te(4),ct(" ",r.material," "))}})}}return n})();function hx(n,e){if(n&1){let t=On();F(0,"div",4)(1,"button",5),be("click",function(){let r=Pn(t).$implicit,s=We();return kn(s.checkAnswer(r))}),F(2,"h1",6),re(3),$()()()}if(n&2){let t=e.$implicit;te(3),$_(t.option)}}var fT=(()=>{class n{constructor(){this.question="",this.options=[],this.correctAnswerEvent=new at}checkAnswer(t){t.correctAnswer&&this.correctAnswerEvent.emit()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-display-quiz"]],inputs:{question:"question",options:"options"},outputs:{correctAnswerEvent:"correctAnswerEvent"},decls:8,vars:2,consts:[[1,"h-full","flex","flex-col","justify-around","p-10"],[1,"text-center","text-3xl","font-mono"],[1,"text-center","mt-10","text-xl","font-mono"],["class","outline my-5 mx-44",4,"ngFor","ngForOf"],[1,"outline","my-5","mx-44"],[1,"w-full","hover:bg-slate-400",3,"click"],[1,"font-mono"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div")(2,"h1",1),re(3,"Question:"),$(),F(4,"h2",2),re(5),$()(),F(6,"div"),dt(7,hx,4,1,"div",3),$()()),i&2&&(te(5),ct(" ",r.question,""),te(2),Pe("ngForOf",r.options))},dependencies:[xa]})}}return n})();function fx(n,e){if(n&1){let t=On();F(0,"button",8),be("click",function(){Pn(t);let r=We();return kn(r.previousSection())}),F(1,"mat-icon",9),re(2,"chevron_left"),$()()}}function px(n,e){if(n&1&&(F(0,"h1",10),re(1),$()),n&2){let t=We();te(),Ul(" ",t.currentSection+1," / ",t.course.lessons.length," ")}}function mx(n,e){if(n&1&&(F(0,"h1",10),re(1),$()),n&2){let t=We();te(),Ul(" ",t.currentQuestion+1," / ",t.course.quiz.length," ")}}function gx(n,e){if(n&1&&ke(0,"app-display-learning-material",11),n&2){let t=We();Pe("material",t.course.lessons[t.currentSection].material)("image",t.course.lessons[t.currentSection].image)}}function _x(n,e){if(n&1){let t=On();F(0,"app-display-quiz",12),be("correctAnswerEvent",function(){Pn(t);let r=We();return kn(r.onCorrectAnswer())}),$()}if(n&2){let t=We();Pe("question",t.course.quiz[t.currentQuestion].question)("options",t.course.quiz[t.currentQuestion].options)}}function vx(n,e){if(n&1){let t=On();F(0,"button",8),be("click",function(){Pn(t);let r=We();return kn(r.nextSection())}),F(1,"mat-icon",9),re(2,"chevron_right"),$()()}}var pT=(()=>{class n{constructor(t,i,r){this.route=t,this.dataService=i,this.router=r,this.currentSection=0,this.currentQuestion=0,this.showQuiz=!1,this.courses=[],this.course={title:"",courseCoverImage:"",courseId:0,lessons:[],quiz:[]}}ngOnInit(){this.route.paramMap.subscribe(t=>{let i=t.get("id"),r=i?+i:0;this.dataService.getAllCourses().pipe(j(s=>s.find(o=>o.courseId===r))).subscribe(s=>{s&&(this.course=s)})})}nextSection(){if(this.course){if(this.currentSection==this.course.lessons.length-1){this.showQuiz=!0;return}this.currentSection+=1}}previousSection(){this.currentSection!=0&&(this.currentSection-=1)}onCorrectAnswer(){this.currentQuestion!=this.course.quiz.length-1?this.currentQuestion+=1:(this.addCourseToCompletedCourses(this.course.courseId),this.router.navigate(["/overview"]))}addCourseToCompletedCourses(t){this.dataService.addCompletedCourse(t).subscribe({next:()=>{console.log("Course added successfully!")},error:i=>{console.error("Error adding course:",i)}})}static{this.\u0275fac=function(i){return new(i||n)(J(Fn),J(Xr),J(Fe))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-quiz-page"]],decls:10,vars:6,consts:[[1,"h-[calc(100vh-4rem)]","w-screen","flex","items-center","justify-center"],[1,"w-[75%]","h-[80%]","bg-slate-200","shadow-2xl","p-10","flex","items-center"],["class","h-40 w-12 bg-slate-300 outline outline-1 rounded-lg",3,"click",4,"ngIf"],[1,"flex-grow","h-full","mx-7","flex","flex-col"],["class","text-center text-3xl mb-3 font-semibold",4,"ngIf"],[1,"outline","outline-1","rounded-lg","flex-grow","min-h-0","overflow-scroll"],[3,"material","image",4,"ngIf"],[3,"question","options","correctAnswerEvent",4,"ngIf"],[1,"h-40","w-12","bg-slate-300","outline","outline-1","rounded-lg",3,"click"],[1,"h-10","w-10"],[1,"text-center","text-3xl","mb-3","font-semibold"],[3,"material","image"],[3,"correctAnswerEvent","question","options"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1),dt(2,fx,3,0,"button",2),F(3,"div",3),dt(4,px,2,2,"h1",4)(5,mx,2,2,"h1",4),F(6,"div",5),dt(7,gx,1,2,"app-display-learning-material",6)(8,_x,1,2,"app-display-quiz",7),$()(),dt(9,vx,3,0,"button",2),$()()),i&2&&(te(2),Pe("ngIf",!r.showQuiz),te(2),Pe("ngIf",!r.showQuiz),te(),Pe("ngIf",r.showQuiz),te(2),Pe("ngIf",!r.showQuiz),te(),Pe("ngIf",r.showQuiz),te(),Pe("ngIf",!r.showQuiz))},dependencies:[La,Bu,dT,fT],styles:[".mat-icon[_ngcontent-%COMP%]{height:48px!important;width:48px!important}.material-icons[_ngcontent-%COMP%]{font-size:60px!important}"]})}}return n})();var mT=(()=>{class n{constructor(t){this.router=t,this.courseTitle="",this.courseId=1,this.coverImage="",this.icon="check_box_outline_blank"}navigateToCourse(t){this.router.navigate([`/course/${t}`])}static{this.\u0275fac=function(i){return new(i||n)(J(Fe))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-course-list-item"]],inputs:{courseTitle:"courseTitle",courseId:"courseId",coverImage:"coverImage",icon:"icon"},decls:7,vars:3,consts:[[1,"bg-white","py-1","rounded-2xl","shadow-2xl",3,"click"],[1,"h-14","pl-2","pr-6","flex","items-center","outline-1","gap-x-5"],[1,"aspect-square","h-[80%]","object-cover","rounded-full",3,"src"],[1,"ml-auto"],[1,"transform","scale-[1.6]",3,"fontIcon"]],template:function(i,r){i&1&&(F(0,"div",0),be("click",function(){return r.navigateToCourse(r.courseId)}),F(1,"div",1),ke(2,"img",2),F(3,"h1"),re(4),$(),F(5,"div",3),ke(6,"mat-icon",4),$()()()),i&2&&(te(2),Fl("src",r.coverImage,M_),te(2),ct(" Course Number: ",r.courseTitle,""),te(2),Fl("fontIcon",r.icon))},dependencies:[Bu]})}}return n})();function Ix(n,e){if(n&1&&ke(0,"app-course-list-item",4),n&2){let t=e.$implicit,i=We();Pe("coverImage",t.courseCoverImage)("icon",i.isCourseCompleted(t.courseId)?"check_box_outline":"check_box_outline_blank")("courseId",t.courseId)("courseTitle",t.title)("ngClass",i.isCourseCompleted(t.courseId)?"outline outline-2 rounded-xl outline-green-500":"")}}var gT=(()=>{class n{constructor(t){this.dataService=t,this.courses=[],this.user=null,this.completedCourses=[],this.destroy$=new st,this.dataService.getCompletedCourses().subscribe({next:i=>{console.log(i),this.completedCourses=i},error:i=>{console.error("Error fetching completed courses:",i)}}),this.dataService.getAllCourses().subscribe({next:i=>{this.courses=i},error:i=>{console.error("Error fetching courses:",i)}})}isCourseCompleted(t){return this.completedCourses.includes(t)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||n)(J(Xr))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-course-view"]],decls:4,vars:1,consts:[[1,"h-[calc(100vh-4rem)]","w-screen","flex","items-center","justify-center"],[1,"w-[75%]","h-[75%]","outline","bg-slate-200","shadow-2xl","p-10","flex","items-center","justify-center"],[1,"w-[70%]","gap-y-3","flex","flex-col"],[3,"coverImage","icon","courseId","courseTitle","ngClass",4,"ngFor","ngForOf"],[3,"coverImage","icon","courseId","courseTitle","ngClass"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1)(2,"div",2),dt(3,Ix,1,5,"app-course-list-item",3),$()()()),i&2&&(te(3),Pe("ngForOf",r.courses))},dependencies:[nv,xa,mT]})}}return n})();var AT=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(J(Sa),J(St))}}static{this.\u0275dir=Ze({type:n})}}return n})(),wx=(()=>{class n extends AT{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ki(n)))(r||n)}})()}static{this.\u0275dir=Ze({type:n,features:[Nn]})}}return n})(),ST=new ee("");var Ex={provide:ST,useExisting:Es(()=>Qu),multi:!0};function bx(){let n=hi()?hi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Tx=new ee(""),Qu=(()=>{class n extends AT{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!bx())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(J(Sa),J(St),J(Tx,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&be("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[li([Ex]),Nn]})}}return n})();function Ax(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var ng=new ee(""),CT=new ee("");function Sx(n){return Ax(n.value)?{required:!0}:null}function _T(n){return null}function RT(n){return n!=null}function DT(n){return Oa(n)?De(n):n}function PT(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function kT(n,e){return e.map(t=>t(n))}function Cx(n){return!n.validate}function NT(n){return n.map(e=>Cx(e)?e:t=>e.validate(t))}function Rx(n){if(!n)return null;let e=n.filter(RT);return e.length==0?null:function(t){return PT(kT(t,e))}}function ig(n){return n!=null?Rx(NT(n)):null}function Dx(n){if(!n)return null;let e=n.filter(RT);return e.length==0?null:function(t){let i=kT(t,e).map(DT);return Ea(i).pipe(j(PT))}}function rg(n){return n!=null?Dx(NT(n)):null}function vT(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Px(n){return n._rawValidators}function kx(n){return n._rawAsyncValidators}function tg(n){return n?Array.isArray(n)?n:[n]:[]}function zu(n,e){return Array.isArray(n)?n.includes(e):n===e}function yT(n,e){let t=tg(e);return tg(n).forEach(r=>{zu(t,r)||t.push(r)}),t}function IT(n,e){return tg(e).filter(t=>!zu(n,t))}var qu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ig(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ts=class extends qu{get formDirective(){return null}get path(){return null}},ta=class extends qu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Gu=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Nx={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},E$=pe(M({},Nx),{"[class.ng-submitted]":"isSubmitted"}),OT=(()=>{class n extends Gu{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(J(ta,2))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ji("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Nn]})}}return n})(),MT=(()=>{class n extends Gu{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(J(ts,10))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ji("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Nn]})}}return n})();var Yo="VALID",$u="INVALID",Zr="PENDING",Jo="DISABLED",ns=class{},Wu=class extends ns{constructor(e,t){super(),this.value=e,this.source=t}},Zo=class extends ns{constructor(e,t){super(),this.pristine=e,this.source=t}},ea=class extends ns{constructor(e,t){super(),this.touched=e,this.source=t}},es=class extends ns{constructor(e,t){super(),this.status=e,this.source=t}};function xT(n){return(Yu(n)?n.validators:n)||null}function Ox(n){return Array.isArray(n)?ig(n):n||null}function LT(n,e){return(Yu(e)?e.asyncValidators:n)||null}function Mx(n){return Array.isArray(n)?rg(n):n||null}function Yu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function xx(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new me(1e3,"");if(!i[t])throw new me(1001,"")}function Lx(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new me(1002,"")})}var Hu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ps(()=>this.statusReactive()),this.statusReactive=Cs(void 0),this._pristine=Ps(()=>this.pristineReactive()),this.pristineReactive=Cs(!0),this._touched=Ps(()=>this.touchedReactive()),this.touchedReactive=Cs(!1),this._events=new st,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xn(this.statusReactive)}set status(e){xn(()=>this.statusReactive.set(e))}get valid(){return this.status===Yo}get invalid(){return this.status===$u}get pending(){return this.status==Zr}get disabled(){return this.status===Jo}get enabled(){return this.status!==Jo}get pristine(){return xn(this.pristineReactive)}set pristine(e){xn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return xn(this.touchedReactive)}set touched(e){xn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(yT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IT(e,this._rawAsyncValidators))}hasValidator(e){return zu(this._rawValidators,e)}hasAsyncValidator(e){return zu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(M({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new ea(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new ea(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(M({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Zo(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Zo(!0,i))}markAsPending(e={}){this.status=Zr;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new es(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Jo,this.errors=null,this._forEachChild(r=>{r.disable(pe(M({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wu(this.value,i)),this._events.next(new es(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Yo,this._forEachChild(i=>{i.enable(pe(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yo||this.status===Zr)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wu(this.value,t)),this._events.next(new es(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jo:Yo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Zr,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=DT(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new es(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?Jo:this.errors?$u:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zr)?Zr:this._anyControlsHaveStatus($u)?$u:Yo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Zo(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ea(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ox(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Mx(this._rawAsyncValidators)}},Ku=class extends Hu{constructor(e,t,i){super(xT(t),LT(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Lx(this,!0,e),Object.keys(e).forEach(i=>{xx(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var sg=new ee("CallSetDisabledState",{providedIn:"root",factory:()=>og}),og="always";function Vx(n,e){return[...e.path,n]}function VT(n,e,t=og){FT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Ux(n,e),Bx(n,e),jx(n,e),Fx(n,e)}function wT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fx(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function FT(n,e){let t=Px(n);e.validator!==null?n.setValidators(vT(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=kx(n);e.asyncValidator!==null?n.setAsyncValidators(vT(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();wT(e._rawValidators,r),wT(e._rawAsyncValidators,r)}function Ux(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&UT(n,e)})}function jx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&UT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function UT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Bx(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function $x(n,e){n==null,FT(n,e)}function zx(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function qx(n){return Object.getPrototypeOf(n.constructor)===wx}function Gx(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Wx(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Qu?t=s:qx(s)?i=s:r=s}),r||i||t||null}var Hx={provide:ts,useExisting:Es(()=>ag)},Xo=Promise.resolve(),ag=(()=>{class n extends ts{get submitted(){return xn(this.submittedReactive)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=Ps(()=>this.submittedReactive()),this.submittedReactive=Cs(!1),this._directives=new Set,this.ngSubmit=new at,this.form=new Ku({},ig(t),rg(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Xo.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),VT(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Xo.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Xo.then(()=>{let i=this._findContainer(t.path),r=new Ku({});$x(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Xo.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Xo.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Gx(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(J(ng,10),J(CT,10),J(sg,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&be("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[li([Hx]),Nn]})}}return n})();function ET(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function bT(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Kx=class extends Hu{constructor(e=null,t,i){super(xT(t),LT(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(bT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ET(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ET(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){bT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Qx={provide:ta,useExisting:Es(()=>cg)},TT=Promise.resolve(),cg=(()=>{class n extends ta{constructor(t,i,r,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new Kx,this._registered=!1,this.name="",this.update=new at,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Wx(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),zx(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){VT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){TT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Mn(i);TT.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Vx(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(J(ts,9),J(ng,10),J(CT,10),J(ST,10),J(Zi,8),J(sg,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[li([Qx]),Nn,Hi]})}}return n})(),jT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var Yx=(()=>{class n{constructor(){this._validator=_T}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):_T,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ze({type:n,features:[Hi]})}}return n})();var Jx={provide:ng,useExisting:Es(()=>ug),multi:!0};var ug=(()=>{class n extends Yx{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Mn,this.createValidator=t=>Sx}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Ki(n)))(r||n)}})()}static{this.\u0275dir=Ze({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&ui("required",r._enabled?"":null)},inputs:{required:"required"},features:[li([Jx]),Nn]})}}return n})();var Xx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({})}}return n})();var Ju=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sg,useValue:t.callSetDisabledState??og}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({imports:[Xx]})}}return n})();function eL(n,e){n&1&&(F(0,"label",20),re(1,"Repeat password"),$())}function tL(n,e){if(n&1){let t=On();F(0,"div",9)(1,"input",21),Da("ngModelChange",function(r){Pn(t);let s=We();return Ra(s.repeatPassword,r)||(s.repeatPassword=r),kn(r)}),$()()}if(n&2){let t=We();te(),Ca("ngModel",t.repeatPassword)}}function nL(n,e){if(n&1&&(F(0,"div",22)(1,"span",23),re(2,"Error!"),$(),re(3),$()),n&2){let t=We();te(3),ct(" ",t.errorMessage," ")}}var BT=(()=>{class n{constructor(t){this.authService=t,this.email="",this.password="",this.errorMessage="",this.isLogin=!0,this.repeatPassword=""}toggleLogin(){this.isLogin=!this.isLogin}getCurrentUser(){let t=this.authService.getCurrentUser();t&&console.log(t)}register(){if(this.password!==this.repeatPassword){this.errorMessage="Passwords do not match";return}console.log(this.password,this.repeatPassword,this.email),this.authService.register(this.email,this.password).then(()=>{console.log("Register successful!")}).catch(t=>{this.errorMessage=t.message})}login(){console.log(this.password,this.repeatPassword,this.email),this.authService.login(this.email,this.password).then(()=>{console.log("Login successful!")}).catch(t=>{this.errorMessage=t.message})}forgotPassword(t){console.log(t)}static{this.\u0275fac=function(i){return new(i||n)(J(Jr))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-login-page"]],decls:31,vars:8,consts:[[1,"flex","min-h-full","flex-col","justify-center","pb-44","px-6","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-sm","flex","flex-col","justify-center"],[1,"mt-10","text-center","text-2xl/9","font-bold","tracking-tight","text-gray-900"],[1,"text-center","tracking-tight","text-gray-900"],[1,"flex","w-20","mt-2","sm:mx-auto","justify-center","rounded-md","bg-indigo-600","disabled:brightness-50","py-1.5","text-sm/6","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],[3,"click"],[1,"sm:mx-auto","mt-6","sm:w-full","sm:max-w-sm"],[1,"space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm/6","font-medium","text-gray-900"],[1,"mt-2"],["type","email","name","email","id","email","autocomplete","email","required","",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline","focus:outline-2","focus:-outline-offset-2","focus:outline-indigo-600","sm:text-sm/6",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between"],["for","password",1,"block","text-sm/6","font-medium","text-gray-900"],[1,"text-sm"],[1,"font-semibold","text-indigo-600","hover:text-indigo-500",3,"click"],["type","password","name","password","id","password","autocomplete","current-password","required","",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline","focus:outline-2","focus:-outline-offset-2","focus:outline-indigo-600","sm:text-sm/6",3,"ngModelChange","ngModel"],["for","repeat-password","class","block text-sm/6 font-medium text-gray-900 mt-2",4,"ngIf"],["class","mt-2",4,"ngIf"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-indigo-600","px-3","py-1.5","text-sm/6","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600"],["class","p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400","role","alert",4,"ngIf"],["for","repeat-password",1,"block","text-sm/6","font-medium","text-gray-900","mt-2"],["type","password","name","repeat-password","id","repeat-password","autocomplete","current-password","required","",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline","focus:outline-2","focus:-outline-offset-2","focus:outline-indigo-600","sm:text-sm/6",3,"ngModelChange","ngModel"],["role","alert",1,"p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],[1,"font-medium"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1)(2,"h2",2),re(3),$(),F(4,"p",3),re(5," Toggle Login/Register "),$(),F(6,"button",4),be("click",function(){return r.toggleLogin()}),re(7),$()(),F(8,"button",5),be("click",function(){return r.getCurrentUser()}),re(9," GET CURRENT USER "),$(),F(10,"div",6)(11,"form",7),be("ngSubmit",function(){return r.isLogin?r.login():r.register()}),F(12,"div")(13,"label",8),re(14,"Email address"),$(),F(15,"div",9)(16,"input",10),Da("ngModelChange",function(o){return Ra(r.email,o)||(r.email=o),o}),$()()(),F(17,"div")(18,"div",11)(19,"label",12),re(20,"Password"),$(),F(21,"div",13)(22,"a",14),be("click",function(){return r.forgotPassword(r.email)}),re(23,"Forgot password?"),$()()(),F(24,"div",9)(25,"input",15),Da("ngModelChange",function(o){return Ra(r.password,o)||(r.password=o),o}),$()(),dt(26,eL,2,0,"label",16)(27,tL,2,1,"div",17),$(),F(28,"button",18),re(29),$(),dt(30,nL,4,1,"div",19),$()()()),i&2&&(te(3),ct(" ",r.isLogin?"Login ur account":"Sign up for an account"," "),te(4),ct(" ",r.isLogin?"Login":"Register"," "),te(9),Ca("ngModel",r.email),te(9),Ca("ngModel",r.password),te(),Pe("ngIf",!r.isLogin),te(),Pe("ngIf",!r.isLogin),te(2),ct(" ",r.isLogin?"Sign in":"Sign Up"," "),te(),Pe("ngIf",r.errorMessage))},dependencies:[La,jT,Qu,OT,MT,ug,cg,ag]})}}return n})();var $T=()=>Nw(["login"]),iL=[{path:"",component:Lw},{path:"login",component:BT},{path:"course/:id",component:pT,canActivate:[Rf],data:{authGuardPipe:$T}},{path:"overview",component:gT,canActivate:[Rf],data:{authGuardPipe:$T}}],zT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({imports:[qh.forRoot(iL),qh]})}}return n})();var qT=(()=>{class n{constructor(t,i,r){this.router=t,this.authService=i,this.dataService=r,this.title="Anti-Glow",this.user=null,this.destroy$=new st,this.authService.authState().pipe(Gi(this.destroy$)).subscribe(s=>{this.user=s})}printUser(){let t=this.authService.getCurrentUser();console.log("User",t),console.log("THIS User",this.user)}logout(){this.authService.logout().then(()=>{this.user=null})}navigateToOverview(){this.router.navigate(["/overview"])}navigateToLogin(){this.router.navigate(["/login"])}navigateToHome(){this.router.navigate(["/"])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||n)(J(Fe),J(Jr),J(Xr))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-root"]],decls:12,vars:2,consts:[[1,"outline-2","top-0","w-full","h-16","bg-indigo-600","flex","justify-center"],[1,"w-[1000px]","mx-10","flex","place-items-center","justify-between"],[1,"text-white","text-3xl",3,"click"],[1,"text-white","pr-3",3,"click"],[1,"text-white","pr-3",3,"click","disabled"]],template:function(i,r){i&1&&(F(0,"nav",0)(1,"div",1)(2,"button",2),be("click",function(){return r.navigateToHome()}),re(3," Anti-Glow"),$(),F(4,"div")(5,"button",3),be("click",function(){return r.navigateToOverview()}),re(6," Overview"),$(),F(7,"button",4),be("click",function(){return r.navigateToLogin()}),re(8),$(),F(9,"button",3),be("click",function(){return r.logout()}),re(10," Log out "),$()()()(),ke(11,"router-outlet")),i&2&&(te(7),Pe("disabled",r.user),te(),ct(" ",r.user?r.user.email:"Log in",""))},dependencies:[Fh]})}}return n})();var GT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({imports:[er,Ju]})}}return n})();var WT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ie({type:n})}static{this.\u0275inj=ye({imports:[er,lT]})}}return n})();var rL="@",sL=(()=>{class n{constructor(t,i,r,s,o){this.doc=t,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=B(x_,{optional:!0}),this.loadingSchedulerFn=B(oL,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-OLXTKVNT.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new me(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new lg(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,i);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){Ta()}}static{this.\u0275prov=q({token:n,factory:n.\u0275fac})}}return n})(),lg=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(rL)}},oL=new ee("");function HT(n="animations"){return V_("NgAsyncAnimations"),Ot([{provide:Aa,useFactory:(e,t,i)=>new sL(e,t,i,n),deps:[Ne,Ua,Ee]},{provide:Ml,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var KT={production:!1,firebase:{apiKey:"AIzaSyA9HRiN7ZlYjVawTeahdT5obMpI_O-OF5Q",authDomain:"cyberwijs-b2d35.firebaseapp.com",projectId:"cyberwijs-b2d35",storageBucket:"cyberwijs-b2d35.firebasestorage.app",messagingSenderId:"799404641834",appId:"1:799404641834:web:f0a6b1cdeafb82d46c7d53"}};var QT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Ie({type:n,bootstrap:[qT]})}static{this.\u0275inj=ye({providers:[Mb(()=>Ub()),Uy(()=>jy(KT.firebase)),Ew(()=>Sw()),HT("noop")],imports:[Iv,zT,GT,WT,Ju]})}}return n})();yv().bootstrapModule(QT).catch(n=>console.error(n));
