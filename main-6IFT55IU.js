import{$ as g_,$a as Cs,$b as H_,A as Sl,Aa as bs,Ab as Rs,B as Ia,Ba as I_,Bb as Qi,C as Cl,Ca as Yt,Cb as V_,D as wa,Da as Ol,Db as Da,E as bt,Ea as Ts,Eb as F_,F as Tn,Fa as Wi,Fb as Pa,G as An,Ga as Hi,Gb as ka,H as l_,Ha as w_,Hb as Ul,I as Rl,Ia as E_,Ib as Na,J as kt,Ja as b_,Jb as jl,K as h_,Ka as T_,Kb as U_,L as ri,La as A_,Lb as Bl,M as Sn,Ma as S_,Mb as Oa,N as Dl,Na as C_,Nb as j_,O as d_,Oa as ht,Ob as Yi,P as f_,Pa as R_,Pb as B_,Q as p_,Qa as As,Qb as $_,R as m_,Ra as te,Rb as Nn,S as Ea,Sa as J,Sb as Ds,T as Je,Ta as ba,Tb as On,U as $i,Ua as D_,Ub as z_,V as Ae,Va as Ta,Vb as ci,W as pe,Wa as Aa,Wb as q_,X as Cn,Xa as P_,Xb as G_,Y as ws,Ya as k_,Yb as Ne,Z as G,Za as Ss,Zb as W_,_ as Ie,_a as Pn,_b as $l,a as M,aa as ee,ab as N_,ac as K_,b as fe,ba as Pl,bb as Ml,bc as Ps,ca as V,cb as dt,cc as Q_,d as Qt,da as j,db as O_,dc as Y_,e as m,ea as Xe,eb as oi,ec as Ma,f as ya,fa as kl,fb as Pe,fc as xa,g as s_,ga as Es,gb as M_,gc as Ji,h as En,ha as _e,hb as Ki,hc as J_,i as El,ia as we,ib as x_,ic as X_,j as bl,ja as Ze,jb as F,jc as zl,k as st,ka as Nt,kb as B,kc as Z_,l as _t,la as __,lb as ke,lc as ev,m as o_,ma as zi,mb as kn,n as a_,na as Ot,nb as be,o as bn,oa as qi,ob as qe,p as ji,pa as Rn,pb as xl,q as Tl,qa as Dn,qb as Ll,r as Al,ra as Gi,rb as Vl,s as De,sa as Nl,sb as re,t as U,ta as Mt,tb as L_,u as ii,ua as v_,ub as at,v as c_,va as ot,vb as Fl,w as u_,wa as Ee,wb as Sa,x as q,xa as si,xb as Ca,y as Bi,ya as Tt,yb as Ra,z as lt,za as y_,zb as ai}from"./chunk-5BYI4FU6.js";var Gl=class{};var Xi=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Wl=class{encodeKey(e){return tv(e)}encodeValue(e){return tv(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function gA(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],u=t.get(o)||[];u.push(c),t.set(o,u)}),t}var _A=/%(\d[a-f0-9])/gi,vA={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tv(n){return encodeURIComponent(n).replace(_A,(e,t)=>vA[t]??e)}function La(n){return`${n}`}var Mn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Wl,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=gA(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(La):[La(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(La(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(La(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Hl=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function yA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function nv(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function iv(n){return typeof Blob<"u"&&n instanceof Blob}function rv(n){return typeof FormData<"u"&&n instanceof FormData}function IA(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ks=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(yA(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Xi,this.context??=new Hl,!this.params)this.params=new Mn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),u=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||nv(this.body)||iv(this.body)||rv(this.body)||IA(this.body)?this.body:this.body instanceof Mn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||rv(this.body)?null:iv(this.body)?this.body.type||null:nv(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Mn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,h=e.headers||this.headers,f=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(h=Object.keys(e.setHeaders).reduce((I,S)=>I.set(S,e.setHeaders[S]),h)),e.setParams&&(f=Object.keys(e.setParams).reduce((I,S)=>I.set(S,e.setParams[S]),f)),new n(t,i,o,{params:f,headers:h,context:g,reportProgress:u,responseType:r,withCredentials:c,transferCache:s})}},sv=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(sv||{}),Kl=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Xi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Ql=class n extends Kl{constructor(e={}){super(e),this.type=sv.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function ql(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ov=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof ks)s=t;else{let u;r.headers instanceof Xi?u=r.headers:u=new Xi(r.headers);let h;r.params&&(r.params instanceof Mn?h=r.params:h=new Mn({fromObject:r.params})),s=new ks(t,i,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:h,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=U(s).pipe(An(u=>this.handler.handle(u)));if(t instanceof ks||r.observe==="events")return o;let c=o.pipe(bt(u=>u instanceof Ql));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(q(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(q(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(q(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(q(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Mn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,ql(r,i))}post(t,i,r={}){return this.request("POST",t,ql(r,i))}put(t,i,r={}){return this.request("PUT",t,ql(r,i))}static{this.\u0275fac=function(i){return new(i||n)(V(Gl))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();var Xl=class extends G_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Zl=class n extends Xl{static makeCurrent(){q_(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=bA();return t==null?null:TA(t)}resetBaseElement(){Ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Q_(document.cookie,e)}},Ns=null;function bA(){return Ns=Ns||document.querySelector("base"),Ns?Ns.getAttribute("href"):null}function TA(n){return new URL(n,document.baseURI).pathname}var eh=class{addToWindow(e){Cn.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new pe(5103,!1);return s},Cn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Cn.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=Cn.getAllAngularTestabilities(),s=r.length,o=function(){s--,s==0&&i()};r.forEach(c=>{c.whenStable(o)})};Cn.frameworkStabilizers||(Cn.frameworkStabilizers=[]),Cn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?ci().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},AA=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),th=new ee(""),uv=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new pe(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(V(th),V(Ee))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Va=class{constructor(e){this._doc=e}},Yl="ng-app-id",lv=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zl(s),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Yl}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(Yl),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(Yl,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(V(Ne),V(bs),V(Ts,8),V(Yt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Jl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ih=/%COMP%/g,hv="%COMP%",SA=`_nghost-${hv}`,CA=`_ngcontent-${hv}`,RA=!0,DA=new ee("",{providedIn:"root",factory:()=>RA});function PA(n){return CA.replace(ih,n)}function kA(n){return SA.replace(ih,n)}function dv(n,e){return e.map(t=>t.replace(ih,n))}var Fa=(()=>{class n{constructor(t,i,r,s,o,c,u,h=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=zl(c),this.defaultRenderer=new Os(t,o,u,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Es.ShadowDom&&(i=fe(M({},i),{encapsulation:Es.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof Ua?r.applyToHost(t):r instanceof Ms&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Es.Emulated:s=new Ua(u,h,i,this.appId,f,o,c,g);break;case Es.ShadowDom:return new nh(u,h,t,i,o,c,this.nonce,g);default:s=new Ms(u,h,i,f,o,c,g);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(V(uv),V(lv),V(bs),V(DA),V(Ne),V(Yt),V(Ee),V(Ts))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Os=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Jl[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(av(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(av(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new pe(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Jl[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Jl[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(As.DashCase|As.Important)?e.style.setProperty(t,i,r&As.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&As.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=ci().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function av(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var nh=class extends Os{constructor(e,t,i,r,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=dv(r.id,r.styles);for(let f of h){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ms=class extends Os{constructor(e,t,i,r,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=u?dv(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ua=class extends Ms{constructor(e,t,i,r,s,o,c,u){let h=r+"-"+i.id;super(e,t,i,s,o,c,u,h),this.contentAttr=PA(h),this.hostAttr=kA(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},NA=(()=>{class n extends Va{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(V(Ne))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),cv=["alt","control","meta","shift"],OA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MA={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xA=(()=>{class n extends Va{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ci().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),o="code."),cv.forEach(h=>{let f=i.indexOf(h);f>-1&&(i.splice(f,1),o+=h+".")}),o+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=r,u.fullKey=o,u}static matchEventFullKeyCode(t,i){let r=OA[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),cv.forEach(o=>{if(o!==r){let c=MA[o];c(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(V(Ne))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function LA(){Zl.makeCurrent()}function VA(){return new si}function FA(){return y_(document),document}var UA=[{provide:Yt,useValue:J_},{provide:I_,useValue:LA,multi:!0},{provide:Ne,useFactory:FA,deps:[]}],fv=j_(B_,"browser",UA),jA=new ee(""),BA=[{provide:Pa,useClass:eh,deps:[]},{provide:F_,useClass:ka,deps:[Ee,Ul,Pa]},{provide:ka,useClass:ka,deps:[Ee,Ul,Pa]}],$A=[{provide:__,useValue:"root"},{provide:si,useFactory:VA,deps:[]},{provide:th,useClass:NA,multi:!0,deps:[Ne,Ee,Yt]},{provide:th,useClass:xA,multi:!0,deps:[Ne]},Fa,lv,uv,{provide:Ta,useExisting:Fa},{provide:ev,useClass:AA,deps:[]},[]],pv=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:bs,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(V(jA,12))}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({providers:[...$A,...BA],imports:[Ji,$_]})}}return n})();var mv=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(V(Ne))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=V(zA),r},providedIn:"root"})}}return n})(),zA=(()=>{class n extends rh{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case ht.NONE:return i;case ht.HTML:return Hi(i,"HTML")?Wi(i):C_(this._doc,String(i)).toString();case ht.STYLE:return Hi(i,"Style")?Wi(i):i;case ht.SCRIPT:if(Hi(i,"Script"))return Wi(i);throw new pe(5200,!1);case ht.URL:return Hi(i,"URL")?Wi(i):S_(String(i));case ht.RESOURCE_URL:if(Hi(i,"ResourceURL"))return Wi(i);throw new pe(5201,!1);default:throw new pe(5202,!1)}}bypassSecurityTrustHtml(t){return w_(t)}bypassSecurityTrustStyle(t){return E_(t)}bypassSecurityTrustScript(t){return b_(t)}bypassSecurityTrustUrl(t){return T_(t)}bypassSecurityTrustResourceUrl(t){return A_(t)}static{this.\u0275fac=function(i){return new(i||n)(V(Ne))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Z="primary",Qs=Symbol("RouteTitle"),lh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function rr(n){return new lh(n)}function WA(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function HA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xt(n[t],e[t]))return!1;return!0}function xt(n,e){let t=n?hh(n):void 0,i=e?hh(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Sv(n[r],e[r]))return!1;return!0}function hh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Sv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function Cv(n){return n.length>0?n[n.length-1]:null}function Vn(n){return c_(n)?n:Na(n)?De(Promise.resolve(n)):U(n)}var KA={exact:Dv,subset:Pv},Rv={exact:QA,subset:YA,ignored:()=>!0};function gv(n,e,t){return KA[t.paths](n.root,e.root,t.matrixParams)&&Rv[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function QA(n,e){return xt(n,e)}function Dv(n,e,t){if(!li(n.segments,e.segments)||!$a(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!Dv(n.children[i],e.children[i],t))return!1;return!0}function YA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Sv(n[t],e[t]))}function Pv(n,e,t){return kv(n,e,e.segments,t)}function kv(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!li(r,t)||e.hasChildren()||!$a(r,t,i))}else if(n.segments.length===t.length){if(!li(n.segments,t)||!$a(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Pv(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!li(n.segments,r)||!$a(n.segments,r,i)||!n.children[Z]?!1:kv(n.children[Z],e,s,i)}}function $a(n,e,t){return e.every((i,r)=>Rv[t](n[r].parameters,i.parameters))}var Xt=class{constructor(e=new le([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=rr(this.queryParams),this._queryParamMap}toString(){return ZA.serialize(this)}},le=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return za(this)}},ui=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=rr(this.parameters),this._parameterMap}toString(){return Ov(this)}};function JA(n,e){return li(n,e)&&n.every((t,i)=>xt(t.parameters,e[i].parameters))}function li(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function XA(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Z&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Z&&(t=t.concat(e(r,i)))}),t}var Ys=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>new sr,providedIn:"root"})}}return n})(),sr=class{parse(e){let t=new fh(e);return new Xt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${xs(e.root,!0)}`,i=n0(e.queryParams),r=typeof e.fragment=="string"?`#${e0(e.fragment)}`:"";return`${t}${i}${r}`}},ZA=new sr;function za(n){return n.segments.map(e=>Ov(e)).join("/")}function xs(n,e){if(!n.hasChildren())return za(n);if(e){let t=n.children[Z]?xs(n.children[Z],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Z&&i.push(`${r}:${xs(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=XA(n,(i,r)=>r===Z?[xs(n.children[Z],!1)]:[`${r}:${xs(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Z]!=null?`${za(n)}/${t[0]}`:`${za(n)}/(${t.join("//")})`}}function Nv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ja(n){return Nv(n).replace(/%3B/gi,";")}function e0(n){return encodeURI(n)}function dh(n){return Nv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qa(n){return decodeURIComponent(n)}function _v(n){return qa(n.replace(/\+/g,"%20"))}function Ov(n){return`${dh(n.path)}${t0(n.parameters)}`}function t0(n){return Object.entries(n).map(([e,t])=>`;${dh(e)}=${dh(t)}`).join("")}function n0(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${ja(t)}=${ja(r)}`).join("&"):`${ja(t)}=${ja(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var i0=/^[^\/()?;#]+/;function oh(n){let e=n.match(i0);return e?e[0]:""}var r0=/^[^\/()?;=#]+/;function s0(n){let e=n.match(r0);return e?e[0]:""}var o0=/^[^=?&#]+/;function a0(n){let e=n.match(o0);return e?e[0]:""}var c0=/^[^&#]+/;function u0(n){let e=n.match(c0);return e?e[0]:""}var fh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new le([],{}):new le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Z]=new le(e,t)),i}parseSegment(){let e=oh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new pe(4009,!1);return this.capture(e),new ui(qa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=s0(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=oh(this.remaining);r&&(i=r,this.capture(i))}e[qa(t)]=qa(i)}parseQueryParam(e){let t=a0(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=u0(this.remaining);o&&(i=o,this.capture(i))}let r=_v(t),s=_v(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=oh(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new pe(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Z);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Z]:new le([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new pe(4011,!1)}};function Mv(n){return n.segments.length>0?new le([],{[Z]:n}):n}function xv(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=xv(r);if(i===Z&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new le(n.segments,e);return l0(t)}function l0(n){if(n.numberOfChildren===1&&n.children[Z]){let e=n.children[Z];return new le(n.segments.concat(e.segments),e.children)}return n}function Bs(n){return n instanceof Xt}function h0(n,e,t=null,i=null){let r=Lv(n);return Vv(r,e,t,i)}function Lv(n){let e;function t(s){let o={};for(let u of s.children){let h=t(u);o[u.outlet]=h}let c=new le(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=Mv(i);return e??r}function Vv(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return ah(r,r,r,t,i);let s=d0(e);if(s.toRoot())return ah(r,r,new le([],{}),t,i);let o=f0(s,r,n),c=o.processChildren?Fs(o.segmentGroup,o.index,s.commands):Uv(o.segmentGroup,o.index,s.commands);return ah(r,o.segmentGroup,c,t,i)}function Ga(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function $s(n){return typeof n=="object"&&n!=null&&n.outlets}function ah(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([u,h])=>{s[u]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let o;n===e?o=t:o=Fv(n,e,t);let c=Mv(xv(o));return new Xt(c,s,r)}function Fv(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=Fv(s,e,t)}),new le(n.segments,i)}var Wa=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ga(i[0]))throw new pe(4003,!1);let r=i.find($s);if(r&&r!==Cv(i))throw new pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function d0(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Wa(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,h])=>{c[u]=typeof h=="string"?h.split("/"):h}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Wa(t,e,i)}var tr=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function f0(n,e,t){if(n.isAbsolute)return new tr(e,!0,0);if(!t)return new tr(e,!1,NaN);if(t.parent===null)return new tr(t,!0,0);let i=Ga(n.commands[0])?0:1,r=t.segments.length-1+i;return p0(t,r,n.numberOfDoubleDots)}function p0(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new pe(4005,!1);r=i.segments.length}return new tr(i,!1,r-s)}function m0(n){return $s(n[0])?n[0].outlets:{[Z]:n}}function Uv(n,e,t){if(n??=new le([],{}),n.segments.length===0&&n.hasChildren())return Fs(n,e,t);let i=g0(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new le(n.segments.slice(0,i.pathIndex),{});return s.children[Z]=new le(n.segments.slice(i.pathIndex),n.children),Fs(s,0,r)}else return i.match&&r.length===0?new le(n.segments,{}):i.match&&!n.hasChildren()?ph(n,e,t):i.match?Fs(n,0,r):ph(n,e,t)}function Fs(n,e,t){if(t.length===0)return new le(n.segments,{});{let i=m0(t),r={};if(Object.keys(i).some(s=>s!==Z)&&n.children[Z]&&n.numberOfChildren===1&&n.children[Z].segments.length===0){let s=Fs(n.children[Z],e,t);return new le(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Uv(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new le(n.segments,r)}}function g0(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if($s(c))break;let u=`${c}`,h=i<t.length-1?t[i+1]:null;if(r>0&&u===void 0)break;if(u&&h&&typeof h=="object"&&h.outlets===void 0){if(!yv(u,h,o))return s;i+=2}else{if(!yv(u,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function ph(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if($s(s)){let u=_0(s.outlets);return new le(i,u)}if(r===0&&Ga(t[0])){let u=n.segments[e];i.push(new ui(u.path,vv(t[0]))),r++;continue}let o=$s(s)?s.outlets[Z]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&Ga(c)?(i.push(new ui(o,vv(c))),r+=2):(i.push(new ui(o,{})),r++)}return new le(i,{})}function _0(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=ph(new le([],{}),0,i))}),e}function vv(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function yv(n,e,t){return n==t.path&&xt(e,t.parameters)}var Us="imperative",Ue=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ue||{}),vt=class{constructor(e,t){this.id=e,this.url=t}},or=class extends vt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Ue.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zt=class extends vt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Ue.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(pt||{}),Ha=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ha||{}),Jt=class extends vt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Ue.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xn=class extends vt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Ue.NavigationSkipped}},zs=class extends vt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Ue.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ka=class extends vt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ue.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mh=class extends vt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ue.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class extends vt{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Ue.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_h=class extends vt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ue.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class extends vt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ue.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yh=class{constructor(e){this.route=e,this.type=Ue.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ih=class{constructor(e){this.route=e,this.type=Ue.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wh=class{constructor(e){this.snapshot=e,this.type=Ue.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Eh=class{constructor(e){this.snapshot=e,this.type=Ue.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bh=class{constructor(e){this.snapshot=e,this.type=Ue.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Th=class{constructor(e){this.snapshot=e,this.type=Ue.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qa=class{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=Ue.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},qs=class{},ar=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function v0(n,e){return n.providers&&!n._injector&&(n._injector=Ml(n.providers,e,`Route: ${n.path}`)),n._injector??e}function At(n){return n.outlet||Z}function y0(n,e){let t=n.filter(i=>At(i)===e);return t.push(...n.filter(i=>At(i)!==e)),t}function Js(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ah=class{get injector(){return Js(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Xs(this.rootInjector),this.attachRef=null}},Xs=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Ah(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(V(zi))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ya=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Sh(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Sh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Ch(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Ch(e,this._root).map(t=>t.value)}};function Sh(n,e){if(n===e.value)return e;for(let t of e.children){let i=Sh(n,t);if(i)return i}return null}function Ch(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Ch(n,t);if(i.length)return i.unshift(e),i}return[]}var ft=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function er(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ja=class extends Ya{constructor(e,t){super(e),this.snapshot=t,Lh(this,e)}toString(){return this.snapshot.toString()}};function jv(n){let e=I0(n),t=new _t([new ui("",{})]),i=new _t({}),r=new _t({}),s=new _t({}),o=new _t(""),c=new Ln(t,i,s,o,r,Z,n,e.root);return c.snapshot=e.root,new Ja(new ft(c,[]),e)}function I0(n){let e={},t={},i={},r="",s=new nr([],e,i,r,t,Z,n,null,{});return new Za("",new ft(s,[]))}var Ln=class{constructor(e,t,i,r,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(q(h=>h[Qs]))??U(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(q(e=>rr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(q(e=>rr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xa(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),r?.data),n._resolvedData)}:i={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},r&&$v(r)&&(i.resolve[Qs]=r.title),i}var nr=class{get title(){return this.data?.[Qs]}constructor(e,t,i,r,s,o,c,u,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Za=class extends Ya{constructor(e,t){super(t),this.url=e,Lh(this,t)}toString(){return Bv(this._root)}};function Lh(n,e){e.value._routerState=n,e.children.forEach(t=>Lh(n,t))}function Bv(n){let e=n.children.length>0?` { ${n.children.map(Bv).join(", ")} } `:"";return`${n.value}${e}`}function ch(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),xt(e.params,t.params)||n.paramsSubject.next(t.params),HA(e.url,t.url)||n.urlSubject.next(t.url),xt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Rh(n,e){let t=xt(n.params,e.params)&&JA(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Rh(n.parent,e.parent))}function $v(n){return typeof n.title=="string"||n.title===null}var Vh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Z,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=j(Xs),this.location=j(P_),this.changeDetector=j(Yi),this.inputBinder=j(rc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new pe(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Dh(t,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qi]})}}return n})(),Dh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ln?this.route:e===Xs?this.childContexts:this.parent.get(e,t)}},rc=new ee(""),Iv=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=Bi([i.queryParams,i.params,i.data]).pipe(Je(([s,o,c],u)=>(c=M(M(M({},s),o),c),u===0?U(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let o=z_(i.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function w0(n,e,t){let i=Gs(n,e._root,t?t._root:void 0);return new Ja(i,e)}function Gs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=E0(n,e,t);return new ft(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Gs(n,c)),o}}let i=b0(e.value),r=e.children.map(s=>Gs(n,s));return new ft(i,r)}}function E0(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Gs(n,i,r);return Gs(n,i)})}function b0(n){return new Ln(new _t(n.url),new _t(n.params),new _t(n.queryParams),new _t(n.fragment),new _t(n.data),n.outlet,n.component,n)}var Ws=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},zv="ngNavigationCancelingError";function ec(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Bs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=qv(!1,pt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function qv(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[zv]=!0,t.cancellationCode=e,t}function T0(n){return Gv(n)&&Bs(n.url)}function Gv(n){return!!n&&n[zv]}var A0=(n,e,t,i)=>q(r=>(new Ph(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Ph=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),ch(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=er(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=er(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=er(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=er(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Th(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Eh(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(ch(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),ch(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},tc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ir=class{constructor(e,t){this.component=e,this.route=t}};function S0(n,e,t){let i=n._root,r=e?e._root:null;return Ls(i,r,t,[i.value])}function C0(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ur(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!g_(n)?n:e.get(n):i}function Ls(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=er(e);return n.children.forEach(o=>{R0(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>js(c,t.getContext(o),r)),r}function R0(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=D0(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new tc(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ls(n,e,c?c.children:null,i,r):Ls(n,e,t,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new ir(c.outlet.component,o))}else o&&js(e,c,r),r.canActivateChecks.push(new tc(i)),s.component?Ls(n,null,c?c.children:null,i,r):Ls(n,null,t,i,r);return r}function D0(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!li(n.url,e.url);case"pathParamsOrQueryParamsChange":return!li(n.url,e.url)||!xt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rh(n,e)||!xt(n.queryParams,e.queryParams);case"paramsChange":default:return!Rh(n,e)}}function js(n,e,t){let i=er(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?js(o,e.children.getContext(s),t):js(o,null,t):js(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ir(e.outlet.component,r)):t.canDeactivateChecks.push(new ir(null,r)):t.canDeactivateChecks.push(new ir(null,r))}function Zs(n){return typeof n=="function"}function P0(n){return typeof n=="boolean"}function k0(n){return n&&Zs(n.canLoad)}function N0(n){return n&&Zs(n.canActivate)}function O0(n){return n&&Zs(n.canActivateChild)}function M0(n){return n&&Zs(n.canDeactivate)}function x0(n){return n&&Zs(n.canMatch)}function Wv(n){return n instanceof u_||n?.name==="EmptyError"}var Ba=Symbol("INITIAL_VALUE");function cr(){return Je(n=>Bi(n.map(e=>e.pipe(kt(1),Ea(Ba)))).pipe(q(e=>{for(let t of e)if(t!==!0){if(t===Ba)return Ba;if(t===!1||L0(t))return t}return!0}),bt(e=>e!==Ba),kt(1)))}function L0(n){return Bs(n)||n instanceof Ws}function V0(n,e){return lt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?U(fe(M({},t),{guardsResult:!0})):F0(o,i,r,n).pipe(lt(c=>c&&P0(c)?U0(i,s,n,e):U(c)),q(c=>fe(M({},t),{guardsResult:c})))})}function F0(n,e,t,i){return De(n).pipe(lt(r=>q0(r.component,r.route,t,e,i)),Sn(r=>r!==!0,!0))}function U0(n,e,t,i){return De(e).pipe(An(r=>Ia(B0(r.route.parent,i),j0(r.route,i),z0(n,r.path,t),$0(n,r.route,t))),Sn(r=>r!==!0,!0))}function j0(n,e){return n!==null&&e&&e(new bh(n)),U(!0)}function B0(n,e){return n!==null&&e&&e(new wh(n)),U(!0)}function $0(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return U(!0);let r=i.map(s=>Cl(()=>{let o=Js(e)??t,c=ur(s,o),u=N0(c)?c.canActivate(e,n):Ot(o,()=>c(e,n));return Vn(u).pipe(Sn())}));return U(r).pipe(cr())}function z0(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>C0(o)).filter(o=>o!==null).map(o=>Cl(()=>{let c=o.guards.map(u=>{let h=Js(o.node)??t,f=ur(u,h),g=O0(f)?f.canActivateChild(i,n):Ot(h,()=>f(i,n));return Vn(g).pipe(Sn())});return U(c).pipe(cr())}));return U(s).pipe(cr())}function q0(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return U(!0);let o=s.map(c=>{let u=Js(e)??r,h=ur(c,u),f=M0(h)?h.canDeactivate(n,e,t,i):Ot(u,()=>h(n,e,t,i));return Vn(f).pipe(Sn())});return U(o).pipe(cr())}function G0(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return U(!0);let s=r.map(o=>{let c=ur(o,n),u=k0(c)?c.canLoad(e,t):Ot(n,()=>c(e,t));return Vn(u)});return U(s).pipe(cr(),Hv(i))}function Hv(n){return s_(Ae(e=>{if(typeof e!="boolean")throw ec(n,e)}),q(e=>e===!0))}function W0(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return U(!0);let s=r.map(o=>{let c=ur(o,n),u=x0(c)?c.canMatch(e,t):Ot(n,()=>c(e,t));return Vn(u)});return U(s).pipe(cr(),Hv(i))}var Hs=class{constructor(e){this.segmentGroup=e||null}},Ks=class extends Error{constructor(e){super(),this.urlTree=e}};function Zi(n){return ii(new Hs(n))}function H0(n){return ii(new pe(4e3,!1))}function K0(n){return ii(qv(!1,pt.GuardRejected))}var kh=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return U(i);if(r.numberOfChildren>1||!r.children[Z])return H0(`${e.redirectTo}`);r=r.children[Z]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:h,routeConfig:f,url:g,outlet:I,params:S,data:D,title:N}=r,P=Ot(s,()=>c({params:S,data:D,queryParams:u,fragment:h,routeConfig:f,url:g,outlet:I,title:N}));if(P instanceof Xt)throw new Ks(P);t=P}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Ks(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Xt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,i,r)}),new le(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new pe(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Nh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Q0(n,e,t,i,r){let s=Kv(n,e,t);return s.matched?(i=v0(e,i),W0(i,e,t,r).pipe(q(o=>o===!0?s:M({},Nh)))):U(s)}function Kv(n,e,t){if(e.path==="**")return Y0(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},Nh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||WA)(t,n,e);if(!r)return M({},Nh);let s={};Object.entries(r.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=r.consumed.length>0?M(M({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Y0(n){return{matched:!0,parameters:n.length>0?Cv(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wv(n,e,t,i){return t.length>0&&Z0(n,t,i)?{segmentGroup:new le(e,X0(i,new le(t,n.children))),slicedSegments:[]}:t.length===0&&eS(n,t,i)?{segmentGroup:new le(n.segments,J0(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new le(n.segments,n.children),slicedSegments:t}}function J0(n,e,t,i){let r={};for(let s of t)if(sc(n,e,s)&&!i[At(s)]){let o=new le([],{});r[At(s)]=o}return M(M({},i),r)}function X0(n,e){let t={};t[Z]=e;for(let i of n)if(i.path===""&&At(i)!==Z){let r=new le([],{});t[At(i)]=r}return t}function Z0(n,e,t){return t.some(i=>sc(n,e,i)&&At(i)!==Z)}function eS(n,e,t){return t.some(i=>sc(n,e,i))}function sc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tS(n,e,t){return e.length===0&&!n.children[t]}var Oh=class{};function nS(n,e,t,i,r,s,o="emptyOnly"){return new Mh(n,e,t,i,r,o,s).recognize()}var iS=31,Mh=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new kh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new pe(4002,`'${e.segmentGroup}'`)}recognize(){let e=wv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(q(({children:t,rootSnapshot:i})=>{let r=new ft(i,t),s=new Za("",r),o=h0(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new nr([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,t).pipe(q(i=>({children:i,rootSnapshot:t})),Tn(i=>{if(i instanceof Ks)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Hs?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(q(o=>o instanceof ft?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return De(s).pipe(An(o=>{let c=i.children[o],u=y0(t,o);return this.processSegmentGroup(e,u,c,o,r)}),f_((o,c)=>(o.push(...c),o)),Rl(null),d_(),lt(o=>{if(o===null)return Zi(i);let c=Qv(o);return rS(c),U(c)}))}processSegment(e,t,i,r,s,o,c){return De(t).pipe(An(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,i,r,s,o,c).pipe(Tn(h=>{if(h instanceof Hs)return U(null);throw h}))),Sn(u=>!!u),Tn(u=>{if(Wv(u))return tS(i,r,s)?U(new Oh):Zi(i);throw u}))}processSegmentAgainstRoute(e,t,i,r,s,o,c,u){return At(i)!==o&&(o===Z||!sc(r,s,i))?Zi(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,u):Zi(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,c){let{matched:u,parameters:h,consumedSegments:f,positionalParamSegments:g,remainingSegments:I}=Kv(t,r,s);if(!u)return Zi(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>iS&&(this.allowRedirects=!1));let S=new nr(s,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Ev(r),At(r),r.component??r._loadedComponent??null,r,bv(r)),D=Xa(S,c,this.paramsInheritanceStrategy);S.params=Object.freeze(D.params),S.data=Object.freeze(D.data);let N=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,g,S,e);return this.applyRedirects.lineralizeSegments(r,N).pipe(lt(P=>this.processSegment(e,i,t,P.concat(I),o,!1,c)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let c=Q0(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),c.pipe(Je(u=>u.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Je(({routes:h})=>{let f=i._loadedInjector??e,{parameters:g,consumedSegments:I,remainingSegments:S}=u,D=new nr(I,g,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Ev(i),At(i),i.component??i._loadedComponent??null,i,bv(i)),N=Xa(D,o,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:P,slicedSegments:W}=wv(t,I,S,h);if(W.length===0&&P.hasChildren())return this.processChildren(f,h,P,D).pipe(q(Y=>new ft(D,Y)));if(h.length===0&&W.length===0)return U(new ft(D,[]));let Q=At(i)===s;return this.processSegment(f,h,P,W,Q?Z:s,!0,D).pipe(q(Y=>new ft(D,Y instanceof ft?[Y]:[])))}))):Zi(t)))}getChildConfig(e,t,i){return t.children?U({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?U({routes:t._loadedRoutes,injector:t._loadedInjector}):G0(e,t,i,this.urlSerializer).pipe(lt(r=>r?this.configLoader.loadChildren(e,t).pipe(Ae(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):K0(t))):U({routes:[],injector:e})}};function rS(n){n.sort((e,t)=>e.value.outlet===Z?-1:t.value.outlet===Z?1:e.value.outlet.localeCompare(t.value.outlet))}function sS(n){let e=n.value.routeConfig;return e&&e.path===""}function Qv(n){let e=[],t=new Set;for(let i of n){if(!sS(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Qv(i.children);e.push(new ft(i.value,r))}return e.filter(i=>!t.has(i))}function Ev(n){return n.data||{}}function bv(n){return n.resolve||{}}function oS(n,e,t,i,r,s){return lt(o=>nS(n,e,t,i,o.extractedUrl,r,s).pipe(q(({state:c,tree:u})=>fe(M({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function aS(n,e){return lt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return U(t);let s=new Set(r.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let h of Yv(u))o.add(h);let c=0;return De(o).pipe(An(u=>s.has(u)?cS(u,i,n,e):(u.data=Xa(u,u.parent,n).resolve,U(void 0))),Ae(()=>c++),Dl(1),lt(u=>c===o.size?U(t):bn))})}function Yv(n){let e=n.children.map(t=>Yv(t)).flat();return[n,...e]}function cS(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!$v(r)&&(s[Qs]=r.title),uS(s,n,e,i).pipe(q(o=>(n._resolvedData=o,n.data=Xa(n,n.parent,t).resolve,null)))}function uS(n,e,t,i){let r=hh(n);if(r.length===0)return U({});let s={};return De(r).pipe(lt(o=>lS(n[o],e,t,i).pipe(Sn(),Ae(c=>{if(c instanceof Ws)throw ec(new sr,c);s[o]=c}))),Dl(1),h_(s),Tn(o=>Wv(o)?bn:ii(o)))}function lS(n,e,t,i){let r=Js(e)??i,s=ur(n,r),o=s.resolve?s.resolve(e,t):Ot(r,()=>s(e,t));return Vn(o)}function uh(n){return Je(e=>{let t=n(e);return t?De(t).pipe(q(()=>e)):U(e)})}var Jv=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Z);return i}getResolvedTitleForRoute(t){return t.data[Qs]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>j(hS),providedIn:"root"})}}return n})(),hS=(()=>{class n extends Jv{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(V(mv))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eo=new ee("",{providedIn:"root",factory:()=>({})}),dS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["ng-component"]],standalone:!0,features:[Rs],decls:1,vars:0,template:function(i,r){i&1&&ke(0,"router-outlet")},dependencies:[Vh],encapsulation:2})}}return n})();function Fh(n){let e=n.children&&n.children.map(Fh),t=e?fe(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Z&&(t.component=dS),t}var nc=new ee(""),Uh=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Oa)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return U(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Vn(t.loadComponent()).pipe(q(Xv),Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ri(()=>{this.componentLoaders.delete(t)})),r=new bl(i,()=>new st).pipe(El());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return U({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=fS(i,this.compiler,t,this.onLoadEndListener).pipe(ri(()=>{this.childrenLoaders.delete(i)})),o=new bl(s,()=>new st).pipe(El());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fS(n,e,t,i){return Vn(n.loadChildren()).pipe(q(Xv),lt(r=>r instanceof N_||Array.isArray(r)?U(r):De(e.compileModuleAsync(r))),q(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(nc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Fh),injector:s}}))}function pS(n){return n&&typeof n=="object"&&"default"in n}function Xv(n){return pS(n)?n.default:n}var jh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>j(mS),providedIn:"root"})}}return n})(),mS=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zv=new ee(""),ey=new ee("");function gS(n,e,t){let i=n.get(ey),r=n.get(Ne);return n.get(Ee).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(h=>setTimeout(h));let s,o=new Promise(h=>{s=h}),c=r.startViewTransition(()=>(s(),_S(n))),{onViewTransitionCreated:u}=i;return u&&Ot(n,()=>u({transition:c,from:e,to:t})),o})}function _S(n){return new Promise(e=>{O_({read:()=>setTimeout(e)},{injector:n})})}var vS=new ee(""),Bh=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new st,this.transitionAbortSubject=new st,this.configLoader=j(Uh),this.environmentInjector=j(zi),this.urlSerializer=j(Ys),this.rootContexts=j(Xs),this.location=j(Ps),this.inputBindingEnabled=j(rc,{optional:!0})!==null,this.titleStrategy=j(Jv),this.options=j(eo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(jh),this.createViewTransition=j(Zv,{optional:!0}),this.navigationErrorHandler=j(vS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>U(void 0),this.rootComponentType=null;let t=r=>this.events.next(new yh(r)),i=r=>this.events.next(new Ih(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(fe(M(M({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new _t({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Us,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bt(s=>s.id!==0),q(s=>fe(M({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Je(s=>{let o=!1,c=!1;return U(s).pipe(Je(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",pt.SupersededByNewNavigation),bn;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?fe(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!h&&f!=="reload"){let g="";return this.events.next(new xn(u.id,this.urlSerializer.serialize(u.rawUrl),g,Ha.IgnoredSameUrlNavigation)),u.resolve(!1),bn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return U(u).pipe(Je(g=>{let I=this.transitions?.getValue();return this.events.next(new or(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),I!==this.transitions?.getValue()?bn:Promise.resolve(g)}),oS(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ae(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=fe(M({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let I=new Ka(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(I)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:I,source:S,restoredState:D,extras:N}=u,P=new or(g,this.urlSerializer.serialize(I),S,D);this.events.next(P);let W=jv(this.rootComponentType).snapshot;return this.currentTransition=s=fe(M({},u),{targetSnapshot:W,urlAfterRedirects:I,extras:fe(M({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,U(s)}else{let g="";return this.events.next(new xn(u.id,this.urlSerializer.serialize(u.extractedUrl),g,Ha.IgnoredByUrlHandlingStrategy)),u.resolve(!1),bn}}),Ae(u=>{let h=new mh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),q(u=>(this.currentTransition=s=fe(M({},u),{guards:S0(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),V0(this.environmentInjector,u=>this.events.next(u)),Ae(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ec(this.urlSerializer,u.guardsResult);let h=new gh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),bt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",pt.GuardRejected),!1)),uh(u=>{if(u.guards.canActivateChecks.length)return U(u).pipe(Ae(h=>{let f=new _h(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),Je(h=>{let f=!1;return U(h).pipe(aS(this.paramsInheritanceStrategy,this.environmentInjector),Ae({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",pt.NoDataFromResolver)}}))}),Ae(h=>{let f=new vh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),uh(u=>{let h=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ae(I=>{f.component=I}),q(()=>{})));for(let I of f.children)g.push(...h(I));return g};return Bi(h(u.targetSnapshot.root)).pipe(Rl(null),kt(1))}),uh(()=>this.afterPreactivation()),Je(()=>{let{currentSnapshot:u,targetSnapshot:h}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return f?De(f).pipe(q(()=>s)):U(s)}),q(u=>{let h=w0(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=fe(M({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),Ae(()=>{this.events.next(new qs)}),A0(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),kt(1),Ae({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zt(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),$i(this.transitionAbortSubject.pipe(Ae(u=>{throw u}))),ri(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",pt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tn(u=>{if(c=!0,Gv(u))this.events.next(new Jt(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),T0(u)?this.events.next(new ar(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let h=new zs(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let f=Ot(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(f instanceof Ws){let{message:g,cancellationCode:I}=ec(this.urlSerializer,f);this.events.next(new Jt(s.id,this.urlSerializer.serialize(s.extractedUrl),g,I)),this.events.next(new ar(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(h);let g=t.errorHandler(u);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return bn}))}))}cancelNavigationTransition(t,i,r){let s=new Jt(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yS(n){return n!==Us}var IS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>j(wS),providedIn:"root"})}}return n})(),xh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},wS=(()=>{class n extends xh{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Gi(n)))(r||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ty=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>j(ES),providedIn:"root"})}}return n})(),ES=(()=>{class n extends ty{constructor(){super(...arguments),this.location=j(Ps),this.urlSerializer=j(Ys),this.options=j(eo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(jh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=jv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof or)this.stateMemento=this.createStateMemento();else if(t instanceof xn)this.rawUrlTree=i.initialUrl;else if(t instanceof Ka){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof qs?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Jt&&(t.code===pt.GuardRejected||t.code===pt.NoDataFromResolver)?this.restoreHistory(i):t instanceof zs?this.restoreHistory(i,!0):t instanceof Zt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof Xt?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=M(M({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Gi(n)))(r||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vs=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Vs||{});function ny(n,e){n.events.pipe(bt(t=>t instanceof Zt||t instanceof Jt||t instanceof zs||t instanceof xn),q(t=>t instanceof Zt||t instanceof xn?Vs.COMPLETE:(t instanceof Jt?t.code===pt.Redirect||t.code===pt.SupersededByNewNavigation:!1)?Vs.REDIRECTING:Vs.FAILED),bt(t=>t!==Vs.REDIRECTING),kt(1)).subscribe(()=>{e()})}function bS(n){throw n}var TS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ge=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(Da),this.stateManager=j(ty),this.options=j(eo,{optional:!0})||{},this.pendingTasks=j(v_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(Bh),this.urlSerializer=j(Ys),this.location=j(Ps),this.urlHandlingStrategy=j(jh),this._events=new st,this.errorHandler=this.options.errorHandler||bS,this.navigated=!1,this.routeReuseStrategy=j(IS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(nc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(rc,{optional:!0}),this.eventsSubscription=new ya,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Jt&&i.code!==pt.Redirect&&i.code!==pt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Zt)this.navigated=!0;else if(i instanceof ar){let o=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),u=M({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||yS(r.source)},o);this.scheduleNavigation(c,Us,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}CS(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Us,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let u=M({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Fh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=i,h=u?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=M(M({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let I=r?r.snapshot:this.routerState.snapshot.root;g=Lv(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return Vv(g,t,f,h??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Bs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Us,null,i)}navigate(t,i={skipLocationChange:!1}){return SS(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=M({},TS):i===!1?r=M({},AS):r=i,Bs(t))return gv(this.currentUrlTree,t,r);let s=this.parseUrl(t);return gv(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,h;o?(c=o.resolve,u=o.reject,h=o.promise):h=new Promise((g,I)=>{c=g,u=I});let f=this.pendingTasks.add();return ny(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(g=>Promise.reject(g))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SS(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new pe(4008,!1)}function CS(n){return!(n instanceof qs)&&!(n instanceof ar)}var ic=class{};var RS=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(bt(t=>t instanceof Zt),An(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Ml(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return De(r).pipe(Sl())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=U(null);let s=r.pipe(lt(o=>o===null?U(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return De([s,o]).pipe(Sl())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(V(Ge),V(Oa),V(zi),V(ic),V(Uh))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iy=new ee(""),DS=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof or?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof xn&&t.code===Ha.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Qa&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Qa(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){ba()}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function PS(n){return n.routerState.root}function to(n,e){return{\u0275kind:n,\u0275providers:e}}function kS(){let n=j(Mt);return e=>{let t=n.get(Bl);if(e!==t.components[0])return;let i=n.get(Ge),r=n.get(ry);n.get($h)===1&&i.initialNavigation(),n.get(sy,null,Pl.Optional)?.setUpPreloading(),n.get(iy,null,Pl.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var ry=new ee("",{factory:()=>new st}),$h=new ee("",{providedIn:"root",factory:()=>1});function NS(){return to(2,[{provide:$h,useValue:0},{provide:jl,multi:!0,deps:[Mt],useFactory:e=>{let t=e.get(W_,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=e.get(Ge),s=e.get(ry);ny(r,()=>{i(!0)}),e.get(Bh).afterPreactivation=()=>(i(!0),s.closed?U(void 0):s),r.initialNavigation()}))}}])}function OS(){return to(3,[{provide:jl,multi:!0,useFactory:()=>{let e=j(Ge);return()=>{e.setUpLocationChangeListener()}}},{provide:$h,useValue:2}])}var sy=new ee("");function MS(n){return to(0,[{provide:sy,useExisting:RS},{provide:ic,useExisting:n}])}function xS(){return to(8,[Iv,{provide:rc,useExisting:Iv}])}function LS(n){let e=[{provide:Zv,useValue:gS},{provide:ey,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return to(9,e)}var Tv=new ee("ROUTER_FORROOT_GUARD"),VS=[Ps,{provide:Ys,useClass:sr},Ge,Xs,{provide:Ln,useFactory:PS,deps:[Ge]},Uh,[]],zh=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[VS,[],{provide:nc,multi:!0,useValue:t},{provide:Tv,useFactory:BS,deps:[[Ge,new Xe,new kl]]},{provide:eo,useValue:i||{}},i?.useHash?US():jS(),FS(),i?.preloadingStrategy?MS(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?$S(i):[],i?.bindToComponentInputs?xS().\u0275providers:[],i?.enableViewTransitions?LS().\u0275providers:[],zS()]}}static forChild(t){return{ngModule:n,providers:[{provide:nc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(V(Tv,8))}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({})}}return n})();function FS(){return{provide:iy,useFactory:()=>{let n=j(Z_),e=j(Ee),t=j(eo),i=j(Bh),r=j(Ys);return t.scrollOffset&&n.setOffset(t.scrollOffset),new DS(r,i,n,e,t)}}}function US(){return{provide:$l,useClass:K_}}function jS(){return{provide:$l,useClass:H_}}function BS(n){return"guarded"}function $S(n){return[n.initialNavigation==="disabled"?OS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?NS().\u0275providers:[]]}var Av=new ee("");function zS(){return[{provide:Av,useFactory:kS},{provide:U_,multi:!0,useExisting:Av}]}var oy=(()=>{class n{constructor(t){this.router=t}navigateToOverview(){this.router.navigate(["/overview"])}static{this.\u0275fac=function(i){return new(i||n)(J(Ge))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-landing-page-banner"]],decls:9,vars:0,consts:[[1,"w-full","h-full","flex","justify-between"],[1,"basis-1/2"],["href","https://ibb.co/3Y1Yc00"],["src","https://i.ibb.co/YT2Thtt/back-to-school-happy-pupils-children-learning-computer-reading-books-concept-png.png","alt","back-to-school-happy-pupils-children-learning-computer-reading-books-concept-png"],[1,"basis-1/2","font-fredoka","flex","flex-col","gap-20"],[1,"text-3xl","font-medium","text-center","mt-16"],[1,"bg-indigo-600","text-white","text-xl","font-bold","py-3","rounded-full","hover:bg-green-600",3,"click"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1)(2,"a",2),ke(3,"img",3),B()(),F(4,"div",4)(5,"h1",5),re(6,"Don't you hate it when ur internet traffic gets intercepted by some shady 3 letter agency? No more! Avoid the glowies with this new course."),B(),F(7,"button",6),be("click",function(){return r.navigateToOverview()}),re(8," Get started "),B()()())}})}}return n})();var ay=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-landing-page-testimonials"]],decls:6,vars:0,consts:[[1,"flex","w-full","h-full","overflow-hidden","items-center","justify-center","flex-row","gap-x-10"],["src","https://i.ibb.co/F7kTGBs/1200px-Qubes-OS-Logo-svg-1.png","alt","afbeelding "],["src","https://i.ibb.co/N10MVxf/images-1.png","alt","afbeelding "],["src","https://i.ibb.co/RHvqhDw/GAw-Aix6-X0-AALv-E8-1.png","alt","afbeelding "],["src","https://i.ibb.co/cC44FBT/monero-symbol-1280-1.png","alt","afbeelding "],["src","https://i.ibb.co/8Y89yQm/Tor-logo-2011-flat-svg-1.png","alt","afbeelding "]],template:function(i,r){i&1&&(F(0,"div",0),ke(1,"img",1)(2,"img",2)(3,"img",3)(4,"img",4)(5,"img",5),B())}})}}return n})();var cy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-landing-page-header"]],decls:5,vars:0,consts:[[1,"outline-red-500","min-h-[calc(100vh-4rem)]","flex","items-center","w-full"],[1,"outline-blue-400","w-full","h-96"],[1,"bottom-0","h-20","absolute","left-0","w-full","border-y-2"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1),ke(2,"app-landing-page-banner"),F(3,"div",2),ke(4,"app-landing-page-testimonials"),B()()())},dependencies:[oy,ay]})}}return n})();var uy=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-landing-page"]],decls:2,vars:0,consts:[[1,"px-8","md:px-16","lg:px-32"]],template:function(i,r){i&1&&(F(0,"div",0),ke(1,"app-landing-page-header"),B())},dependencies:[cy]})}}return n})();var hy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},HS=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},dy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,u=r+2<n.length,h=u?n[r+2]:0,f=s>>2,g=(s&3)<<4|c>>4,I=(c&15)<<2|h>>6,S=h&63;u||(S=64,o||(I=64)),i.push(t[f],t[g],t[I],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):HS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let g=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||h==null||g==null)throw new Gh;let I=s<<2|c>>4;if(i.push(I),h!==64){let S=c<<4&240|h>>2;if(i.push(S),g!==64){let D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Gh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},KS=function(n){let e=hy(n);return dy.encodeByteArray(e,!0)},io=function(n){return KS(n).replace(/\./g,"")},Hh=function(n){try{return dy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function QS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var YS=()=>QS().__FIREBASE_DEFAULTS__,JS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},XS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Hh(n[1]);return e&&JSON.parse(e)},ac=()=>{try{return YS()||JS()||XS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kh=n=>{var e,t;return(t=(e=ac())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},fy=n=>{let e=Kh(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Qh=()=>{var n;return(n=ac())===null||n===void 0?void 0:n.config},Yh=n=>{var e;return(e=ac())===null||e===void 0?void 0:e[`_${n}`]};var oc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function py(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[io(JSON.stringify(t)),io(JSON.stringify(o)),""].join(".")}function je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function my(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function ZS(){var n;let e=(n=ac())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _y(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yy(){let n=je();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Iy(){return!ZS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jh(){try{return typeof indexedDB=="object"}catch{return!1}}function wy(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var eC="FirebaseError",mt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=eC,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}},en=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?tC(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new mt(r,c,i)}};function tC(n,e){return n.replace(nC,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var nC=/\{\$([^}]+)}/g;function Ey(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Fn(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(ly(s)&&ly(o)){if(!Fn(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function ly(n){return n!==null&&typeof n=="object"}function ro(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function lr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function hr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function by(n,e){let t=new Wh(n,e);return t.subscribe.bind(t)}var Wh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");iC(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=qh),r.error===void 0&&(r.error=qh),r.complete===void 0&&(r.complete=qh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function iC(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qh(){}var LL=4*60*60*1e3;function Le(n){return n&&n._delegate?n._delegate:n}var yt=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var hi="[DEFAULT]";var Xh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new oc;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sC(e))try{this.getOrInitializeService({instanceIdentifier:hi})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=hi){return this.instances.has(e)}getOptions(e=hi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hi){return this.component?this.component.multipleInstances?e:hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rC(n){return n===hi?void 0:n}function sC(n){return n.instantiationMode==="EAGER"}var cc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Xh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var oC=[],ne=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ne||{}),aC={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},cC=ne.INFO,uC={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},lC=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=uC[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Un=class{constructor(e){this.name=e,this._logLevel=cC,this._logHandler=lC,this._userLogHandler=null,oC.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var hC=(n,e)=>e.some(t=>n instanceof t),Ty,Ay;function dC(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fC(){return Ay||(Ay=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Sy=new WeakMap,ed=new WeakMap,Cy=new WeakMap,Zh=new WeakMap,nd=new WeakMap;function pC(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Lt(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Sy.set(t,n)}).catch(()=>{}),nd.set(e,n),e}function mC(n){if(ed.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ed.set(n,e)}var td={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ed.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Cy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Lt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ry(n){td=n(td)}function gC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(uc(this),e,...t);return Cy.set(i,e.sort?e.sort():[e]),Lt(i)}:fC().includes(n)?function(...e){return n.apply(uc(this),e),Lt(Sy.get(this))}:function(...e){return Lt(n.apply(uc(this),e))}}function _C(n){return typeof n=="function"?gC(n):(n instanceof IDBTransaction&&mC(n),hC(n,dC())?new Proxy(n,td):n)}function Lt(n){if(n instanceof IDBRequest)return pC(n);if(Zh.has(n))return Zh.get(n);let e=_C(n);return e!==n&&(Zh.set(n,e),nd.set(e,n)),e}var uc=n=>nd.get(n);function lc(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=Lt(o);return i&&o.addEventListener("upgradeneeded",u=>{i(Lt(o.result),u.oldVersion,u.newVersion,Lt(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var vC=["get","getKey","getAll","getAllKeys","count"],yC=["put","add","delete","clear"],id=new Map;function Dy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(id.get(e))return id.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=yC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||vC.includes(t)))return;let s=function(o,...c){return m(this,null,function*(){let u=this.transaction(o,r?"readwrite":"readonly"),h=u.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),r&&u.done]))[0]})};return id.set(e,s),s}Ry(n=>fe(M({},n),{get:(e,t,i)=>Dy(e,t)||n.get(e,t,i),has:(e,t)=>!!Dy(e,t)||n.has(e,t)}));var sd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IC(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function IC(n){let e=n.getComponent();return e?.type==="VERSION"}var od="@firebase/app",Py="0.10.13";var tn=new Un("@firebase/app"),wC="@firebase/app-compat",EC="@firebase/analytics-compat",bC="@firebase/analytics",TC="@firebase/app-check-compat",AC="@firebase/app-check",SC="@firebase/auth",CC="@firebase/auth-compat",RC="@firebase/database",DC="@firebase/data-connect",PC="@firebase/database-compat",kC="@firebase/functions",NC="@firebase/functions-compat",OC="@firebase/installations",MC="@firebase/installations-compat",xC="@firebase/messaging",LC="@firebase/messaging-compat",VC="@firebase/performance",FC="@firebase/performance-compat",UC="@firebase/remote-config",jC="@firebase/remote-config-compat",BC="@firebase/storage",$C="@firebase/storage-compat",zC="@firebase/firestore",qC="@firebase/vertexai-preview",GC="@firebase/firestore-compat",WC="firebase",HC="10.14.1";var ad="[DEFAULT]",KC={[od]:"fire-core",[wC]:"fire-core-compat",[bC]:"fire-analytics",[EC]:"fire-analytics-compat",[AC]:"fire-app-check",[TC]:"fire-app-check-compat",[SC]:"fire-auth",[CC]:"fire-auth-compat",[RC]:"fire-rtdb",[DC]:"fire-data-connect",[PC]:"fire-rtdb-compat",[kC]:"fire-fn",[NC]:"fire-fn-compat",[OC]:"fire-iid",[MC]:"fire-iid-compat",[xC]:"fire-fcm",[LC]:"fire-fcm-compat",[VC]:"fire-perf",[FC]:"fire-perf-compat",[UC]:"fire-rc",[jC]:"fire-rc-compat",[BC]:"fire-gcs",[$C]:"fire-gcs-compat",[zC]:"fire-fst",[GC]:"fire-fst-compat",[qC]:"fire-vertex","fire-js":"fire-js",[WC]:"fire-js-all"};var so=new Map,QC=new Map,cd=new Map;function ky(n,e){try{n.container.addComponent(e)}catch(t){tn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bn(n){let e=n.name;if(cd.has(e))return tn.debug(`There were multiple attempts to register component ${e}.`),!1;cd.set(e,n);for(let t of so.values())ky(t,n);for(let t of QC.values())ky(t,n);return!0}function ao(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function St(n){return n.settings!==void 0}var YC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jn=new en("app","Firebase",YC);var ud=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}};var $n=HC;function dd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:ad,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw jn.create("bad-app-name",{appName:String(r)});if(t||(t=Qh()),!t)throw jn.create("no-options");let s=so.get(r);if(s){if(Fn(t,s.options)&&Fn(i,s.config))return s;throw jn.create("duplicate-app",{appName:r})}let o=new cc(r);for(let u of cd.values())o.addComponent(u);let c=new ud(t,i,o);return so.set(r,c),c}function dr(n=ad){let e=so.get(n);if(!e&&n===ad&&Qh())return dd();if(!e)throw jn.create("no-app",{appName:n});return e}function hc(){return Array.from(so.values())}function Ve(n,e,t){var i;let r=(i=KC[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tn.warn(c.join(" "));return}Bn(new yt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var JC="firebase-heartbeat-database",XC=1,oo="firebase-heartbeat-store",rd=null;function xy(){return rd||(rd=lc(JC,XC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oo)}catch(t){console.warn(t)}}}}).catch(n=>{throw jn.create("idb-open",{originalErrorMessage:n.message})})),rd}function ZC(n){return m(this,null,function*(){try{let t=(yield xy()).transaction(oo),i=yield t.objectStore(oo).get(Ly(n));return yield t.done,i}catch(e){if(e instanceof mt)tn.warn(e.message);else{let t=jn.create("idb-get",{originalErrorMessage:e?.message});tn.warn(t.message)}}})}function Ny(n,e){return m(this,null,function*(){try{let i=(yield xy()).transaction(oo,"readwrite");yield i.objectStore(oo).put(e,Ly(n)),yield i.done}catch(t){if(t instanceof mt)tn.warn(t.message);else{let i=jn.create("idb-set",{originalErrorMessage:t?.message});tn.warn(i.message)}}})}function Ly(n){return`${n.name}!${n.options.appId}`}var eR=1024,tR=30*24*60*60*1e3,ld=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new hd(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Oy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=tR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){tn.warn(i)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Oy(),{heartbeatsToSend:i,unsentEntries:r}=nR(this._heartbeatsCache.heartbeats),s=io(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return tn.warn(t),""}})}};function Oy(){return new Date().toISOString().substring(0,10)}function nR(n,e=eR){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),My(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),My(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var hd=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Jh()?wy().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield ZC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ny(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ny(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function My(n){return io(JSON.stringify({version:2,heartbeats:n})).length}function iR(n){Bn(new yt("platform-logger",e=>new sd(e),"PRIVATE")),Bn(new yt("heartbeat",e=>new ld(e),"PRIVATE")),Ve(od,Py,n),Ve(od,Py,"esm2017"),Ve("fire-js","")}iR("");var rR="firebase",sR="10.14.1";Ve(rR,sR,"app");var fi=new Qi("ANGULARFIRE2_VERSION");function fc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var co=(n,e)=>{let t=e?[e]:hc(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},pr=class{constructor(){return co(oR)}},oR="app-check";function fr(){}var dc=class{zone;delegate;constructor(e,t=a_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},fd=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fr,{},fr,fr)),t.pipe(Ae({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},mr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new dc(Zone.current)),this.insideAngular=t.run(()=>new dc(Zone.current,o_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(V(Ee))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function aR(n){return pc().ngZone.runOutsideAngular(()=>n())}function di(n){return pc().ngZone.run(()=>n())}function cR(n){return uR(pc())(n)}function uR(n){return function(t){return t=t.lift(new fd(n.ngZone)),t.pipe(Al(n.outsideAngular),Tl(n.insideAngular))}}var lR=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),di(()=>n.apply(void 0,i))},Be=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=di(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fr,{},fr,fr))),i[s]=lR(i[s],t));let r=aR(()=>n.apply(this,i));if(!e)if(r instanceof En){let s=pc();return r.pipe(Al(s.outsideAngular),Tl(s.insideAngular))}else return di(()=>r);return r instanceof En?r.pipe(cR):r instanceof Promise?di(()=>new Promise((s,o)=>r.then(c=>di(()=>s(c)),c=>di(()=>o(c))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:di(()=>r)};var nn=class{constructor(e){return e}},pi=class{constructor(){return hc()}};function hR(n){return n&&n.length===1?n[0]:new nn(dr())}var pd=new ee("angularfire2._apps"),dR={provide:nn,useFactory:hR,deps:[[new Xe,pd]]},fR={provide:pi,deps:[[new Xe,pd]]};function pR(n){return(e,t)=>{let i=t.get(Yt);Ve("angularfire",fi.full,"core"),Ve("angularfire",fi.full,"app"),Ve("angular",V_.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new nn(r)}}function Vy(n,...e){return Nt([dR,fR,{provide:pd,useFactory:pR(n),multi:!0,deps:[Ee,Mt,mr,...e]}])}var Fy=Be(dd,!0);var Uy=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},mR=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,u=r+2<n.length,h=u?n[r+2]:0,f=s>>2,g=(s&3)<<4|c>>4,I=(c&15)<<2|h>>6,S=h&63;u||(S=64,o||(I=64)),i.push(t[f],t[g],t[I],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Uy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):mR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let h=r<n.length?t[n.charAt(r)]:64;++r;let g=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||h==null||g==null)throw new gd;let I=s<<2|c>>4;if(i.push(I),h!==64){let S=c<<4&240|h>>2;if(i.push(S),g!==64){let D=h<<6&192|g;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},gd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gR=function(n){let e=Uy(n);return jy.encodeByteArray(e,!0)},vd=function(n){return gR(n).replace(/\./g,"")},yd=function(n){try{return jy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _R(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var vR=()=>_R().__FIREBASE_DEFAULTS__,yR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&yd(n[1]);return e&&JSON.parse(e)},wR=()=>{try{return vR()||yR()||IR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var By=n=>{var e;return(e=wR())===null||e===void 0?void 0:e[`_${n}`]};function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function zy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qy(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Gy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wy(){try{return typeof indexedDB=="object"}catch{return!1}}function Hy(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var ER="FirebaseError",Vt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ER,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}},rn=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?bR(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Vt(r,c,i)}};function bR(n,e){return n.replace(TR,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var TR=/\{\$([^}]+)}/g;function Id(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ky(n,e){let t=new _d(n,e);return t.subscribe.bind(t)}var _d=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");AR(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=md),r.error===void 0&&(r.error=md),r.complete===void 0&&(r.complete=md);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function AR(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function md(){}var T1=4*60*60*1e3;function gr(n){return n&&n._delegate?n._delegate:n}var sn=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var SR=[],ve=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ve||{}),CR={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},RR=ve.INFO,DR={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},PR=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=DR[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},_r=class{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=PR,this._userLogHandler=null,SR.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};var Ed=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NR(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function NR(n){let e=n.getComponent();return e?.type==="VERSION"}var bd="@firebase/app",Qy="0.10.17";var on=new _r("@firebase/app"),OR="@firebase/app-compat",MR="@firebase/analytics-compat",xR="@firebase/analytics",LR="@firebase/app-check-compat",VR="@firebase/app-check",FR="@firebase/auth",UR="@firebase/auth-compat",jR="@firebase/database",BR="@firebase/data-connect",$R="@firebase/database-compat",zR="@firebase/functions",qR="@firebase/functions-compat",GR="@firebase/installations",WR="@firebase/installations-compat",HR="@firebase/messaging",KR="@firebase/messaging-compat",QR="@firebase/performance",YR="@firebase/performance-compat",JR="@firebase/remote-config",XR="@firebase/remote-config-compat",ZR="@firebase/storage",eD="@firebase/storage-compat",tD="@firebase/firestore",nD="@firebase/vertexai",iD="@firebase/firestore-compat",rD="firebase",sD="11.1.0";var oD={[bd]:"fire-core",[OR]:"fire-core-compat",[xR]:"fire-analytics",[MR]:"fire-analytics-compat",[VR]:"fire-app-check",[LR]:"fire-app-check-compat",[FR]:"fire-auth",[UR]:"fire-auth-compat",[jR]:"fire-rtdb",[BR]:"fire-data-connect",[$R]:"fire-rtdb-compat",[zR]:"fire-fn",[qR]:"fire-fn-compat",[GR]:"fire-iid",[WR]:"fire-iid-compat",[HR]:"fire-fcm",[KR]:"fire-fcm-compat",[QR]:"fire-perf",[YR]:"fire-perf-compat",[JR]:"fire-rc",[XR]:"fire-rc-compat",[ZR]:"fire-gcs",[eD]:"fire-gcs-compat",[tD]:"fire-fst",[iD]:"fire-fst-compat",[nD]:"fire-vertex","fire-js":"fire-js",[rD]:"fire-js-all"};var aD=new Map,cD=new Map,Yy=new Map;function Jy(n,e){try{n.container.addComponent(e)}catch(t){on.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yr(n){let e=n.name;if(Yy.has(e))return on.debug(`There were multiple attempts to register component ${e}.`),!1;Yy.set(e,n);for(let t of aD.values())Jy(t,n);for(let t of cD.values())Jy(t,n);return!0}function Ir(n){return n.settings!==void 0}var uD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sd=new rn("app","Firebase",uD);var mc=sD;function vr(n,e,t){var i;let r=(i=oD[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),on.warn(c.join(" "));return}yr(new sn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var lD="firebase-heartbeat-database",hD=1,uo="firebase-heartbeat-store",wd=null;function tI(){return wd||(wd=lc(lD,hD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sd.create("idb-open",{originalErrorMessage:n.message})})),wd}function dD(n){return m(this,null,function*(){try{let t=(yield tI()).transaction(uo),i=yield t.objectStore(uo).get(nI(n));return yield t.done,i}catch(e){if(e instanceof Vt)on.warn(e.message);else{let t=Sd.create("idb-get",{originalErrorMessage:e?.message});on.warn(t.message)}}})}function Xy(n,e){return m(this,null,function*(){try{let i=(yield tI()).transaction(uo,"readwrite");yield i.objectStore(uo).put(e,nI(n)),yield i.done}catch(t){if(t instanceof Vt)on.warn(t.message);else{let i=Sd.create("idb-set",{originalErrorMessage:t?.message});on.warn(i.message)}}})}function nI(n){return`${n.name}!${n.options.appId}`}var fD=1024,pD=30*24*60*60*1e3,Td=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ad(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return m(this,null,function*(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=pD}),this._storage.overwrite(this._heartbeatsCache))}catch(i){on.warn(i)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Zy(),{heartbeatsToSend:i,unsentEntries:r}=mD(this._heartbeatsCache.heartbeats),s=vd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return on.warn(t),""}})}};function Zy(){return new Date().toISOString().substring(0,10)}function mD(n,e=fD){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),eI(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),eI(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Ad=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Wy()?Hy().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield dD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Xy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Xy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function eI(n){return vd(JSON.stringify({version:2,heartbeats:n})).length}function gD(n){yr(new sn("platform-logger",e=>new Ed(e),"PRIVATE")),yr(new sn("heartbeat",e=>new Td(e),"PRIVATE")),vr(bd,Qy,n),vr(bd,Qy,"esm2017"),vr("fire-js","")}gD("");function lI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var hI=lI,dI=new rn("auth","Firebase",lI());var yc=new _r("@firebase/auth");function _D(n,...e){yc.logLevel<=ve.WARN&&yc.warn(`Auth (${mc}): ${n}`,...e)}function _c(n,...e){yc.logLevel<=ve.ERROR&&yc.error(`Auth (${mc}): ${n}`,...e)}function iI(n,...e){throw Fd(n,...e)}function Vd(n,...e){return Fd(n,...e)}function fI(n,e,t){let i=Object.assign(Object.assign({},hI()),{[e]:t});return new rn("auth","Firebase",i).create(e,{appName:n.name})}function vc(n){return fI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fd(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return dI.create(n,...e)}function ue(n,e,...t){if(!n)throw Fd(e,...t)}function lo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw _c(e),new Error(e)}function Ic(n,e){n||lo(e)}function vD(){return rI()==="http:"||rI()==="https:"}function rI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function yD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vD()||qy()||"connection"in navigator)?navigator.onLine:!0}function ID(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var gi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ic(t>e,"Short delay should be less than long delay!"),this.isMobile=$y()||Gy()}get(){return yD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function wD(n,e){Ic(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var wc=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ED={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var bD=new gi(3e4,6e4);function pI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ac(s,o,c,u){return m(this,arguments,function*(n,e,t,i,r={}){return mI(n,r,()=>m(this,null,function*(){let h={},f={};i&&(e==="GET"?f=i:h={body:JSON.stringify(i)});let g=Id(Object.assign({key:n.config.apiKey},f)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:I},h);return zy()||(S.referrerPolicy="no-referrer"),wc.fetch()(gI(n,n.config.apiHost,t,g),S)}))})}function mI(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},ED),e);try{let r=new Dd(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw gc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw gc(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw gc(n,"user-disabled",o);let f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw fI(n,f,h);iI(n,f)}}catch(r){if(r instanceof Vt)throw r;iI(n,"network-request-failed",{message:String(r)})}})}function gI(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?wD(n.config,r):`${n.config.apiScheme}://${r}`}var Dd=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Vd(this.auth,"network-request-failed")),bD.get())})}};function gc(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Vd(n,e,i);return r.customData._tokenResponse=t,r}function TD(n,e){return m(this,null,function*(){return Ac(n,"POST","/v1/accounts:delete",e)})}function _I(n,e){return m(this,null,function*(){return Ac(n,"POST","/v1/accounts:lookup",e)})}function ho(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function vI(n,e=!1){return m(this,null,function*(){let t=gr(n),i=yield t.getIdToken(e),r=yI(i);ue(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:ho(Cd(r.auth_time)),issuedAtTime:ho(Cd(r.iat)),expirationTime:ho(Cd(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Cd(n){return Number(n)*1e3}function yI(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _c("JWT malformed, contained fewer than 3 sections"),null;try{let r=yd(t);return r?JSON.parse(r):(_c("Failed to decode base64 JWT payload"),null)}catch(r){return _c("Caught error parsing JWT payload as JSON",r?.toString()),null}}function sI(n){let e=yI(n);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Pd(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Vt&&AD(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function AD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var kd=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var po=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ho(this.lastLoginAt),this.creationTime=ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ec(n){return m(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Pd(n,_I(t,{idToken:i}));ue(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wI(s.providerUserInfo):[],c=SD(n.providerData,o),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=u?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new po(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function II(n){return m(this,null,function*(){let e=gr(n);yield Ec(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function SD(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function wI(n){return n.map(e=>{var{providerId:t}=e,i=ji(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function CD(n,e){return m(this,null,function*(){let t=yield mI(n,{},()=>m(this,null,function*(){let i=Id({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=gI(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",wc.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function RD(n,e){return m(this,null,function*(){return Ac(n,"POST","/v2/accounts:revokeToken",pI(n,e))})}var fo=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ue(e.length!==0,"internal-error");let t=sI(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield CD(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(ue(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ue(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return lo("not implemented")}};function zn(n,e){ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var mo=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=ji(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new po(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield Pd(this,this.stsTokenManager.getToken(this.auth,e));return ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return vI(this,e)}reload(){return II(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ec(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(Ir(this.auth.app))return Promise.reject(vc(this.auth));let e=yield this.getIdToken();return yield Pd(this,TD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,u,h,f;let g=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(r=t.email)!==null&&r!==void 0?r:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,P=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,W=(h=t.createdAt)!==null&&h!==void 0?h:void 0,Q=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:Y,emailVerified:de,isAnonymous:Fe,providerData:oe,stsTokenManager:E}=t;ue(Y&&E,e,"internal-error");let _=fo.fromJSON(this.name,E);ue(typeof Y=="string",e,"internal-error"),zn(g,e.name),zn(I,e.name),ue(typeof de=="boolean",e,"internal-error"),ue(typeof Fe=="boolean",e,"internal-error"),zn(S,e.name),zn(D,e.name),zn(N,e.name),zn(P,e.name),zn(W,e.name),zn(Q,e.name);let v=new n({uid:Y,auth:e,email:I,emailVerified:de,displayName:g,isAnonymous:Fe,photoURL:D,phoneNumber:S,tenantId:N,stsTokenManager:_,createdAt:W,lastLoginAt:Q});return oe&&Array.isArray(oe)&&(v.providerData=oe.map(w=>Object.assign({},w))),P&&(v._redirectEventId=P),v}static _fromIdTokenResponse(e,t,i=!1){return m(this,null,function*(){let r=new fo;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Ec(s),s})}static _fromGetAccountInfoResponse(e,t,i){return m(this,null,function*(){let r=t.users[0];ue(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?wI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new fo;c.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new po(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(u,h),u})}};var oI=new Map;function mi(n){Ic(n instanceof Function,"Expected a class definition");let e=oI.get(n);return e?(Ic(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,oI.set(n,e),e)}var DD=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,i){return m(this,null,function*(){this.storage[t]=i})}_get(t){return m(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Nd=DD;function Rd(n,e,t){return`firebase:${n}:${e}:${t}`}var bc=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Rd(this.userKey,r.apiKey,s),this.fullPersistenceKey=Rd("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?mo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return m(this,null,function*(){if(!t.length)return new n(mi(Nd),e,i);let r=(yield Promise.all(t.map(h=>m(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=r[0]||mi(Nd),o=Rd(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let g=mo._fromJSON(e,f);h!==s&&(c=g),s=h;break}}catch{}let u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,i):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>m(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,i))})}};function aI(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xD(e))return"Blackberry";if(LD(e))return"Webos";if(kD(e))return"Safari";if((e.includes("chrome/")||ND(e))&&!e.includes("edge/"))return"Chrome";if(MD(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function PD(n=Ct()){return/firefox\//i.test(n)}function kD(n=Ct()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ND(n=Ct()){return/crios\//i.test(n)}function OD(n=Ct()){return/iemobile/i.test(n)}function MD(n=Ct()){return/android/i.test(n)}function xD(n=Ct()){return/blackberry/i.test(n)}function LD(n=Ct()){return/webos/i.test(n)}function EI(n,e=[]){let t;switch(n){case"Browser":t=aI(Ct());break;case"Worker":t=`${aI(Ct())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mc}/${i}`}var Od=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function VD(t){return m(this,arguments,function*(n,e={}){return Ac(n,"GET","/v2/passwordPolicy",pI(n,e))})}var FD=6,Md=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:FD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var xd=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tc(this),this.idTokenSubscription=new Tc(this),this.beforeStateQueue=new Od(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mi(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield bc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield _I(this,{idToken:e}),i=yield mo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(Ir(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Ec(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ID()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(Ir(this.app))return Promise.reject(vc(this));let t=e?gr(e):null;return t&&ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return Ir(this.app)?Promise.reject(vc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ir(this.app)?Promise.reject(vc(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(mi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield VD(this),t=new Md(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rn("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield RD(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&mi(e)||this._popupRedirectResolver;ue(t,this,"argument-error"),this.redirectPersistenceManager=yield bc.create(this,[mi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return m(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&_D(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function UD(n){return gr(n)}var Tc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ky(t=>this.observer=t)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var jD={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BD(n){jD=n}function $D(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function zD(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(mi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Ud(n,e,t,i){return gr(n).onAuthStateChanged(e,t,i)}var nV=$D("rcb"),iV=new gi(3e4,6e4);var rV=new gi(2e3,1e4);var sV=10*60*1e3;var oV=new gi(3e4,6e4);var aV=new gi(5e3,15e3);var cV=encodeURIComponent("fac");var cI="@firebase/auth",uI="1.8.1";var Ld=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GD(n){yr(new sn("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EI(n)},h=new xd(i,r,s,u);return zD(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),yr(new sn("auth-internal",e=>{let t=UD(e.getProvider("auth").getImmediate());return(i=>new Ld(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(cI,uI,qD(n)),vr(cI,uI,"esm2017")}var WD=5*60,uV=By("authIdTokenMaxAge")||WD;function HD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}BD({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Vd("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",HD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GD("Browser");function bI(n){return new En(function(e){var t=Ud(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function jI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var BI=jI,$I=new en("auth","Firebase",jI());var kc=new Un("@firebase/auth");function YD(n,...e){kc.logLevel<=ne.WARN&&kc.warn(`Auth (${$n}): ${n}`,...e)}function Cc(n,...e){kc.logLevel<=ne.ERROR&&kc.error(`Auth (${$n}): ${n}`,...e)}function Ut(n,...e){throw cf(n,...e)}function _i(n,...e){return cf(n,...e)}function zI(n,e,t){let i=Object.assign(Object.assign({},BI()),{[e]:t});return new en("auth","Firebase",i).create(e,{appName:n.name})}function un(n){return zI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cf(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return $I.create(n,...e)}function z(n,e,...t){if(!n)throw cf(e,...t)}function an(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Cc(e),new Error(e)}function Gn(n,e){n||an(e)}function zd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function JD(){return TI()==="http:"||TI()==="https:"}function TI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function XD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JD()||_y()||"connection"in navigator)?navigator.onLine:!0}function ZD(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var vi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gn(t>e,"Short delay should be less than long delay!"),this.isMobile=my()||vy()}get(){return XD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function uf(n,e){Gn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Nc=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;an("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;an("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;an("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var eP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var tP=new vi(3e4,6e4);function ln(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function hn(s,o,c,u){return m(this,arguments,function*(n,e,t,i,r={}){return qI(n,r,()=>m(this,null,function*(){let h={},f={};i&&(e==="GET"?f=i:h={body:JSON.stringify(i)});let g=ro(Object.assign({key:n.config.apiKey},f)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:I},h);return gy()||(S.referrerPolicy="no-referrer"),Nc.fetch()(GI(n,n.config.apiHost,t,g),S)}))})}function qI(n,e,t){return m(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},eP),e);try{let r=new qd(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Sc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sc(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sc(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sc(n,"user-disabled",o);let f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw zI(n,f,h);Ut(n,f)}}catch(r){if(r instanceof mt)throw r;Ut(n,"network-request-failed",{message:String(r)})}})}function bo(s,o,c,u){return m(this,arguments,function*(n,e,t,i,r={}){let h=yield hn(n,e,t,i,r);return"mfaPendingCredential"in h&&Ut(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function GI(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?uf(n.config,r):`${n.config.apiScheme}://${r}`}function nP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var qd=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(_i(this.auth,"network-request-failed")),tP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Sc(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=_i(n,e,i);return r.customData._tokenResponse=t,r}function AI(n){return n!==void 0&&n.enterprise!==void 0}var Gd=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function iP(n,e){return m(this,null,function*(){return hn(n,"GET","/v2/recaptchaConfig",ln(n,e))})}function rP(n,e){return m(this,null,function*(){return hn(n,"POST","/v1/accounts:delete",e)})}function WI(n,e){return m(this,null,function*(){return hn(n,"POST","/v1/accounts:lookup",e)})}function go(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function lf(n,e=!1){return m(this,null,function*(){let t=Le(n),i=yield t.getIdToken(e),r=hf(i);z(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:go(jd(r.auth_time)),issuedAtTime:go(jd(r.iat)),expirationTime:go(jd(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function jd(n){return Number(n)*1e3}function hf(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Cc("JWT malformed, contained fewer than 3 sections"),null;try{let r=Hh(t);return r?JSON.parse(r):(Cc("Failed to decode base64 JWT payload"),null)}catch(r){return Cc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function SI(n){let e=hf(n);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vo(n,e,t=!1){return m(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof mt&&sP(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function sP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Wd=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),t)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Oc(n){return m(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield vo(n,WI(t,{idToken:i}));z(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?HI(s.providerUserInfo):[],c=oP(n.providerData,o),u=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=u?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new yo(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function df(n){return m(this,null,function*(){let e=Le(n);yield Oc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function oP(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function HI(n){return n.map(e=>{var{providerId:t}=e,i=ji(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function aP(n,e){return m(this,null,function*(){let t=yield qI(n,{},()=>m(this,null,function*(){let i=ro({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=GI(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Nc.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function cP(n,e){return m(this,null,function*(){return hn(n,"POST","/v2/accounts:revokeToken",ln(n,e))})}var _o=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){z(e.length!==0,"internal-error");let t=SI(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return m(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return m(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield aP(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(z(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return an("not implemented")}};function qn(n,e){z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var wr=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=ji(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let t=yield vo(this,this.stsTokenManager.getToken(this.auth,e));return z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return lf(this,e)}reload(){return df(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return m(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Oc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(St(this.auth.app))return Promise.reject(un(this.auth));let e=yield this.getIdToken();return yield vo(this,rP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,u,h,f;let g=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(r=t.email)!==null&&r!==void 0?r:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,P=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,W=(h=t.createdAt)!==null&&h!==void 0?h:void 0,Q=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:Y,emailVerified:de,isAnonymous:Fe,providerData:oe,stsTokenManager:E}=t;z(Y&&E,e,"internal-error");let _=_o.fromJSON(this.name,E);z(typeof Y=="string",e,"internal-error"),qn(g,e.name),qn(I,e.name),z(typeof de=="boolean",e,"internal-error"),z(typeof Fe=="boolean",e,"internal-error"),qn(S,e.name),qn(D,e.name),qn(N,e.name),qn(P,e.name),qn(W,e.name),qn(Q,e.name);let v=new n({uid:Y,auth:e,email:I,emailVerified:de,displayName:g,isAnonymous:Fe,photoURL:D,phoneNumber:S,tenantId:N,stsTokenManager:_,createdAt:W,lastLoginAt:Q});return oe&&Array.isArray(oe)&&(v.providerData=oe.map(w=>Object.assign({},w))),P&&(v._redirectEventId=P),v}static _fromIdTokenResponse(e,t,i=!1){return m(this,null,function*(){let r=new _o;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Oc(s),s})}static _fromGetAccountInfoResponse(e,t,i){return m(this,null,function*(){let r=t.users[0];z(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?HI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new _o;c.updateFromIdToken(i);let u=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new yo(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(u,h),u})}};var CI=new Map;function cn(n){Gn(n instanceof Function,"Expected a class definition");let e=CI.get(n);return e?(Gn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,CI.set(n,e),e)}var uP=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(t,i){return m(this,null,function*(){this.storage[t]=i})}_get(t){return m(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return m(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Hd=uP;function Rc(n,e,t){return`firebase:${n}:${e}:${t}`}var Mc=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Rc(this.userKey,r.apiKey,s),this.fullPersistenceKey=Rc("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?wr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return m(this,null,function*(){if(!t.length)return new n(cn(Hd),e,i);let r=(yield Promise.all(t.map(h=>m(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),s=r[0]||cn(Hd),o=Rc(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(o);if(f){let g=wr._fromJSON(e,f);h!==s&&(c=g),s=h;break}}catch{}let u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,i):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(h=>m(this,null,function*(){if(h!==s)try{yield h._remove(o)}catch{}}))),new n(s,e,i))})}};function RI(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZI(e))return"Blackberry";if(ew(e))return"Webos";if(QI(e))return"Safari";if((e.includes("chrome/")||YI(e))&&!e.includes("edge/"))return"Chrome";if(XI(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function KI(n=je()){return/firefox\//i.test(n)}function QI(n=je()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YI(n=je()){return/crios\//i.test(n)}function JI(n=je()){return/iemobile/i.test(n)}function XI(n=je()){return/android/i.test(n)}function ZI(n=je()){return/blackberry/i.test(n)}function ew(n=je()){return/webos/i.test(n)}function ff(n=je()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lP(n=je()){var e;return ff(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hP(){return yy()&&document.documentMode===10}function tw(n=je()){return ff(n)||XI(n)||ew(n)||ZI(n)||/windows phone/i.test(n)||JI(n)}function nw(n,e=[]){let t;switch(n){case"Browser":t=RI(je());break;case"Worker":t=`${RI(je())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$n}/${i}`}var Kd=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function dP(t){return m(this,arguments,function*(n,e={}){return hn(n,"GET","/v2/passwordPolicy",ln(n,e))})}var fP=6,Qd=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:fP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Yd=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xc(this),this.idTokenSubscription=new xc(this),this.beforeStateQueue=new Kd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$I,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cn(t)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Mc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let t=yield WI(this,{idToken:e}),i=yield wr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var t;if(St(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return m(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Oc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ZD()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(St(this.app))return Promise.reject(un(this));let t=e?Le(e):null;return t&&z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return m(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return St(this.app)?Promise.reject(un(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return St(this.app)?Promise.reject(un(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(cn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield dP(this),t=new Qd(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new en("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield cP(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return m(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&cn(e)||this._popupRedirectResolver;z(t,this,"argument-error"),this.redirectPersistenceManager=yield Mc.create(this,[cn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,i,r);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return m(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&YD(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Wn(n){return Le(n)}var xc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=by(t=>this.observer=t)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var zc={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pP(n){zc=n}function iw(n){return zc.loadJS(n)}function mP(){return zc.recaptchaEnterpriseScript}function gP(){return zc.gapiScript}function rw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var _P="recaptcha-enterprise",vP="NO_RECAPTCHA",Jd=class{constructor(e){this.type=_P,this.auth=Wn(e)}verify(e="verify",t=!1){return m(this,null,function*(){function i(s){return m(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>m(this,null,function*(){iP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new Gd(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})}))})}function r(s,o,c){let u=window.grecaptcha;AI(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(vP)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(c=>{if(!t&&AI(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mP();u.length!==0&&(u+=c),iw(u).then(()=>{r(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})})}};function DI(n,e,t,i=!1){return m(this,null,function*(){let r=new Jd(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Lc(n,e,t,i){return m(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield DI(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>m(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield DI(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function pf(n,e){let t=ao(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Fn(s,e??{}))return r;Ut(r,"already-initialized")}return t.initialize({options:e})}function yP(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(cn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function mf(n,e,t){let i=Wn(n);z(i._canInitEmulator,i,"emulator-config-failed"),z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=sw(e),{host:o,port:c}=IP(e),u=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||wP()}function sw(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IP(n){let e=sw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:PI(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:PI(o)}}}function PI(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function wP(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Io=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return an("not implemented")}_getIdTokenResponse(e){return an("not implemented")}_linkToIdToken(e,t){return an("not implemented")}_getReauthenticationResolver(e){return an("not implemented")}};function EP(n,e){return m(this,null,function*(){return hn(n,"POST","/v1/accounts:signUp",e)})}function bP(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signInWithPassword",ln(n,e))})}function TP(n,e){return m(this,null,function*(){return hn(n,"POST","/v1/accounts:sendOobCode",ln(n,e))})}function AP(n,e){return m(this,null,function*(){return TP(n,e)})}function SP(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signInWithEmailLink",ln(n,e))})}function CP(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signInWithEmailLink",ln(n,e))})}var wo=class n extends Io{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lc(e,t,"signInWithPassword",bP);case"emailLink":return SP(e,{email:this._email,oobCode:this._password});default:Ut(e,"internal-error")}})}_linkToIdToken(e,t){return m(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lc(e,i,"signUpPassword",EP);case"emailLink":return CP(e,{idToken:t,email:this._email,oobCode:this._password});default:Ut(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Bd(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signInWithIdp",ln(n,e))})}function RP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DP(n){let e=lr(hr(n)).link,t=e?lr(hr(e)).deep_link_id:null,i=lr(hr(n)).deep_link_id;return(i?lr(hr(i)).link:null)||i||t||e||n}var Vc=class n{constructor(e){var t,i,r,s,o,c;let u=lr(hr(e)),h=(t=u.apiKey)!==null&&t!==void 0?t:null,f=(i=u.oobCode)!==null&&i!==void 0?i:null,g=RP((r=u.mode)!==null&&r!==void 0?r:null);z(h&&f&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=DP(e);try{return new n(t)}catch{return null}}};var ow=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return wo._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=Vc.parseLink(i);return z(r,"argument-error"),wo._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Fc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Xd=class extends Fc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function PP(n,e){return m(this,null,function*(){return bo(n,"POST","/v1/accounts:signUp",ln(n,e))})}var Er=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return m(this,null,function*(){let s=yield wr._fromIdTokenResponse(e,i,r),o=kI(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return m(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=kI(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function kI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Zd=class n extends mt{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function aw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zd._fromErrorAndOperation(n,s,e,i):s})}function kP(n,e,t=!1){return m(this,null,function*(){let i=yield vo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Er._forOperation(n,"link",i)})}function NP(n,e,t=!1){return m(this,null,function*(){let{auth:i}=n;if(St(i.app))return Promise.reject(un(i));let r="reauthenticate";try{let s=yield vo(n,aw(i,r,e,n),t);z(s.idToken,i,"internal-error");let o=hf(s.idToken);z(o,i,"internal-error");let{sub:c}=o;return z(n.uid===c,i,"user-mismatch"),Er._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ut(i,"user-mismatch"),s}})}function cw(n,e,t=!1){return m(this,null,function*(){if(St(n.app))return Promise.reject(un(n));let i="signIn",r=yield aw(n,i,e),s=yield Er._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function gf(n,e){return m(this,null,function*(){return cw(Wn(n),e)})}function OP(n,e,t){var i;z(((i=t.url)===null||i===void 0?void 0:i.length)>0,n,"invalid-continue-uri"),z(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(z(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(z(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function uw(n){return m(this,null,function*(){let e=Wn(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function _f(n,e,t){return m(this,null,function*(){let i=Wn(n),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&OP(i,r,t),yield Lc(i,r,"getOobCode",AP)})}function vf(n,e,t){return m(this,null,function*(){if(St(n.app))return Promise.reject(un(n));let i=Wn(n),o=yield Lc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&uw(n),u}),c=yield Er._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(c.user),c})}function yf(n,e,t){return St(n.app)?Promise.reject(un(n)):gf(Le(n),ow.credential(e,t)).catch(i=>m(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&uw(n),i}))}function If(n,e,t,i){return Le(n).onIdTokenChanged(e,t,i)}function wf(n,e,t){return Le(n).beforeAuthStateChanged(e,t)}function Ef(n){return Le(n).signOut()}var Uc="__sak";var jc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uc,"1"),this.storage.removeItem(Uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var MP=1e3,xP=10,LP=(()=>{class n extends jc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tw(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}let r=t.key;i?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);hP()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,xP):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},MP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return m(this,null,function*(){yield Qt(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return m(this,null,function*(){let i=yield Qt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return m(this,null,function*(){yield Qt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),lw=LP;var VP=(()=>{class n extends jc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),bf=VP;function FP(n){return Promise.all(n.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var UP=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return m(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let u=Array.from(c).map(f=>m(this,null,function*(){return f(i.origin,o)})),h=yield FP(u);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function hw(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var ef=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return m(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let h=hw("",20);r.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(g){let I=g;if(I.data.eventId===h)switch(I.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(I.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ft(){return window}function jP(n){Ft().location.href=n}function dw(){return typeof Ft().WorkerGlobalScope<"u"&&typeof Ft().importScripts=="function"}function BP(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $P(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function zP(){return dw()?self:null}var fw="firebaseLocalStorageDb",qP=1,Bc="firebaseLocalStorage",pw="fbase_key",yi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function qc(n,e){return n.transaction([Bc],e?"readwrite":"readonly").objectStore(Bc)}function GP(){let n=indexedDB.deleteDatabase(fw);return new yi(n).toPromise()}function tf(){let n=indexedDB.open(fw,qP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Bc,{keyPath:pw})}catch(r){t(r)}}),n.addEventListener("success",()=>m(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Bc)?e(i):(i.close(),yield GP(),e(yield tf()))}))})}function NI(n,e,t){return m(this,null,function*(){let i=qc(n,!0).put({[pw]:e,value:t});return new yi(i).toPromise()})}function WP(n,e){return m(this,null,function*(){let t=qc(n,!1).get(e),i=yield new yi(t).toPromise();return i===void 0?null:i.value})}function OI(n,e){let t=qc(n,!0).delete(e);return new yi(t).toPromise()}var HP=800,KP=3,QP=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield tf(),this.db)})}_withRetries(t){return m(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>KP)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return dw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=UP._getInstance(zP()),this.receiver._subscribe("keyChanged",(t,i)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var t,i;if(this.activeServiceWorker=yield BP(),!this.activeServiceWorker)return;this.sender=new ef(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$P()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let t=yield tf();return yield NI(t,Uc,"1"),yield OI(t,Uc),!0}catch{}return!1})}_withPendingWrite(t){return m(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>NI(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return m(this,null,function*(){let i=yield this._withRetries(r=>WP(r,t));return this.localCache[t]=i,i})}_remove(t){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>OI(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return m(this,null,function*(){let t=yield this._withRetries(s=>{let o=qc(s,!1).getAll();return new yi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),HP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),mw=QP;var JF=rw("rcb"),XF=new vi(3e4,6e4);function YP(n,e){return e?cn(e):(z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Eo=class extends Io{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bd(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function JP(n){return cw(n.auth,new Eo(n),n.bypassAuthState)}function XP(n){let{auth:e,user:t}=n;return z(t,e,"internal-error"),NP(t,new Eo(n),n.bypassAuthState)}function ZP(n){return m(this,null,function*(){let{auth:e,user:t}=n;return z(t,e,"internal-error"),kP(t,new Eo(n),n.bypassAuthState)})}var nf=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JP;case"linkViaPopup":case"linkViaRedirect":return ZP;case"reauthViaPopup":case"reauthViaRedirect":return XP;default:Ut(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ZF=new vi(2e3,1e4);var ek="pendingRedirect",Dc=new Map,rf=class n extends nf{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return m(this,null,function*(){let e=Dc.get(this.auth._key());if(!e){try{let i=(yield tk(this.resolver,this.auth))?yield Qt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Dc.set(this.auth._key(),e)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return Qt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Qt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function tk(n,e){return m(this,null,function*(){let t=rk(e),i=ik(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function nk(n,e){Dc.set(n._key(),e)}function ik(n){return cn(n._redirectPersistence)}function rk(n){return Rc(ek,n.config.apiKey,n.name)}function sk(n,e,t=!1){return m(this,null,function*(){if(St(n.app))return Promise.reject(un(n));let i=Wn(n),r=YP(i,e),o=yield new rf(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var ok=10*60*1e3,sf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ak(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!gw(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(_i(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ok&&this.cachedEventUids.clear(),this.cachedEventUids.has(MI(e))}saveEventToCache(e){this.cachedEventUids.add(MI(e)),this.lastProcessedEventTime=Date.now()}};function MI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ak(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gw(n);default:return!1}}function ck(t){return m(this,arguments,function*(n,e={}){return hn(n,"GET","/v1/projects",e)})}var uk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lk=/^https?/;function hk(n){return m(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield ck(n);for(let t of e)try{if(dk(t))return}catch{}Ut(n,"unauthorized-domain")})}function dk(n){let e=zd(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!lk.test(t))return!1;if(uk.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var fk=new vi(3e4,6e4);function xI(){let n=Ft().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pk(n){return new Promise((e,t)=>{var i,r,s;function o(){xI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xI(),t(_i(n,"network-request-failed"))},timeout:fk.get()})}if(!((r=(i=Ft().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ft().gapi)===null||s===void 0)&&s.load)o();else{let c=rw("iframefcb");return Ft()[c]=()=>{gapi.load?o():t(_i(n,"network-request-failed"))},iw(`${gP()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Pc=null,e})}var Pc=null;function mk(n){return Pc=Pc||pk(n),Pc}var gk=new vi(5e3,15e3),_k="__/auth/iframe",vk="emulator/auth/iframe",yk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ik=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wk(n){let e=n.config;z(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?uf(e,vk):`https://${n.config.authDomain}/${_k}`,i={apiKey:e.apiKey,appName:n.name,v:$n},r=Ik.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ro(i).slice(1)}`}function Ek(n){return m(this,null,function*(){let e=yield mk(n),t=Ft().gapi;return z(t,n,"internal-error"),e.open({where:document.body,url:wk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yk,dontclear:!0},i=>new Promise((r,s)=>m(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=_i(n,"network-request-failed"),c=Ft().setTimeout(()=>{s(o)},gk.get());function u(){Ft().clearTimeout(c),r(i)}i.ping(u).then(u,()=>{s(o)})})))})}var bk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tk=500,Ak=600,Sk="_blank",Ck="http://localhost",$c=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Rk(n,e,t,i=Tk,r=Ak){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",u=Object.assign(Object.assign({},bk),{width:i.toString(),height:r.toString(),top:s,left:o}),h=je().toLowerCase();t&&(c=YI(h)?Sk:t),KI(h)&&(e=e||Ck,u.scrollbars="yes");let f=Object.entries(u).reduce((I,[S,D])=>`${I}${S}=${D},`,"");if(lP(h)&&c!=="_self")return Dk(e||"",c),new $c(null);let g=window.open(e||"",c,f);z(g,n,"popup-blocked");try{g.focus()}catch{}return new $c(g)}function Dk(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Pk="__/auth/handler",kk="emulator/auth/handler",Nk=encodeURIComponent("fac");function LI(n,e,t,i,r,s){return m(this,null,function*(){z(n.config.authDomain,n,"auth-domain-config-required"),z(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:$n,eventId:r};if(e instanceof Fc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Ey(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,g]of Object.entries(s||{}))o[f]=g}if(e instanceof Xd){let f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield n._getAppCheckToken(),h=u?`#${Nk}=${encodeURIComponent(u)}`:"";return`${Ok(n)}?${ro(c).slice(1)}${h}`})}function Ok({config:n}){return n.emulator?uf(n,kk):`https://${n.authDomain}/${Pk}`}var $d="webStorageSupport",of=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bf,this._completeRedirectFn=sk,this._overrideRedirectResult=nk}_openPopup(e,t,i,r){return m(this,null,function*(){var s;Gn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield LI(e,t,i,zd(),r);return Rk(e,o,hw())})}_openRedirect(e,t,i,r){return m(this,null,function*(){yield this._originValidation(e);let s=yield LI(e,t,i,zd(),r);return jP(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Gn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return m(this,null,function*(){let t=yield Ek(e),i=new sf(e);return t.register("authEvent",r=>(z(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($d,{type:$d},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[$d];o!==void 0&&t(!!o),Ut(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tw()||QI()||ff()}},_w=of;var VI="@firebase/auth",FI="1.7.9";var af=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Mk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xk(n){Bn(new yt("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nw(n)},h=new Yd(i,r,s,u);return yP(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Bn(new yt("auth-internal",e=>{let t=Wn(e.getProvider("auth").getImmediate());return(i=>new af(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(VI,FI,Mk(n)),Ve(VI,FI,"esm2017")}var Lk=5*60,Vk=Yh("authIdTokenMaxAge")||Lk,UI=null,Fk=n=>e=>m(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Vk)return;let r=t?.token;UI!==r&&(UI=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Tf(n=dr()){let e=ao(n,"auth");if(e.isInitialized())return e.getImmediate();let t=pf(n,{popupRedirectResolver:_w,persistence:[mw,lw,bf]}),i=Yh("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=Fk(s.toString());wf(t,o,()=>o(t.currentUser)),If(t,c=>o(c))}}let r=Kh("auth");return r&&mf(t,`http://${r}`),t}function Uk(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}pP({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=_i("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Uk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xk("Browser");var vw="auth",Ii=class{constructor(e){return e}},To=class{constructor(){return co(vw)}};var Af=new ee("angularfire2.auth-instances");function RN(n,e){let t=fc(vw,n,e);return t&&new Ii(t)}function DN(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ii(i)}}var PN={provide:To,deps:[[new Xe,Af]]},kN={provide:Ii,useFactory:RN,deps:[[new Xe,Af],nn]};function yw(n,...e){return Ve("angularfire",fi.full,"auth"),Nt([kN,PN,{provide:Af,useFactory:DN(n),multi:!0,deps:[Ee,Mt,mr,pi,[new Xe,pr],...e]}])}var Iw=Be(bI,!0);var ww=Be(vf,!0);var Ew=Be(Tf,!0);var bw=Be(_f,!0);var Tw=Be(yf,!0);var Aw=Be(Ef,!0);var Sw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cw={};var Hn,Sf;(function(){var n;function e(E,_){function v(){}v.prototype=_.prototype,E.D=_.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,b,A){for(var y=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)y[Wt-2]=arguments[Wt];return _.prototype[b].apply(w,y)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,v){v||(v=0);var w=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)w[b]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(b=0;16>b;++b)w[b]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=E.g[0],v=E.g[1],b=E.g[2];var A=E.g[3],y=_+(A^v&(b^A))+w[0]+3614090360&4294967295;_=v+(y<<7&4294967295|y>>>25),y=A+(b^_&(v^b))+w[1]+3905402710&4294967295,A=_+(y<<12&4294967295|y>>>20),y=b+(v^A&(_^v))+w[2]+606105819&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(_^b&(A^_))+w[3]+3250441966&4294967295,v=b+(y<<22&4294967295|y>>>10),y=_+(A^v&(b^A))+w[4]+4118548399&4294967295,_=v+(y<<7&4294967295|y>>>25),y=A+(b^_&(v^b))+w[5]+1200080426&4294967295,A=_+(y<<12&4294967295|y>>>20),y=b+(v^A&(_^v))+w[6]+2821735955&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(_^b&(A^_))+w[7]+4249261313&4294967295,v=b+(y<<22&4294967295|y>>>10),y=_+(A^v&(b^A))+w[8]+1770035416&4294967295,_=v+(y<<7&4294967295|y>>>25),y=A+(b^_&(v^b))+w[9]+2336552879&4294967295,A=_+(y<<12&4294967295|y>>>20),y=b+(v^A&(_^v))+w[10]+4294925233&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(_^b&(A^_))+w[11]+2304563134&4294967295,v=b+(y<<22&4294967295|y>>>10),y=_+(A^v&(b^A))+w[12]+1804603682&4294967295,_=v+(y<<7&4294967295|y>>>25),y=A+(b^_&(v^b))+w[13]+4254626195&4294967295,A=_+(y<<12&4294967295|y>>>20),y=b+(v^A&(_^v))+w[14]+2792965006&4294967295,b=A+(y<<17&4294967295|y>>>15),y=v+(_^b&(A^_))+w[15]+1236535329&4294967295,v=b+(y<<22&4294967295|y>>>10),y=_+(b^A&(v^b))+w[1]+4129170786&4294967295,_=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(_^v))+w[6]+3225465664&4294967295,A=_+(y<<9&4294967295|y>>>23),y=b+(_^v&(A^_))+w[11]+643717713&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^_&(b^A))+w[0]+3921069994&4294967295,v=b+(y<<20&4294967295|y>>>12),y=_+(b^A&(v^b))+w[5]+3593408605&4294967295,_=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(_^v))+w[10]+38016083&4294967295,A=_+(y<<9&4294967295|y>>>23),y=b+(_^v&(A^_))+w[15]+3634488961&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^_&(b^A))+w[4]+3889429448&4294967295,v=b+(y<<20&4294967295|y>>>12),y=_+(b^A&(v^b))+w[9]+568446438&4294967295,_=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(_^v))+w[14]+3275163606&4294967295,A=_+(y<<9&4294967295|y>>>23),y=b+(_^v&(A^_))+w[3]+4107603335&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^_&(b^A))+w[8]+1163531501&4294967295,v=b+(y<<20&4294967295|y>>>12),y=_+(b^A&(v^b))+w[13]+2850285829&4294967295,_=v+(y<<5&4294967295|y>>>27),y=A+(v^b&(_^v))+w[2]+4243563512&4294967295,A=_+(y<<9&4294967295|y>>>23),y=b+(_^v&(A^_))+w[7]+1735328473&4294967295,b=A+(y<<14&4294967295|y>>>18),y=v+(A^_&(b^A))+w[12]+2368359562&4294967295,v=b+(y<<20&4294967295|y>>>12),y=_+(v^b^A)+w[5]+4294588738&4294967295,_=v+(y<<4&4294967295|y>>>28),y=A+(_^v^b)+w[8]+2272392833&4294967295,A=_+(y<<11&4294967295|y>>>21),y=b+(A^_^v)+w[11]+1839030562&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^_)+w[14]+4259657740&4294967295,v=b+(y<<23&4294967295|y>>>9),y=_+(v^b^A)+w[1]+2763975236&4294967295,_=v+(y<<4&4294967295|y>>>28),y=A+(_^v^b)+w[4]+1272893353&4294967295,A=_+(y<<11&4294967295|y>>>21),y=b+(A^_^v)+w[7]+4139469664&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^_)+w[10]+3200236656&4294967295,v=b+(y<<23&4294967295|y>>>9),y=_+(v^b^A)+w[13]+681279174&4294967295,_=v+(y<<4&4294967295|y>>>28),y=A+(_^v^b)+w[0]+3936430074&4294967295,A=_+(y<<11&4294967295|y>>>21),y=b+(A^_^v)+w[3]+3572445317&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^_)+w[6]+76029189&4294967295,v=b+(y<<23&4294967295|y>>>9),y=_+(v^b^A)+w[9]+3654602809&4294967295,_=v+(y<<4&4294967295|y>>>28),y=A+(_^v^b)+w[12]+3873151461&4294967295,A=_+(y<<11&4294967295|y>>>21),y=b+(A^_^v)+w[15]+530742520&4294967295,b=A+(y<<16&4294967295|y>>>16),y=v+(b^A^_)+w[2]+3299628645&4294967295,v=b+(y<<23&4294967295|y>>>9),y=_+(b^(v|~A))+w[0]+4096336452&4294967295,_=v+(y<<6&4294967295|y>>>26),y=A+(v^(_|~b))+w[7]+1126891415&4294967295,A=_+(y<<10&4294967295|y>>>22),y=b+(_^(A|~v))+w[14]+2878612391&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~_))+w[5]+4237533241&4294967295,v=b+(y<<21&4294967295|y>>>11),y=_+(b^(v|~A))+w[12]+1700485571&4294967295,_=v+(y<<6&4294967295|y>>>26),y=A+(v^(_|~b))+w[3]+2399980690&4294967295,A=_+(y<<10&4294967295|y>>>22),y=b+(_^(A|~v))+w[10]+4293915773&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~_))+w[1]+2240044497&4294967295,v=b+(y<<21&4294967295|y>>>11),y=_+(b^(v|~A))+w[8]+1873313359&4294967295,_=v+(y<<6&4294967295|y>>>26),y=A+(v^(_|~b))+w[15]+4264355552&4294967295,A=_+(y<<10&4294967295|y>>>22),y=b+(_^(A|~v))+w[6]+2734768916&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~_))+w[13]+1309151649&4294967295,v=b+(y<<21&4294967295|y>>>11),y=_+(b^(v|~A))+w[4]+4149444226&4294967295,_=v+(y<<6&4294967295|y>>>26),y=A+(v^(_|~b))+w[11]+3174756917&4294967295,A=_+(y<<10&4294967295|y>>>22),y=b+(_^(A|~v))+w[2]+718787259&4294967295,b=A+(y<<15&4294967295|y>>>17),y=v+(A^(b|~_))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(b+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+A&4294967295}i.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var v=_-this.blockSize,w=this.B,b=this.h,A=0;A<_;){if(b==0)for(;A<=v;)r(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<_;)if(w[b++]=E.charCodeAt(A++),b==this.blockSize){r(this,w),b=0;break}}else for(;A<_;)if(w[b++]=E[A++],b==this.blockSize){r(this,w),b=0;break}}this.h=b,this.o+=_},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var v=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=v&255,v/=256;for(this.u(E),E=Array(16),_=v=0;4>_;++_)for(var w=0;32>w;w+=8)E[v++]=this.g[_]>>>w&255;return E};function s(E,_){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=_(E)}function o(E,_){this.h=_;for(var v=[],w=!0,b=E.length-1;0<=b;b--){var A=E[b]|0;w&&A==_||(v[b]=A,w=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return P(h(-E));for(var _=[],v=1,w=0;E>=v;w++)_[w]=E/v|0,v*=4294967296;return new o(_,0)}function f(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return P(f(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=h(Math.pow(_,8)),w=g,b=0;b<E.length;b+=8){var A=Math.min(8,E.length-b),y=parseInt(E.substring(b,b+A),_);8>A?(A=h(Math.pow(_,A)),w=w.j(A).add(h(y))):(w=w.j(v),w=w.add(h(y)))}return w}var g=u(0),I=u(1),S=u(16777216);n=o.prototype,n.m=function(){if(N(this))return-P(this).m();for(var E=0,_=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*_,_*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(N(this))return"-"+P(this).toString(E);for(var _=h(Math.pow(E,6)),v=this,w="";;){var b=de(v,_).g;v=W(v,b.j(_));var A=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=b,D(v))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function N(E){return E.h==-1}n.l=function(E){return E=W(this,E),N(E)?-1:D(E)?0:1};function P(E){for(var _=E.g.length,v=[],w=0;w<_;w++)v[w]=~E.g[w];return new o(v,~E.h).add(I)}n.abs=function(){return N(this)?P(this):this},n.add=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],w=0,b=0;b<=_;b++){var A=w+(this.i(b)&65535)+(E.i(b)&65535),y=(A>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);w=y>>>16,A&=65535,y&=65535,v[b]=y<<16|A}return new o(v,v[v.length-1]&-2147483648?-1:0)};function W(E,_){return E.add(P(_))}n.j=function(E){if(D(this)||D(E))return g;if(N(this))return N(E)?P(this).j(P(E)):P(P(this).j(E));if(N(E))return P(this.j(P(E)));if(0>this.l(S)&&0>E.l(S))return h(this.m()*E.m());for(var _=this.g.length+E.g.length,v=[],w=0;w<2*_;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<E.g.length;b++){var A=this.i(w)>>>16,y=this.i(w)&65535,Wt=E.i(b)>>>16,ns=E.i(b)&65535;v[2*w+2*b]+=y*ns,Q(v,2*w+2*b),v[2*w+2*b+1]+=A*ns,Q(v,2*w+2*b+1),v[2*w+2*b+1]+=y*Wt,Q(v,2*w+2*b+1),v[2*w+2*b+2]+=A*Wt,Q(v,2*w+2*b+2)}for(w=0;w<_;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=_;w<2*_;w++)v[w]=0;return new o(v,0)};function Q(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function Y(E,_){this.g=E,this.h=_}function de(E,_){if(D(_))throw Error("division by zero");if(D(E))return new Y(g,g);if(N(E))return _=de(P(E),_),new Y(P(_.g),P(_.h));if(N(_))return _=de(E,P(_)),new Y(P(_.g),_.h);if(30<E.g.length){if(N(E)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var v=I,w=_;0>=w.l(E);)v=Fe(v),w=Fe(w);var b=oe(v,1),A=oe(w,1);for(w=oe(w,2),v=oe(v,2);!D(w);){var y=A.add(w);0>=y.l(E)&&(b=b.add(v),A=y),w=oe(w,1),v=oe(v,1)}return _=W(E,b.j(_)),new Y(b,_)}for(b=g;0<=E.l(_);){for(v=Math.max(1,Math.floor(E.m()/_.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=h(v),y=A.j(_);N(y)||0<y.l(E);)v-=w,A=h(v),y=A.j(_);D(A)&&(A=I),b=b.add(A),E=W(E,y)}return new Y(b,E)}n.A=function(E){return de(this,E).h},n.and=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},n.or=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},n.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],w=0;w<_;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function Fe(E){for(var _=E.g.length+1,v=[],w=0;w<_;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function oe(E,_){var v=_>>5;_%=32;for(var w=E.g.length-v,b=[],A=0;A<w;A++)b[A]=0<_?E.i(A+v)>>>_|E.i(A+v+1)<<32-_:E.i(A+v);return new o(b,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Sf=Cw.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Hn=Cw.Integer=o}).apply(typeof Sw<"u"?Sw:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dn={};var Cf,ON,br,Rf,Ao,Wc,Df,Pf,kf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,d){return a==Array.prototype||a==Object.prototype||(a[l]=d.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var l=0;l<a.length;++l){var d=a[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=t(this);function r(a,l){if(l)e:{var d=i;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in d))break e;d=d[T]}a=a[a.length-1],p=d[a],l=l(p),l!=p&&l!=null&&e(d,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var d=0,p=!1,T={next:function(){if(!p&&d<a.length){var C=d++;return{value:l(C,a[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(a){return a||function(){return s(this,function(l,d){return d})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function h(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,d){return a.call.apply(a.bind,arguments)}function g(a,l,d){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function I(a,l,d){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,I.apply(null,arguments)}function S(a,l){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function D(a,l){function d(){}d.prototype=l.prototype,a.aa=l.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(p,T,C){for(var O=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)O[ge-2]=arguments[ge];return l.prototype[T].apply(p,O)}}function N(a){let l=a.length;if(0<l){let d=Array(l);for(let p=0;p<l;p++)d[p]=a[p];return d}return[]}function P(a,l){for(let d=1;d<arguments.length;d++){let p=arguments[d];if(u(p)){let T=a.length||0,C=p.length||0;a.length=T+C;for(let O=0;O<C;O++)a[T+O]=p[O]}else a.push(p)}}class W{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function Q(a){return/^[\s\xa0]*$/.test(a)}function Y(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function de(a){return de[" "](a),a}de[" "]=function(){};var Fe=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function oe(a,l,d){for(let p in a)l.call(d,a[p],p,a)}function E(a,l){for(let d in a)l.call(void 0,a[d],d,a)}function _(a){let l={};for(let d in a)l[d]=a[d];return l}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let d,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(d in p)a[d]=p[d];for(let C=0;C<v.length;C++)d=v[C],Object.prototype.hasOwnProperty.call(p,d)&&(a[d]=p[d])}}function b(a){var l=1;a=a.split(":");let d=[];for(;0<l&&a.length;)d.push(a.shift()),l--;return a.length&&d.push(a.join(":")),d}function A(a){c.setTimeout(()=>{throw a},0)}function y(){var a=Ju;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Wt{constructor(){this.h=this.g=null}add(l,d){let p=ns.get();p.set(l,d),this.h?this.h.next=p:this.g=p,this.h=p}}var ns=new W(()=>new LT,a=>a.reset());class LT{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let is,rs=!1,Ju=new Wt,rg=()=>{let a=c.Promise.resolve(void 0);is=()=>{a.then(VT)}};var VT=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(d){A(d)}var l=ns;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}rs=!1};function vn(){this.s=this.s,this.C=this.C}vn.prototype.s=!1,vn.prototype.ma=function(){this.s||(this.s=!0,this.N())},vn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var FT=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let d=()=>{};c.addEventListener("test",d,l),c.removeEventListener("test",d,l)}catch{}return a}();function ss(a,l){if(He.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(Fe){e:{try{de(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else d=="mouseover"?l=a.fromElement:d=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:UT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ss.aa.h.call(this)}}D(ss,He);var UT={2:"touch",3:"pen",4:"mouse"};ss.prototype.h=function(){ss.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var os="closure_listenable_"+(1e6*Math.random()|0),jT=0;function BT(a,l,d,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=d,this.capture=!!p,this.ha=T,this.key=++jT,this.da=this.fa=!1}function na(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ia(a){this.src=a,this.g={},this.h=0}ia.prototype.add=function(a,l,d,p,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var O=Zu(a,l,p,T);return-1<O?(l=a[O],d||(l.fa=!1)):(l=new BT(l,this.src,C,!!p,T),l.fa=d,a.push(l)),l};function Xu(a,l){var d=l.type;if(d in a.g){var p=a.g[d],T=Array.prototype.indexOf.call(p,l,void 0),C;(C=0<=T)&&Array.prototype.splice.call(p,T,1),C&&(na(l),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Zu(a,l,d,p){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==l&&C.capture==!!d&&C.ha==p)return T}return-1}var el="closure_lm_"+(1e6*Math.random()|0),tl={};function sg(a,l,d,p,T){if(p&&p.once)return ag(a,l,d,p,T);if(Array.isArray(l)){for(var C=0;C<l.length;C++)sg(a,l[C],d,p,T);return null}return d=sl(d),a&&a[os]?a.K(l,d,h(p)?!!p.capture:!!p,T):og(a,l,d,!1,p,T)}function og(a,l,d,p,T,C){if(!l)throw Error("Invalid event type");var O=h(T)?!!T.capture:!!T,ge=il(a);if(ge||(a[el]=ge=new ia(a)),d=ge.add(l,d,p,O,C),d.proxy)return d;if(p=$T(),d.proxy=p,p.src=a,p.listener=d,a.addEventListener)FT||(T=O),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(ug(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function $T(){function a(d){return l.call(a.src,a.listener,d)}let l=zT;return a}function ag(a,l,d,p,T){if(Array.isArray(l)){for(var C=0;C<l.length;C++)ag(a,l[C],d,p,T);return null}return d=sl(d),a&&a[os]?a.L(l,d,h(p)?!!p.capture:!!p,T):og(a,l,d,!0,p,T)}function cg(a,l,d,p,T){if(Array.isArray(l))for(var C=0;C<l.length;C++)cg(a,l[C],d,p,T);else p=h(p)?!!p.capture:!!p,d=sl(d),a&&a[os]?(a=a.i,l=String(l).toString(),l in a.g&&(C=a.g[l],d=Zu(C,d,p,T),-1<d&&(na(C[d]),Array.prototype.splice.call(C,d,1),C.length==0&&(delete a.g[l],a.h--)))):a&&(a=il(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Zu(l,d,p,T)),(d=-1<a?l[a]:null)&&nl(d))}function nl(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[os])Xu(l.i,a);else{var d=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(d,p,a.capture):l.detachEvent?l.detachEvent(ug(d),p):l.addListener&&l.removeListener&&l.removeListener(p),(d=il(l))?(Xu(d,a),d.h==0&&(d.src=null,l[el]=null)):na(a)}}}function ug(a){return a in tl?tl[a]:tl[a]="on"+a}function zT(a,l){if(a.da)a=!0;else{l=new ss(l,this);var d=a.listener,p=a.ha||a.src;a.fa&&nl(a),a=d.call(p,l)}return a}function il(a){return a=a[el],a instanceof ia?a:null}var rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function sl(a){return typeof a=="function"?a:(a[rl]||(a[rl]=function(l){return a.handleEvent(l)}),a[rl])}function Ke(){vn.call(this),this.i=new ia(this),this.M=this,this.F=null}D(Ke,vn),Ke.prototype[os]=!0,Ke.prototype.removeEventListener=function(a,l,d,p){cg(this,a,l,d,p)};function it(a,l){var d,p=a.F;if(p)for(d=[];p;p=p.F)d.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new He(l,a);else if(l instanceof He)l.target=l.target||a;else{var T=l;l=new He(p,a),w(l,T)}if(T=!0,d)for(var C=d.length-1;0<=C;C--){var O=l.g=d[C];T=ra(O,p,!0,l)&&T}if(O=l.g=a,T=ra(O,p,!0,l)&&T,T=ra(O,p,!1,l)&&T,d)for(C=0;C<d.length;C++)O=l.g=d[C],T=ra(O,p,!1,l)&&T}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var d=a.g[l],p=0;p<d.length;p++)na(d[p]);delete a.g[l],a.h--}}this.F=null},Ke.prototype.K=function(a,l,d,p){return this.i.add(String(a),l,!1,d,p)},Ke.prototype.L=function(a,l,d,p){return this.i.add(String(a),l,!0,d,p)};function ra(a,l,d,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,C=0;C<l.length;++C){var O=l[C];if(O&&!O.da&&O.capture==d){var ge=O.listener,ze=O.ha||O.src;O.fa&&Xu(a.i,O),T=ge.call(ze,p)!==!1&&T}}return T&&!p.defaultPrevented}function lg(a,l,d){if(typeof a=="function")d&&(a=I(a,d));else if(a&&typeof a.handleEvent=="function")a=I(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function hg(a){a.g=lg(()=>{a.g=null,a.i&&(a.i=!1,hg(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class qT extends vn{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:hg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function as(a){vn.call(this),this.h=a,this.g={}}D(as,vn);var dg=[];function fg(a){oe(a.g,function(l,d){this.g.hasOwnProperty(d)&&nl(l)},a),a.g={}}as.prototype.N=function(){as.aa.N.call(this),fg(this)},as.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ol=c.JSON.stringify,GT=c.JSON.parse,WT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function al(){}al.prototype.h=null;function pg(a){return a.h||(a.h=a.i())}function mg(){}var cs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cl(){He.call(this,"d")}D(cl,He);function ul(){He.call(this,"c")}D(ul,He);var Zn={},gg=null;function sa(){return gg=gg||new Ke}Zn.La="serverreachability";function _g(a){He.call(this,Zn.La,a)}D(_g,He);function us(a){let l=sa();it(l,new _g(l))}Zn.STAT_EVENT="statevent";function vg(a,l){He.call(this,Zn.STAT_EVENT,a),this.stat=l}D(vg,He);function rt(a){let l=sa();it(l,new vg(l,a))}Zn.Ma="timingevent";function yg(a,l){He.call(this,Zn.Ma,a),this.size=l}D(yg,He);function ls(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function hs(){this.g=!0}hs.prototype.xa=function(){this.g=!1};function HT(a,l,d,p,T,C){a.info(function(){if(a.g)if(C)for(var O="",ge=C.split("&"),ze=0;ze<ge.length;ze++){var ae=ge[ze].split("=");if(1<ae.length){var Qe=ae[0];ae=ae[1];var Ye=Qe.split("_");O=2<=Ye.length&&Ye[1]=="type"?O+(Qe+"="+ae+"&"):O+(Qe+"=redacted&")}}else O=null;else O=C;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+d+`
`+O})}function KT(a,l,d,p,T,C,O){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+d+`
`+C+" "+O})}function Li(a,l,d,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+YT(a,d)+(p?" "+p:"")})}function QT(a,l){a.info(function(){return"TIMEOUT: "+l})}hs.prototype.info=function(){};function YT(a,l){if(!a.g)return l;if(!l)return null;try{var d=JSON.parse(l);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var p=d[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return ol(d)}catch{return l}}var oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ig={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ll;function aa(){}D(aa,al),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},ll=new aa;function yn(a,l,d,p){this.j=a,this.i=l,this.l=d,this.R=p||1,this.U=new as(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wg}function wg(){this.i=null,this.g="",this.h=!1}var Eg={},hl={};function dl(a,l,d){a.L=1,a.v=ha(Ht(l)),a.m=d,a.P=!0,bg(a,null)}function bg(a,l){a.F=Date.now(),ca(a),a.A=Ht(a.v);var d=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Vg(d.i,"t",p),a.C=0,d=a.j.J,a.h=new wg,a.g=t_(a.j,d?l:null,!a.m),0<a.O&&(a.M=new qT(I(a.Y,a,a.g),a.O)),l=a.U,d=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(dg[0]=T.toString()),T=dg);for(var C=0;C<T.length;C++){var O=sg(d,T[C],p||l.handleEvent,!1,l.h||l);if(!O)break;l.g[O.key]=O}l=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),us(),HT(a.i,a.u,a.A,a.l,a.R,a.m)}yn.prototype.ca=function(a){a=a.target;let l=this.M;l&&Kt(a)==3?l.j():this.Y(a)},yn.prototype.Y=function(a){try{if(a==this.g)e:{let Ye=Kt(this.g);var l=this.g.Ba();let Ui=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||qg(this.g)))){this.J||Ye!=4||l==7||(l==8||0>=Ui?us(3):us(2)),fl(this);var d=this.g.Z();this.X=d;t:if(Tg(this)){var p=qg(this.g);a="";var T=p.length,C=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),ds(this);var O="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(C&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=d==200,KT(this.i,this.u,this.A,this.l,this.R,Ye,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,ze=this.g;if((ge=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(ge)){var ae=ge;break t}}ae=null}if(d=ae)Li(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pl(this,d);else{this.o=!1,this.s=3,rt(12),ei(this),ds(this);break e}}if(this.P){d=!0;let Et;for(;!this.J&&this.C<O.length;)if(Et=JT(this,O),Et==hl){Ye==4&&(this.s=4,rt(14),d=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Eg){this.s=4,rt(15),Li(this.i,this.l,O,"[Invalid Chunk]"),d=!1;break}else Li(this.i,this.l,Et,null),pl(this,Et);if(Tg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||O.length!=0||this.h.h||(this.s=1,rt(16),d=!1),this.o=this.o&&d,!d)Li(this.i,this.l,O,"[Invalid Chunked Response]"),ei(this),ds(this);else if(0<O.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Il(Qe),Qe.M=!0,rt(11))}}else Li(this.i,this.l,O,null),pl(this,O);Ye==4&&ei(this),this.o&&!this.J&&(Ye==4?Jg(this.j,this):(this.o=!1,ca(this)))}else pA(this.g),d==400&&0<O.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),ei(this),ds(this)}}}catch{}finally{}};function Tg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function JT(a,l){var d=a.C,p=l.indexOf(`
`,d);return p==-1?hl:(d=Number(l.substring(d,p)),isNaN(d)?Eg:(p+=1,p+d>l.length?hl:(l=l.slice(p,p+d),a.C=p+d,l)))}yn.prototype.cancel=function(){this.J=!0,ei(this)};function ca(a){a.S=Date.now()+a.I,Ag(a,a.I)}function Ag(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ls(I(a.ba,a),l)}function fl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}yn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(QT(this.i,this.A),this.L!=2&&(us(),rt(17)),ei(this),this.s=2,ds(this)):Ag(this,this.S-a)};function ds(a){a.j.G==0||a.J||Jg(a.j,a)}function ei(a){fl(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,fg(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function pl(a,l){try{var d=a.j;if(d.G!=0&&(d.g==a||ml(d.h,a))){if(!a.K&&ml(d.h,a)&&d.G==3){try{var p=d.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)ga(d),pa(d);else break e;yl(d),rt(18)}}else d.za=T[1],0<d.za-d.T&&37500>T[2]&&d.F&&d.v==0&&!d.C&&(d.C=ls(I(d.Za,d),6e3));if(1>=Rg(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ni(d,11)}else if((a.K||d.g==a)&&ga(d),!Q(l))for(T=d.Da.g.parse(l),l=0;l<T.length;l++){let ae=T[l];if(d.T=ae[0],ae=ae[1],d.G==2)if(ae[0]=="c"){d.K=ae[1],d.ia=ae[2];let Qe=ae[3];Qe!=null&&(d.la=Qe,d.j.info("VER="+d.la));let Ye=ae[4];Ye!=null&&(d.Aa=Ye,d.j.info("SVER="+d.Aa));let Ui=ae[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(p=1.5*Ui,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;let Et=a.g;if(Et){let va=Et.g?Et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var C=p.h;C.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(gl(C,C.h),C.h=null))}if(p.D){let wl=Et.g?Et.g.getResponseHeader("X-HTTP-Session-Id"):null;wl&&(p.ya=wl,ye(p.I,p.D,wl))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var O=a;if(p.qa=e_(p,p.J?p.ia:null,p.W),O.K){Dg(p.h,O);var ge=O,ze=p.L;ze&&(ge.I=ze),ge.B&&(fl(ge),ca(ge)),p.g=O}else Qg(p);0<d.i.length&&ma(d)}else ae[0]!="stop"&&ae[0]!="close"||ni(d,7);else d.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?ni(d,7):vl(d):ae[0]!="noop"&&d.l&&d.l.ta(ae),d.v=0)}}us(4)}catch{}}var XT=class{constructor(a,l){this.g=a,this.map=l}};function Sg(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Rg(a){return a.h?1:a.g?a.g.size:0}function ml(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function gl(a,l){a.g?a.g.add(l):a.h=l}function Dg(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Sg.prototype.cancel=function(){if(this.i=Pg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Pg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let d of a.g.values())l=l.concat(d.D);return l}return N(a.i)}function ZT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],d=a.length,p=0;p<d;p++)l.push(a[p]);return l}l=[],d=0;for(p in a)l[d++]=a[p];return l}function eA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var d=0;d<a;d++)l.push(d);return l}l=[],d=0;for(let p in a)l[d++]=p;return l}}}function kg(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var d=eA(a),p=ZT(a),T=p.length,C=0;C<T;C++)l.call(void 0,p[C],d&&d[C],a)}var Ng=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tA(a,l){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var p=a[d].indexOf("="),T=null;if(0<=p){var C=a[d].substring(0,p);T=a[d].substring(p+1)}else C=a[d];l(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ti(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ti){this.h=a.h,ua(this,a.j),this.o=a.o,this.g=a.g,la(this,a.s),this.l=a.l;var l=a.i,d=new ms;d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),Og(this,d),this.m=a.m}else a&&(l=String(a).match(Ng))?(this.h=!1,ua(this,l[1]||"",!0),this.o=fs(l[2]||""),this.g=fs(l[3]||"",!0),la(this,l[4]),this.l=fs(l[5]||"",!0),Og(this,l[6]||"",!0),this.m=fs(l[7]||"")):(this.h=!1,this.i=new ms(null,this.h))}ti.prototype.toString=function(){var a=[],l=this.j;l&&a.push(ps(l,Mg,!0),":");var d=this.g;return(d||l=="file")&&(a.push("//"),(l=this.o)&&a.push(ps(l,Mg,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ps(d,d.charAt(0)=="/"?rA:iA,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ps(d,oA)),a.join("")};function Ht(a){return new ti(a)}function ua(a,l,d){a.j=d?fs(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function la(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function Og(a,l,d){l instanceof ms?(a.i=l,aA(a.i,a.h)):(d||(l=ps(l,sA)),a.i=new ms(l,a.h))}function ye(a,l,d){a.i.set(l,d)}function ha(a){return ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function fs(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ps(a,l,d){return typeof a=="string"?(a=encodeURI(a).replace(l,nA),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function nA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Mg=/[#\/\?@]/g,iA=/[#\?:]/g,rA=/[#\?]/g,sA=/[#\?@]/g,oA=/#/g;function ms(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function In(a){a.g||(a.g=new Map,a.h=0,a.i&&tA(a.i,function(l,d){a.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}n=ms.prototype,n.add=function(a,l){In(this),this.i=null,a=Vi(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(l),this.h+=1,this};function xg(a,l){In(a),l=Vi(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Lg(a,l){return In(a),l=Vi(a,l),a.g.has(l)}n.forEach=function(a,l){In(this),this.g.forEach(function(d,p){d.forEach(function(T){a.call(l,T,p,this)},this)},this)},n.na=function(){In(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),d=[];for(let p=0;p<l.length;p++){let T=a[p];for(let C=0;C<T.length;C++)d.push(l[p])}return d},n.V=function(a){In(this);let l=[];if(typeof a=="string")Lg(this,a)&&(l=l.concat(this.g.get(Vi(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)l=l.concat(a[d])}return l},n.set=function(a,l){return In(this),this.i=null,a=Vi(this,a),Lg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Vg(a,l,d){xg(a,l),0<d.length&&(a.i=null,a.g.set(Vi(a,l),N(d)),a.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var d=0;d<l.length;d++){var p=l[d];let C=encodeURIComponent(String(p)),O=this.V(p);for(p=0;p<O.length;p++){var T=C;O[p]!==""&&(T+="="+encodeURIComponent(String(O[p]))),a.push(T)}}return this.i=a.join("&")};function Vi(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function aA(a,l){l&&!a.j&&(In(a),a.i=null,a.g.forEach(function(d,p){var T=p.toLowerCase();p!=T&&(xg(this,p),Vg(this,T,d))},a)),a.j=l}function cA(a,l){let d=new hs;if(c.Image){let p=new Image;p.onload=S(wn,d,"TestLoadImage: loaded",!0,l,p),p.onerror=S(wn,d,"TestLoadImage: error",!1,l,p),p.onabort=S(wn,d,"TestLoadImage: abort",!1,l,p),p.ontimeout=S(wn,d,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function uA(a,l){let d=new hs,p=new AbortController,T=setTimeout(()=>{p.abort(),wn(d,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(C=>{clearTimeout(T),C.ok?wn(d,"TestPingServer: ok",!0,l):wn(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),wn(d,"TestPingServer: error",!1,l)})}function wn(a,l,d,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(d)}catch{}}function lA(){this.g=new WT}function hA(a,l,d){let p=d||"";try{kg(a,function(T,C){let O=T;h(T)&&(O=ol(T)),l.push(p+C+"="+encodeURIComponent(O))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function gs(a){this.l=a.Ub||null,this.j=a.eb||!1}D(gs,al),gs.prototype.g=function(){return new da(this.l,this.j)},gs.prototype.i=function(a){return function(){return a}}({});function da(a,l){Ke.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(da,Ke),n=da.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,vs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,vs(this)),this.g&&(this.readyState=3,vs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?_s(this):vs(this),this.readyState==3&&Fg(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,_s(this))},n.Qa=function(a){this.g&&(this.response=a,_s(this))},n.ga=function(){this.g&&_s(this)};function _s(a){a.readyState=4,a.l=null,a.j=null,a.v=null,vs(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=l.next();return a.join(`\r
`)};function vs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ug(a){let l="";return oe(a,function(d,p){l+=p,l+=":",l+=d,l+=`\r
`}),l}function _l(a,l,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Ug(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):ye(a,l,d))}function Ce(a){Ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ce,Ke);var dA=/^https?$/i,fA=["POST","PUT"];n=Ce.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ll.g(),this.v=this.o?pg(this.o):pg(ll),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(C){jg(this,C);return}if(a=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)d.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())d.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fA,l,void 0))||p||T||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,O]of d)this.g.setRequestHeader(C,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zg(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){jg(this,C)}};function jg(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Bg(a),fa(a)}function Bg(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,it(this,"complete"),it(this,"abort"),fa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fa(this,!0)),Ce.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$g(this):this.bb())},n.bb=function(){$g(this)};function $g(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Kt(a)!=4||a.Z()!=2)){if(a.u&&Kt(a)==4)lg(a.Ea,0,a);else if(it(a,"readystatechange"),Kt(a)==4){a.h=!1;try{let O=a.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var p;if(p=O===0){var T=String(a.D).match(Ng)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!dA.test(T?T.toLowerCase():"")}d=p}if(d)it(a,"complete"),it(a,"success");else{a.m=6;try{var C=2<Kt(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",Bg(a)}}finally{fa(a)}}}}function fa(a,l){if(a.g){zg(a);let d=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||it(a,"ready");try{d.onreadystatechange=p}catch{}}}function zg(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Kt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),GT(l)}};function qg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function pA(a){let l={};a=(a.g&&2<=Kt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(Q(a[p]))continue;var d=b(a[p]);let T=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let C=l[T]||[];l[T]=C,C.push(d)}E(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(a,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||l}function Gg(a){this.Aa=0,this.i=[],this.j=new hs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ys("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ys("baseRetryDelayMs",5e3,a),this.cb=ys("retryDelaySeedMs",1e4,a),this.Wa=ys("forwardChannelMaxRetries",2,a),this.wa=ys("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Sg(a&&a.concurrentRequestLimit),this.Da=new lA,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Gg.prototype,n.la=8,n.G=1,n.connect=function(a,l,d,p){rt(0),this.W=a,this.H=l||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=e_(this,null,this.W),ma(this)};function vl(a){if(Wg(a),a.G==3){var l=a.U++,d=Ht(a.I);if(ye(d,"SID",a.K),ye(d,"RID",l),ye(d,"TYPE","terminate"),Is(a,d),l=new yn(a,a.j,l),l.L=2,l.v=ha(Ht(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=l.v,d=!0),d||(l.g=t_(l.j,null),l.g.ea(l.v)),l.F=Date.now(),ca(l)}Zg(a)}function pa(a){a.g&&(Il(a),a.g.cancel(),a.g=null)}function Wg(a){pa(a),a.u&&(c.clearTimeout(a.u),a.u=null),ga(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function ma(a){if(!Cg(a.h)&&!a.s){a.s=!0;var l=a.Ga;is||rg(),rs||(is(),rs=!0),Ju.add(l,a),a.B=0}}function mA(a,l){return Rg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ls(I(a.Ga,a,l),Xg(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new yn(this,this.j,a),C=this.o;if(this.S&&(C?(C=_(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=Kg(this,T,l),d=Ht(this.I),ye(d,"RID",a),ye(d,"CVER",22),this.D&&ye(d,"X-HTTP-Session-Id",this.D),Is(this,d),C&&(this.O?l="headers="+encodeURIComponent(String(Ug(C)))+"&"+l:this.m&&_l(d,this.m,C)),gl(this.h,T),this.Ua&&ye(d,"TYPE","init"),this.P?(ye(d,"$req",l),ye(d,"SID","null"),T.T=!0,dl(T,d,null)):dl(T,d,l),this.G=2}}else this.G==3&&(a?Hg(this,a):this.i.length==0||Cg(this.h)||Hg(this))};function Hg(a,l){var d;l?d=l.l:d=a.U++;let p=Ht(a.I);ye(p,"SID",a.K),ye(p,"RID",d),ye(p,"AID",a.T),Is(a,p),a.m&&a.o&&_l(p,a.m,a.o),d=new yn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Kg(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),gl(a.h,d),dl(d,p,l)}function Is(a,l){a.H&&oe(a.H,function(d,p){ye(l,p,d)}),a.l&&kg({},function(d,p){ye(l,p,d)})}function Kg(a,l,d){d=Math.min(a.i.length,d);var p=a.l?I(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let O=["count="+d];C==-1?0<d?(C=T[0].g,O.push("ofs="+C)):C=0:O.push("ofs="+C);let ge=!0;for(let ze=0;ze<d;ze++){let ae=T[ze].g,Qe=T[ze].map;if(ae-=C,0>ae)C=Math.max(0,T[ze].g-100),ge=!1;else try{hA(Qe,O,"req"+ae+"_")}catch{p&&p(Qe)}}if(ge){p=O.join("&");break e}}}return a=a.i.splice(0,d),l.D=a,p}function Qg(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;is||rg(),rs||(is(),rs=!0),Ju.add(l,a),a.v=0}}function yl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ls(I(a.Fa,a),Xg(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Yg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ls(I(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),pa(this),Yg(this))};function Il(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Yg(a){a.g=new yn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Ht(a.qa);ye(l,"RID","rpc"),ye(l,"SID",a.K),ye(l,"AID",a.T),ye(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&ye(l,"TO",a.ja),ye(l,"TYPE","xmlhttp"),Is(a,l),a.m&&a.o&&_l(l,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=ha(Ht(l)),d.m=null,d.P=!0,bg(d,a)}n.Za=function(){this.C!=null&&(this.C=null,pa(this),yl(this),rt(19))};function ga(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Jg(a,l){var d=null;if(a.g==l){ga(a),Il(a),a.g=null;var p=2}else if(ml(a.h,l))d=l.D,Dg(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){d=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=sa(),it(p,new yg(p,d)),ma(a)}else Qg(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&mA(a,l)||p==2&&yl(a)))switch(d&&0<d.length&&(l=a.h,l.i=l.i.concat(d)),T){case 1:ni(a,5);break;case 4:ni(a,10);break;case 3:ni(a,6);break;default:ni(a,2)}}}function Xg(a,l){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*l}function ni(a,l){if(a.j.info("Error code "+l),l==2){var d=I(a.fb,a),p=a.Xa;let T=!p;p=new ti(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ua(p,"https"),ha(p),T?cA(p.toString(),d):uA(p.toString(),d)}else rt(2);a.G=0,a.l&&a.l.sa(l),Zg(a),Wg(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Zg(a){if(a.G=0,a.ka=[],a.l){let l=Pg(a.h);(l.length!=0||a.i.length!=0)&&(P(a.ka,l),P(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function e_(a,l,d){var p=d instanceof ti?Ht(d):new ti(d);if(p.g!="")l&&(p.g=l+"."+p.g),la(p,p.s);else{var T=c.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var C=new ti(null);p&&ua(C,p),l&&(C.g=l),T&&la(C,T),d&&(C.l=d),p=C}return d=a.D,l=a.ya,d&&l&&ye(p,d,l),ye(p,"VER",a.la),Is(a,p),p}function t_(a,l,d){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new Ce(new gs({eb:d})):new Ce(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function n_(){}n=n_.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _a(){}_a.prototype.g=function(a,l){return new ut(a,l)};function ut(a,l){Ke.call(this),this.g=new Gg(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!Q(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!Q(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Fi(this)}D(ut,Ke),ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ut.prototype.close=function(){vl(this.g)},ut.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=ol(a),a=d);l.i.push(new XT(l.Ya++,a)),l.G==3&&ma(l)},ut.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,ut.aa.N.call(this)};function i_(a){cl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let d in l){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}D(i_,cl);function r_(){ul.call(this),this.status=1}D(r_,ul);function Fi(a){this.g=a}D(Fi,n_),Fi.prototype.ua=function(){it(this.g,"a")},Fi.prototype.ta=function(a){it(this.g,new i_(a))},Fi.prototype.sa=function(a){it(this.g,new r_)},Fi.prototype.ra=function(){it(this.g,"b")},_a.prototype.createWebChannel=_a.prototype.g,ut.prototype.send=ut.prototype.o,ut.prototype.open=ut.prototype.m,ut.prototype.close=ut.prototype.close,kf=dn.createWebChannelTransport=function(){return new _a},Pf=dn.getStatEventTarget=function(){return sa()},Df=dn.Event=Zn,Wc=dn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,Ao=dn.ErrorCode=oa,Ig.COMPLETE="complete",Rf=dn.EventType=Ig,mg.EventType=cs,cs.OPEN="a",cs.CLOSE="b",cs.ERROR="c",cs.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,br=dn.WebChannel=mg,ON=dn.FetchXmlHttpFactory=gs,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,Cf=dn.XhrIo=Ce}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});var Rw="@firebase/firestore";var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");var Hr="10.14.0";var Ai=new Un("@firebase/firestore");function So(){return Ai.logLevel}function L(n,...e){if(Ai.logLevel<=ne.DEBUG){let t=e.map(pm);Ai.debug(`Firestore (${Hr}): ${n}`,...t)}}function fn(n,...e){if(Ai.logLevel<=ne.ERROR){let t=e.map(pm);Ai.error(`Firestore (${Hr}): ${n}`,...t)}}function Pr(n,...e){if(Ai.logLevel<=ne.WARN){let t=e.map(pm);Ai.warn(`Firestore (${Hr}): ${n}`,...t)}}function pm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${Hr}) INTERNAL ASSERTION FAILED: `+n;throw fn(e),new Error(e)}function he(n,e){n||H()}function K(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends mt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Jc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Lf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($e.UNAUTHENTICATED))}shutdown(){}},Vf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ff=class{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){he(this.o===void 0);let i=this.i,r=u=>this.i!==i?(i=this.i,t(u)):Promise.resolve(),s=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(he(typeof i.accessToken=="string"),new Jc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new $e(e)}},Uf=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},jf=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Uf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Bf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$f=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){he(this.o===void 0);let i=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(he(typeof t.token=="string"),this.R=t.token,new Bf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function MN(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Xc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=MN(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function ce(n,e){return n<e?-1:n>e?1:0}function kr(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var We=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new x(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new We(0,0))}static max(){return new n(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zc=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&H(),i===void 0?i=e.length-t:i>e.length-t&&H(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Se=class n extends Zc{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new x(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},xN=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=class n extends Zc{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return xN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new x(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new x(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new x(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new x(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};var zf=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};zf.UNKNOWN_ID=-1;function LN(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=X.fromTimestamp(i===1e9?new We(t+1,0):new We(t,i));return new Si(r,$.empty(),e)}function VN(n){return new Si(n.readTime,n.key,-1)}var Si=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(X.min(),$.empty(),-1)}static max(){return new n(X.max(),$.empty(),-1)}};function FN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}var UN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zo(n){return m(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==UN)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},u=>i(u))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let h=u;t(e[h]).next(f=>{o[h]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function jN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qo(n){return n.name==="IndexedDbTransactionError"}var uE=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ku(n){return n==null}function No(n){return n===0&&1/n==-1/0}function BN(n){return typeof n=="number"&&Number.isInteger(n)&&!No(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var $N=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JU=[...$N,"documentOverlays"],zN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qN=zN,GN=[...qN,"indexConfiguration","indexState","indexEntries"];var XU=[...GN,"globals"];function Dw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ki(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Re=class n{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cr(this.root,e,this.comparator,!0)}},Cr=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$t=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,i,r,s){return this}insert(e,t,i){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class n{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eu(this.data.getIterator())}getIteratorFrom(e){return new eu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},eu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Bt=class n{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new n([])}unionWith(e){let t=new tt(gt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kr(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var tu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tu("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var WN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pn(n){if(he(!!n),typeof n=="string"){let e=0,t=WN.exec(n);if(he(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Te(n.seconds),nanos:Te(n.nanos)}}function Te(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qn(n){return typeof n=="string"?nt.fromBase64String(n):nt.fromUint8Array(n)}function mm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function gm(n){let e=n.mapValue.fields.__previous_value__;return mm(e)?gm(e):e}function Oo(n){let e=pn(n.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}var Gf=class{constructor(e,t,i,r,s,o,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}},nu=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Hc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mm(n)?4:dE(n)?9007199254740991:hE(n)?10:11:H()}function Gt(n,e){if(n===e)return!0;let t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oo(n).isEqual(Oo(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=pn(r.timestampValue),c=pn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Qn(r.bytesValue).isEqual(Qn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Te(r.geoPointValue.latitude)===Te(s.geoPointValue.latitude)&&Te(r.geoPointValue.longitude)===Te(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Te(r.integerValue)===Te(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Te(r.doubleValue),c=Te(s.doubleValue);return o===c?No(o)===No(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return kr(n.arrayValue.values||[],e.arrayValue.values||[],Gt);case 10:case 11:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Dw(o)!==Dw(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Gt(o[u],c[u])))return!1;return!0}(n,e);default:return H()}}function Mo(n,e){return(n.values||[]).find(t=>Gt(t,e))!==void 0}function Nr(n,e){if(n===e)return 0;let t=Ci(n),i=Ci(e);if(t!==i)return ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Te(s.integerValue||s.doubleValue),u=Te(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return Pw(n.timestampValue,e.timestampValue);case 4:return Pw(Oo(n),Oo(e));case 5:return ce(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Qn(s),u=Qn(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){let f=ce(c[h],u[h]);if(f!==0)return f}return ce(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ce(Te(s.latitude),Te(o.latitude));return c!==0?c:ce(Te(s.longitude),Te(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kw(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,h,f;let g=s.fields||{},I=o.fields||{},S=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=(u=I.value)===null||u===void 0?void 0:u.arrayValue,N=ce(((h=S?.values)===null||h===void 0?void 0:h.length)||0,((f=D?.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:kw(S,D)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Hc.mapValue&&o===Hc.mapValue)return 0;if(s===Hc.mapValue)return 1;if(o===Hc.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let I=ce(u[g],f[g]);if(I!==0)return I;let S=Nr(c[u[g]],h[f[g]]);if(S!==0)return S}return ce(u.length,f.length)}(n.mapValue,e.mapValue);default:throw H()}}function Pw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);let t=pn(n),i=pn(e),r=ce(t.seconds,i.seconds);return r!==0?r:ce(t.nanos,i.nanos)}function kw(n,e){let t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){let s=Nr(t[r],i[r]);if(s)return s}return ce(t.length,i.length)}function Or(n){return Wf(n)}function Wf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=pn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Wf(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Wf(t.fields[o])}`;return r+"}"}(n.mapValue):H()}function Nw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hf(n){return!!n&&"integerValue"in n}function _m(n){return!!n&&"arrayValue"in n}function Ow(n){return!!n&&"nullValue"in n}function Mw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qc(n){return!!n&&"mapValue"in n}function hE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ro(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ki(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ro(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ro(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var It=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Qc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ro(t)}setAll(e){let t=gt.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=Ro(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Qc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Qc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){ki(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Ro(this.value))}};function fE(n){let e=[];return ki(n.fields,(t,i)=>{let r=new gt([t]);if(Qc(i)){let s=fE(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Bt(e)}var Dt=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,X.min(),X.min(),X.min(),It.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,X.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,X.min(),X.min(),It.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,X.min(),X.min(),It.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mr=class{constructor(e,t){this.position=e,this.inclusive=t}};function xw(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=$.comparator($.fromName(o.referenceValue),t.key):i=Nr(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Lw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gt(n.position[t],e.position[t]))return!1;return!0}var xr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function HN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var iu=class{},xe=class n extends iu{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Qf(e,t,i):t==="array-contains"?new Xf(e,i):t==="in"?new Zf(e,i):t==="not-in"?new ep(e,i):t==="array-contains-any"?new tp(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Yf(e,i):new Jf(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Nr(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Nr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Pt=class n extends iu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return pE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pE(n){return n.op==="and"}function mE(n){return KN(n)&&pE(n)}function KN(n){for(let e of n.filters)if(e instanceof Pt)return!1;return!0}function Kf(n){if(n instanceof xe)return n.field.canonicalString()+n.op.toString()+Or(n.value);if(mE(n))return n.filters.map(e=>Kf(e)).join(",");{let e=n.filters.map(t=>Kf(t)).join(",");return`${n.op}(${e})`}}function gE(n,e){return n instanceof xe?function(i,r){return r instanceof xe&&i.op===r.op&&i.field.isEqual(r.field)&&Gt(i.value,r.value)}(n,e):n instanceof Pt?function(i,r){return r instanceof Pt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&gE(o,r.filters[c]),!0):!1}(n,e):void H()}function _E(n){return n instanceof xe?function(t){return`${t.field.canonicalString()} ${t.op} ${Or(t.value)}`}(n):n instanceof Pt?function(t){return t.op.toString()+" {"+t.getFilters().map(_E).join(" ,")+"}"}(n):"Filter"}var Qf=class extends xe{constructor(e,t,i){super(e,t,i),this.key=$.fromName(i.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Yf=class extends xe{constructor(e,t){super(e,"in",t),this.keys=vE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Jf=class extends xe{constructor(e,t){super(e,"not-in",t),this.keys=vE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function vE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>$.fromName(i.referenceValue))}var Xf=class extends xe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return _m(t)&&Mo(t.arrayValue,this.value)}},Zf=class extends xe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Mo(this.value.arrayValue,t)}},ep=class extends xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Mo(this.value.arrayValue,t)}},tp=class extends xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!_m(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Mo(this.value.arrayValue,i))}};var np=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Vw(n,e=null,t=[],i=[],r=null,s=null,o=null){return new np(n,e,t,i,r,s,o)}function vm(n){let e=K(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Kf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ku(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Or(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Or(i)).join(",")),e.ue=t}return e.ue}function ym(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Lw(n.startAt,e.startAt)&&Lw(n.endAt,e.endAt)}function ip(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ri=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function QN(n,e,t,i,r,s,o,c){return new Ri(n,e,t,i,r,s,o,c)}function Im(n){return new Ri(n)}function Fw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yE(n){return n.collectionGroup!==null}function Do(n){let e=K(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(gt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xr(s,i))}),t.has(gt.keyField().canonicalString())||e.ce.push(new xr(gt.keyField(),i))}return e.ce}function zt(n){let e=K(n);return e.le||(e.le=YN(e,Do(n))),e.le}function YN(n,e){if(n.limitType==="F")return Vw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new xr(r.field,s)});let t=n.endAt?new Mr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Mr(n.startAt.position,n.startAt.inclusive):null;return Vw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function rp(n,e){let t=n.filters.concat([e]);return new Ri(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sp(n,e,t){return new Ri(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nu(n,e){return ym(zt(n),zt(e))&&n.limitType===e.limitType}function IE(n){return`${vm(zt(n))}|lt:${n.limitType}`}function Tr(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>_E(r)).join(", ")}]`),ku(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Or(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Or(r)).join(",")),`Target(${i})`}(zt(n))}; limitType=${n.limitType})`}function Ou(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):$.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Do(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,u){let h=xw(o,c,u);return o.inclusive?h<=0:h<0}(i.startAt,Do(i),r)||i.endAt&&!function(o,c,u){let h=xw(o,c,u);return o.inclusive?h>=0:h>0}(i.endAt,Do(i),r))}(n,e)}function JN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function wE(n){return(e,t)=>{let i=!1;for(let r of Do(n)){let s=XN(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function XN(n,e,t){let i=n.field.isKeyField()?$.comparator(e.key,t.key):function(s,o,c){let u=o.data.field(s),h=c.data.field(s);return u!==null&&h!==null?Nr(u,h):H()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return H()}}var Yn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return lE(this.inner)}size(){return this.innerSize}};var ZN=new Re($.comparator);function mn(){return ZN}var EE=new Re($.comparator);function Co(...n){let e=EE;for(let t of n)e=e.insert(t.key,t);return e}function bE(n){let e=EE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function wi(){return Po()}function TE(){return Po()}function Po(){return new Yn(n=>n.toString(),(n,e)=>n.isEqual(e))}var eO=new Re($.comparator),tO=new tt($.comparator);function ie(...n){let e=tO;for(let t of n)e=e.add(t);return e}var nO=new tt(ce);function iO(){return nO}function wm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:No(e)?"-0":e}}function AE(n){return{integerValue:""+n}}function rO(n,e){return BN(e)?AE(e):wm(n,e)}var Lr=class{constructor(){this._=void 0}};function sO(n,e,t){return n instanceof Vr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&mm(s)&&(s=gm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Jn?CE(n,e):n instanceof Di?RE(n,e):function(r,s){let o=SE(r,s),c=Uw(o)+Uw(r.Pe);return Hf(o)&&Hf(r.Pe)?AE(c):wm(r.serializer,c)}(n,e)}function oO(n,e,t){return n instanceof Jn?CE(n,e):n instanceof Di?RE(n,e):t}function SE(n,e){return n instanceof Fr?function(i){return Hf(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Vr=class extends Lr{},Jn=class extends Lr{constructor(e){super(),this.elements=e}};function CE(n,e){let t=DE(e);for(let i of n.elements)t.some(r=>Gt(r,i))||t.push(i);return{arrayValue:{values:t}}}var Di=class extends Lr{constructor(e){super(),this.elements=e}};function RE(n,e){let t=DE(e);for(let i of n.elements)t=t.filter(r=>!Gt(r,i));return{arrayValue:{values:t}}}var Fr=class extends Lr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Uw(n){return Te(n.integerValue||n.doubleValue)}function DE(n){return _m(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var op=class{constructor(e,t){this.field=e,this.transform=t}};function aO(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Jn&&r instanceof Jn||i instanceof Di&&r instanceof Di?kr(i.elements,r.elements,Gt):i instanceof Fr&&r instanceof Fr?Gt(i.Pe,r.Pe):i instanceof Vr&&r instanceof Vr}(n.transform,e.transform)}var ap=class{constructor(e,t){this.version=e,this.transformResults=t}},Ti=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Yc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ur=class{};function PE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ru(n.key,Ti.none()):new jr(n.key,n.data,Ti.none());{let t=n.data,i=It.empty(),r=new tt(gt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new gn(n.key,i,new Bt(r.toArray()),Ti.none())}}function cO(n,e,t){n instanceof jr?function(r,s,o){let c=r.value.clone(),u=Bw(r.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof gn?function(r,s,o){if(!Yc(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Bw(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(kE(r)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ko(n,e,t,i){return n instanceof jr?function(s,o,c,u){if(!Yc(s.precondition,o))return c;let h=s.value.clone(),f=$w(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,i):n instanceof gn?function(s,o,c,u){if(!Yc(s.precondition,o))return c;let h=$w(s.fieldTransforms,u,o),f=o.data;return f.setAll(kE(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,i):function(s,o,c){return Yc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function uO(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=SE(i.transform,r||null);s!=null&&(t===null&&(t=It.empty()),t.set(i.field,s))}return t||null}function jw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&kr(i,r,(s,o)=>aO(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var jr=class extends Ur{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},gn=class extends Ur{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function kE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Bw(n,e,t){let i=new Map;he(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,oO(o,c,t[r]))}return i}function $w(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,sO(s,o,e))}return i}var ru=class extends Ur{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cp=class extends Ur{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var up=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&cO(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=ko(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=ko(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=TE();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let u=PE(o,c);u!==null&&i.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&kr(this.mutations,e.mutations,(t,i)=>jw(t,i))&&kr(this.baseMutations,e.baseMutations,(t,i)=>jw(t,i))}},lp=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){he(e.mutations.length===i.length);let r=function(){return eO}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var hp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var dp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Oe,se;function lO(n){switch(n){default:return H();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function NE(n){if(n===void 0)return fn("GRPC error has no .code"),R.UNKNOWN;switch(n){case Oe.OK:return R.OK;case Oe.CANCELLED:return R.CANCELLED;case Oe.UNKNOWN:return R.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return R.INTERNAL;case Oe.UNAVAILABLE:return R.UNAVAILABLE;case Oe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Oe.NOT_FOUND:return R.NOT_FOUND;case Oe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Oe.ABORTED:return R.ABORTED;case Oe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Oe.DATA_LOSS:return R.DATA_LOSS;default:return H()}}(se=Oe||(Oe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var zw=null;function hO(){return new TextEncoder}var dO=new Hn([4294967295,4294967295],0);function qw(n){let e=hO().encode(n),t=new Sf;return t.update(e),new Uint8Array(t.digest())}function Gw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hn([t,i],0),new Hn([r,s],0)]}var fp=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ei(`Invalid padding: ${t}`);if(i<0)throw new Ei(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ei(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ei(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Hn.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Hn.fromNumber(i)));return r.compare(dO)===1&&(r=new Hn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=qw(e),[i,r]=Gw(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=qw(e),[i,r]=Gw(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Ei=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var su=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,xo.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(X.min(),r,new Re(ce),mn(),ie())}},xo=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,ie(),ie(),ie())}};var Rr=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},ou=class{constructor(e,t){this.targetId=e,this.me=t}},au=class{constructor(e,t,i=nt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},cu=class{constructor(){this.fe=0,this.ge=Hw(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),i=ie();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:H()}}),new xo(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Hw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},pp=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=mn(),this.qe=Ww(),this.Qe=new Re(ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(ip(s))if(i===0){let o=new $(s.path);this.Ue(t,o,Dt.newNoDocument(o,X.min()))}else he(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(t);let h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}zw?.et(function(f,g,I,S,D){var N,P,W,Q,Y,de;let Fe={localCacheCount:f,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},oe=g.unchangedNames;return oe&&(Fe.bloomFilter={applied:D===0,hashCount:(N=oe?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(Q=(W=(P=oe?.bits)===null||P===void 0?void 0:P.bitmap)===null||W===void 0?void 0:W.length)!==null&&Q!==void 0?Q:0,padding:(de=(Y=oe?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&de!==void 0?de:0,mightContain:E=>{var _;return(_=S?.mightContain(E))!==null&&_!==void 0&&_}}),Fe}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=Qn(i).toUint8Array()}catch(u){if(u instanceof tu)return Pr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new fp(o,r,s)}catch(u){return Pr(u instanceof Ei?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&ip(c.target)){let u=new $(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Dt.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=ie();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new su(e,t,this.Qe,this.ke,i);return this.ke=mn(),this.qe=Ww(),this.Qe=new Re(ce),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new cu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tt(ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Ww(){return new Re($.comparator)}function Hw(){return new Re($.comparator)}var fO={asc:"ASCENDING",desc:"DESCENDING"},pO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mO={and:"AND",or:"OR"},mp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function gp(n,e){return n.useProto3Json||ku(e)?e:{value:e}}function uu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gO(n,e){return uu(n,e.toTimestamp())}function qt(n){return he(!!n),X.fromTimestamp(function(t){let i=pn(t);return new We(i.seconds,i.nanos)}(n))}function Em(n,e){return _p(n,e).canonicalString()}function _p(n,e){let t=function(r){return new Se(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ME(n){let e=Se.fromString(n);return he(UE(e)),e}function vp(n,e){return Em(n.databaseId,e.path)}function Nf(n,e){let t=ME(e);if(t.get(1)!==n.databaseId.projectId)throw new x(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(LE(t))}function xE(n,e){return Em(n.databaseId,e)}function _O(n){let e=ME(n);return e.length===4?Se.emptyPath():LE(e)}function yp(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LE(n){return he(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Kw(n,e,t){return{name:vp(n,e),fields:t.value.mapValue.fields}}function vO(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(he(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(he(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){let f=h.code===void 0?R.UNKNOWN:NE(h.code);return new x(f,h.message||"")}(o);t=new au(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Nf(n,i.document.name),s=qt(i.document.updateTime),o=i.document.createTime?qt(i.document.createTime):X.min(),c=new It({mapValue:{fields:i.document.fields}}),u=Dt.newFoundDocument(r,s,o,c),h=i.targetIds||[],f=i.removedTargetIds||[];t=new Rr(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Nf(n,i.document),s=i.readTime?qt(i.readTime):X.min(),o=Dt.newNoDocument(r,s),c=i.removedTargetIds||[];t=new Rr([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Nf(n,i.document),s=i.removedTargetIds||[];t=new Rr([],s,r,null)}else{if(!("filter"in e))return H();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new dp(r,s),c=i.targetId;t=new ou(c,o)}}return t}function yO(n,e){let t;if(e instanceof jr)t={update:Kw(n,e.key,e.value)};else if(e instanceof ru)t={delete:vp(n,e.key)};else if(e instanceof gn)t={update:Kw(n,e.key,e.data),updateMask:RO(e.fieldMask)};else{if(!(e instanceof cp))return H();t={verify:vp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof Vr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Jn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Di)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw H()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:gO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(n,e.precondition)),t}function IO(n,e){return n&&n.length>0?(he(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?qt(r.updateTime):qt(s);return o.isEqual(X.min())&&(o=qt(s)),new ap(o,r.transformResults||[])}(t,e))):[]}function wO(n,e){return{documents:[xE(n,e.path)]}}function EO(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=xE(n,r);let s=function(h){if(h.length!==0)return FE(Pt.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(h){if(h.length!==0)return h.map(f=>function(I){return{field:Ar(I.field),direction:AO(I.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=gp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:r}}function bO(n){let e=_O(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){he(i===1);let f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(g){let I=VE(g);return I instanceof Pt&&mE(I)?I.getFilters():[I]}(t.where));let o=[];t.orderBy&&(o=function(g){return g.map(I=>function(D){return new xr(Sr(D.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(I))}(t.orderBy));let c=null;t.limit&&(c=function(g){let I;return I=typeof g=="object"?g.value:g,ku(I)?null:I}(t.limit));let u=null;t.startAt&&(u=function(g){let I=!!g.before,S=g.values||[];return new Mr(S,I)}(t.startAt));let h=null;return t.endAt&&(h=function(g){let I=!g.before,S=g.values||[];return new Mr(S,I)}(t.endAt)),QN(e,r,o,s,c,"F",u,h)}function TO(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function VE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Sr(t.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Sr(t.unaryFilter.field);return xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Sr(t.unaryFilter.field);return xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Sr(t.unaryFilter.field);return xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return xe.create(Sr(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Pt.create(t.compositeFilter.filters.map(i=>VE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function AO(n){return fO[n]}function SO(n){return pO[n]}function CO(n){return mO[n]}function Ar(n){return{fieldPath:n.canonicalString()}}function Sr(n){return gt.fromServerFormat(n.fieldPath)}function FE(n){return n instanceof xe?function(t){if(t.op==="=="){if(Mw(t.value))return{unaryFilter:{field:Ar(t.field),op:"IS_NAN"}};if(Ow(t.value))return{unaryFilter:{field:Ar(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Mw(t.value))return{unaryFilter:{field:Ar(t.field),op:"IS_NOT_NAN"}};if(Ow(t.value))return{unaryFilter:{field:Ar(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ar(t.field),op:SO(t.op),value:t.value}}}(n):n instanceof Pt?function(t){let i=t.getFilters().map(r=>FE(r));return i.length===1?i[0]:{compositeFilter:{op:CO(t.op),filters:i}}}(n):H()}function RO(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Lo=class n{constructor(e,t,i,r,s=X.min(),o=X.min(),c=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ip=class{constructor(e){this.ct=e}};function DO(n){let e=bO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sp(e,e.limit,"L"):e}var lu=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Te(e.integerValue));else if("doubleValue"in e){let i=Te(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),No(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=pn(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Qn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?dE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):hE(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):H()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;let s=e.fields||{};this.dt(t,53);let o="value",c=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Te(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};lu.vt=new lu;var wp=class{constructor(){this.un=new Ep}addToCollectionParentIndex(e,t){return this.un.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Si.min())}updateCollectionGroup(e,t,i){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},Ep=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new tt(Se.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tt(Se.comparator)).toArray()}};var ej=new Uint8Array(0);var jt=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(41943040,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);var Vo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var bp=class{constructor(){this.changes=new Yn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?k.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Tp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ap=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&ko(i.mutation,r,Bt.empty(),We.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ie()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ie()){let r=wi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Co();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=wi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ie()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=mn(),o=Po(),c=function(){return Po()}();return t.forEach((u,h)=>{let f=i.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof gn)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),ko(f.mutation,h,f.mutation.getFieldMask(),We.now())):o.set(h.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var g;return c.set(h,new Tp(f,(g=o.get(h))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let i=Po(),r=new Re((o,c)=>o-c),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let h=t.get(u);if(h===null)return;let f=i.get(u)||Bt.empty();f=c.applyToLocalView(h,f),i.set(u,f);let g=(r.get(c.batchId)||ie()).add(u);r=r.insert(c.batchId,g)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),h=u.key,f=u.value,g=TE();f.forEach(I=>{if(!s.has(I)){let S=PE(t.get(I),i.get(I));S!==null&&g.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return k.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):k.resolve(wi()),c=-1,u=s;return o.next(h=>k.forEach(h,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?k.resolve():this.remoteDocumentCache.getEntry(e,f).next(I=>{u=u.insert(f,I)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ie())).next(f=>({batchId:c,changes:bE(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(i=>{let r=Co();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Co();return this.indexManager.getCollectionParents(e,s).next(c=>k.forEach(c,u=>{let h=function(g,I){return new Ri(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(f=>{f.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((u,h)=>{let f=h.getKey();o.get(f)===null&&(o=o.insert(f,Dt.newInvalidDocument(f)))});let c=Co();return o.forEach((u,h)=>{let f=s.get(u);f!==void 0&&ko(f.mutation,h,Bt.empty(),We.now()),Ou(t,h)&&(c=c.insert(u,h))}),c})}};var Sp=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return k.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:qt(r.createTime)}}(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:DO(r.bundledQuery),readTime:qt(r.readTime)}}(t)),k.resolve()}};var Cp=class{constructor(){this.overlays=new Re($.comparator),this.Ir=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let i=wi();return k.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),k.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),k.resolve()}getOverlaysForCollection(e,t,i){let r=wi(),s=t.length+1,o=new $(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,h=u.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return k.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Re((h,f)=>h-f),o=this.overlays.getIterator();for(;o.hasNext();){let h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let f=s.get(h.largestBatchId);f===null&&(f=wi(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let c=wi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=r)););return k.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new hp(t,i));let s=this.Ir.get(t);s===void 0&&(s=ie(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}};var Rp=class{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var Fo=class{constructor(){this.Tr=new tt(Me.Er),this.dr=new tt(Me.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let i=new Me(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Me(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){let t=new $(new Se([])),i=new Me(t,e),r=new Me(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new Se([])),i=new Me(t,e),r=new Me(t,e+1),s=ie();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Me(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Me=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ce(e.wr,t.wr)}static Ar(e,t){return ce(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Dp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new tt(Me.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new up(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.br=this.br.add(new Me(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,t){return k.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.vr(i),s=r<0?0:r;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Me(t,0),r=new Me(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{let c=this.Dr(o.wr);s.push(c)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tt(ce);return t.forEach(r=>{let s=new Me(r,0),o=new Me(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{i=i.add(c.wr)})}),k.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;$.isDocumentKey(s)||(s=s.child(""));let o=new Me(new $(s),0),c=new tt(ce);return this.br.forEachWhile(u=>{let h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(c=c.add(u.wr)),!0)},o),k.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.Dr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){he(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return k.forEach(t.mutations,r=>{let s=new Me(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){let i=new Me(t,0),r=this.br.firstAfterOrEqual(i);return k.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Pp=class{constructor(e){this.Mr=e,this.docs=function(){return new Re($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return k.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(t))}getEntries(e,t){let i=mn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Dt.newInvalidDocument(r))}),k.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=mn(),o=t.path,c=new $(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||FN(VN(f),i)<=0||(r.has(f.key)||Ou(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,i,r){H()}Or(e,t){return k.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new kp(this)}getSize(e){return k.resolve(this.size)}},kp=class extends bp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),k.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Np=class{constructor(e){this.persistence=e,this.Nr=new Yn(t=>vm(t),ym),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Fo,this.targetCount=0,this.kr=Vo.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),k.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Kn(t),k.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),k.waitFor(s).next(()=>r)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let i=this.Nr.get(t)||null;return k.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),k.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Br.yr(t);return k.resolve(i)}containsKey(e,t){return k.resolve(this.Br.containsKey(t))}};var Op=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new uE(0),this.Kr=!1,this.Kr=!0,this.$r=new Rp,this.referenceDelegate=e(this),this.Ur=new Np(this),this.indexManager=new wp,this.remoteDocumentCache=function(r){return new Pp(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Ip(t),this.Gr=new Sp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Dp(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){L("MemoryPersistence","Starting transaction:",e);let r=new Mp(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return k.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}},Mp=class extends qf{constructor(e){super(),this.currentSequenceNumber=e}},xp=class n{constructor(e){this.persistence=e,this.Jr=new Fo,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),k.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),k.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,i=>{let r=$.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,X.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return k.or([()=>k.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Lp=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=ie(),r=ie();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var Vp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Fp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Iy()?8:jN(je())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Vp;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(So()<=ne.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Tr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(So()<=ne.DEBUG&&L("QueryEngine","Query:",Tr(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(So()<=ne.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Tr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zt(t))):k.resolve())}Yi(e,t){if(Fw(t))return k.resolve(null);let i=zt(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=sp(t,null,"F"),i=zt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=ie(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(u=>{let h=this.ts(t,c);return this.ns(t,h,o,u.readTime)?this.Yi(e,sp(t,null,"F")):this.rs(e,h,t,u)}))})))}Zi(e,t,i,r){return Fw(t)||r.isEqual(X.min())?k.resolve(null):this.Ji.getDocuments(e,i).next(s=>{let o=this.ts(t,s);return this.ns(t,o,i,r)?k.resolve(null):(So()<=ne.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tr(t)),this.rs(e,o,t,LN(r,-1)).next(c=>c))})}ts(e,t){let i=new tt(wE(e));return t.forEach((r,s)=>{Ou(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return So()<=ne.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Tr(t)),this.Ji.getDocumentsMatchingQuery(e,t,Si.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Up=class{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Re(ce),this._s=new Yn(s=>vm(s),ym),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ap(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function PO(n,e,t,i){return new Up(n,e,t,i)}function jE(n,e){return m(this,null,function*(){let t=K(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],u=ie();for(let h of r){o.push(h.batchId);for(let f of h.mutations)u=u.add(f.key)}for(let h of s){c.push(h.batchId);for(let f of h.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(i,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:c}))})})})}function kO(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){let g=h.batch,I=g.keys(),S=k.resolve();return I.forEach(D=>{S=S.next(()=>f.getEntry(u,D)).next(N=>{let P=h.docVersions.get(D);he(P!==null),N.version.compareTo(P)<0&&(g.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=ie();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function BE(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function NO(n,e){let t=K(n),i=e.snapshotVersion,r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;let c=[];e.targetChanges.forEach((f,g)=>{let I=r.get(g);if(!I)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,g).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,g)));let S=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(nt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,i)),r=r.insert(g,S),function(N,P,W){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(I,S,f)&&c.push(t.Ur.updateTargetData(s,S))});let u=mn(),h=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(OO(s,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!i.isEqual(X.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(g=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return k.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(t.os=r,s))}function OO(n,e,t){let i=ie(),r=ie();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=mn();return t.forEach((c,u)=>{let h=s.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):L("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:r}})}function MO(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xO(n,e){let t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,k.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new Lo(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function jp(n,e,t){return m(this,null,function*(){let i=K(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!qo(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})}function Qw(n,e,t){let i=K(n),r=X.min(),s=ie();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){let g=K(u),I=g._s.get(f);return I!==void 0?k.resolve(g.os.get(I)):g.Ur.getTargetData(h,f)}(i,o,zt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:X.min(),t?s:ie())).next(c=>(LO(i,JN(e),c),{documents:c,Ts:s})))}function LO(n,e,t){let i=n.us.get(e)||X.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}var hu=class{constructor(){this.activeTargetIds=iO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Bp=class{constructor(){this.so=new hu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hu,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $p=class{_o(e){}shutdown(){}};var du=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Kc=null;function Of(){return Kc===null?Kc=function(){return 268435456+Math.round(2147483648*Math.random())}():Kc++,"0x"+Kc.toString(16)}var VO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var zp=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var et="WebChannelConnection",qp=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){let c=Of(),u=this.xo(t,i.toUriEncodedString());L("RestConnection",`Sending RPC '${t}' ${c}:`,u,r);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(t,u,h,r).then(f=>(L("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Pr("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",r),f})}Lo(t,i,r,s,o,c){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){let r=VO[t];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){let s=Of();return new Promise((o,c)=>{let u=new Cf;u.setWithCredentials(!0),u.listenOnce(Rf.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ao.NO_ERROR:let f=u.getResponseJson();L(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ao.TIMEOUT:L(et,`RPC '${e}' ${s} timed out`),c(new x(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ao.HTTP_ERROR:let g=u.getStatus();if(L(et,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let I=u.getResponseJson();Array.isArray(I)&&(I=I[0]);let S=I?.error;if(S&&S.status&&S.message){let D=function(P){let W=P.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(W)>=0?W:R.UNKNOWN}(S.status);c(new x(D,S.message))}else c(new x(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new x(R.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{L(et,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(r);L(et,`RPC '${e}' ${s} sending request:`,r),u.send(t,"POST",h,i,15)})}Bo(e,t,i){let r=Of(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kf(),c=Pf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,i),u.encodeInitMessageHeaders=!0;let f=s.join("");L(et,`Creating RPC '${e}' stream ${r}: ${f}`,u);let g=o.createWebChannel(f,u),I=!1,S=!1,D=new zp({Io:P=>{S?L(et,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(I||(L(et,`Opening RPC '${e}' stream ${r} transport.`),g.open(),I=!0),L(et,`RPC '${e}' stream ${r} sending:`,P),g.send(P))},To:()=>g.close()}),N=(P,W,Q)=>{P.listen(W,Y=>{try{Q(Y)}catch(de){setTimeout(()=>{throw de},0)}})};return N(g,br.EventType.OPEN,()=>{S||(L(et,`RPC '${e}' stream ${r} transport opened.`),D.yo())}),N(g,br.EventType.CLOSE,()=>{S||(S=!0,L(et,`RPC '${e}' stream ${r} transport closed`),D.So())}),N(g,br.EventType.ERROR,P=>{S||(S=!0,Pr(et,`RPC '${e}' stream ${r} transport errored:`,P),D.So(new x(R.UNAVAILABLE,"The operation could not be completed")))}),N(g,br.EventType.MESSAGE,P=>{var W;if(!S){let Q=P.data[0];he(!!Q);let Y=Q,de=Y.error||((W=Y[0])===null||W===void 0?void 0:W.error);if(de){L(et,`RPC '${e}' stream ${r} received error:`,de);let Fe=de.status,oe=function(v){let w=Oe[v];if(w!==void 0)return NE(w)}(Fe),E=de.message;oe===void 0&&(oe=R.INTERNAL,E="Unknown error status: "+Fe+" with message "+de.message),S=!0,D.So(new x(oe,E)),g.close()}else L(et,`RPC '${e}' stream ${r} received:`,Q),D.bo(Q)}}),N(c,Df.STAT_EVENT,P=>{P.stat===Wc.PROXY?L(et,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===Wc.NOPROXY&&L(et,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function Mf(){return typeof document<"u"?document:null}function Mu(n){return new mp(n,!0)}var fu=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var pu=class{constructor(e,t,i,r,s,o,c,u){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return m(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return m(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return m(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(fn(t.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{let r=new x(R.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){let i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>m(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Gp=class extends pu{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=vO(this.serializer,e),i=function(s){if(!("targetChange"in s))return X.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?qt(o.readTime):X.min()}(e);return this.listener.d_(t,i)}A_(e){let t={};t.database=yp(this.serializer),t.addTarget=function(s,o){let c,u=o.target;if(c=ip(u)?{documents:wO(s,u)}:{query:EO(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=OE(s,o.resumeToken);let h=gp(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(X.min())>0){c.readTime=uu(s,o.snapshotVersion.toTimestamp());let h=gp(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);let i=TO(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){let t={};t.database=yp(this.serializer),t.removeTarget=e,this.a_(t)}},Wp=class extends pu{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return he(!!e.streamToken),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=IO(e.writeResults,e.commitTime),i=qt(e.commitTime);return this.listener.g_(i,t)}p_(){let e={};e.database=yp(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>yO(this.serializer,i))};this.a_(t)}};var Hp=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new x(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,_p(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(R.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,_p(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(R.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Kp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fn(t),this.D_=!1):L("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Qp=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(()=>m(this,null,function*(){Ni(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let h=K(u);h.L_.add(4),yield Go(h),h.q_.set("Unknown"),h.L_.delete(4),yield xu(h)})}(this))}))}),this.q_=new Kp(i,r)}};function xu(n){return m(this,null,function*(){if(Ni(n))for(let e of n.B_)yield e(!0)})}function Go(n){return m(this,null,function*(){for(let e of n.B_)yield e(!1)})}function $E(n,e){let t=K(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Sm(t)?Am(t):Kr(t).r_()&&Tm(t,e))}function bm(n,e){let t=K(n),i=Kr(t);t.N_.delete(e),i.r_()&&zE(t,e),t.N_.size===0&&(i.r_()?i.o_():Ni(t)&&t.q_.set("Unknown"))}function Tm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Kr(n).A_(e)}function zE(n,e){n.Q_.xe(e),Kr(n).R_(e)}function Am(n){n.Q_=new pp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Kr(n).start(),n.q_.v_()}function Sm(n){return Ni(n)&&!Kr(n).n_()&&n.N_.size>0}function Ni(n){return K(n).L_.size===0}function qE(n){n.Q_=void 0}function FO(n){return m(this,null,function*(){n.q_.set("Online")})}function UO(n){return m(this,null,function*(){n.N_.forEach((e,t)=>{Tm(n,e)})})}function jO(n,e){return m(this,null,function*(){qE(n),Sm(n)?(n.q_.M_(e),Am(n)):n.q_.set("Unknown")})}function BO(n,e,t){return m(this,null,function*(){if(n.q_.set("Online"),e instanceof au&&e.state===2&&e.cause)try{yield function(r,s){return m(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.N_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.N_.delete(c),r.Q_.removeTarget(c))})}(n,e)}catch(i){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield mu(n,i)}else if(e instanceof Rr?n.Q_.Ke(e):e instanceof ou?n.Q_.He(e):n.Q_.We(e),!t.isEqual(X.min()))try{let i=yield BE(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),zE(s,u);let g=new Lo(f.target,u,h,f.sequenceNumber);Tm(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){L("RemoteStore","Failed to raise snapshot:",i),yield mu(n,i)}})}function mu(n,e,t){return m(this,null,function*(){if(!qo(e))throw e;n.L_.add(1),yield Go(n),n.q_.set("Offline"),t||(t=()=>BE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield xu(n)}))})}function GE(n,e){return e().catch(t=>mu(n,t,e))}function Lu(n){return m(this,null,function*(){let e=K(n),t=Xn(e),i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$O(e);)try{let r=yield MO(e.localStore,i);if(r===null){e.O_.length===0&&t.o_();break}i=r.batchId,zO(e,r)}catch(r){yield mu(e,r)}WE(e)&&HE(e)})}function $O(n){return Ni(n)&&n.O_.length<10}function zO(n,e){n.O_.push(e);let t=Xn(n);t.r_()&&t.V_&&t.m_(e.mutations)}function WE(n){return Ni(n)&&!Xn(n).n_()&&n.O_.length>0}function HE(n){Xn(n).start()}function qO(n){return m(this,null,function*(){Xn(n).p_()})}function GO(n){return m(this,null,function*(){let e=Xn(n);for(let t of n.O_)e.m_(t.mutations)})}function WO(n,e,t){return m(this,null,function*(){let i=n.O_.shift(),r=lp.from(i,e,t);yield GE(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Lu(n)})}function HO(n,e){return m(this,null,function*(){e&&Xn(n).V_&&(yield function(i,r){return m(this,null,function*(){if(function(o){return lO(o)&&o!==R.ABORTED}(r.code)){let s=i.O_.shift();Xn(i).s_(),yield GE(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Lu(i)}})}(n,e)),WE(n)&&HE(n)})}function Yw(n,e){return m(this,null,function*(){let t=K(n);t.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let i=Ni(t);t.L_.add(3),yield Go(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield xu(t)})}function KO(n,e){return m(this,null,function*(){let t=K(n);e?(t.L_.delete(2),yield xu(t)):e||(t.L_.add(2),yield Go(t),t.q_.set("Unknown"))})}function Kr(n){return n.K_||(n.K_=function(t,i,r){let s=K(t);return s.w_(),new Gp(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:FO.bind(null,n),Ro:UO.bind(null,n),mo:jO.bind(null,n),d_:BO.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.K_.s_(),Sm(n)?Am(n):n.q_.set("Unknown")):(yield n.K_.stop(),qE(n))}))),n.K_}function Xn(n){return n.U_||(n.U_=function(t,i,r){let s=K(t);return s.w_(),new Wp(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qO.bind(null,n),mo:HO.bind(null,n),f_:GO.bind(null,n),g_:WO.bind(null,n)}),n.B_.push(e=>m(this,null,function*(){e?(n.U_.s_(),yield Lu(n)):(yield n.U_.stop(),n.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Yp=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Cm(n,e){if(fn("AsyncQueue",`${e}: ${n}`),qo(n))return new x(R.UNAVAILABLE,`${e}: ${n}`);throw n}var gu=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||$.comparator(t.key,i.key):(t,i)=>$.comparator(t.key,i.key),this.keyedMap=Co(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var _u=class{constructor(){this.W_=new Re($.comparator)}track(e){let t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}},Br=class n{constructor(e,t,i,r,s,o,c,u,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,gu.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var Jp=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Xp=class{constructor(){this.queries=Jw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){let r=K(t),s=r.queries;r.queries=Jw(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(i)})})(this,new x(R.ABORTED,"Firestore shutting down"))}};function Jw(){return new Yn(n=>IE(n),Nu)}function KE(n,e){return m(this,null,function*(){let t=K(n),i=3,r=e.query,s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new Jp,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=Cm(o,`Initialization of query '${Tr(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Rm(t)})}function QE(n,e){return m(this,null,function*(){let t=K(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function QO(n,e){let t=K(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(r)&&(i=!0);o.z_=r}}i&&Rm(t)}function YO(n,e,t){let i=K(n),r=i.queries.get(e);if(r)for(let s of r.j_)s.onError(t);i.queries.delete(e)}function Rm(n){n.Y_.forEach(e=>{e.next()})}var Zp,Xw;(Xw=Zp||(Zp={})).ea="default",Xw.Cache="cache";var vu=class{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Br(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Br.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zp.Cache}};var yu=class{constructor(e){this.key=e}},Iu=class{constructor(e){this.key=e}},em=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=wE(e),this.Ra=new gu(this.Aa)}get Va(){return this.Ta}ma(e,t){let i=t?t.fa:new _u,r=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,g)=>{let I=r.get(f),S=Ou(this.query,g)?g:null,D=!!I&&this.mutatedKeys.has(I.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),P=!1;I&&S?I.data.isEqual(S.data)?D!==N&&(i.track({type:3,doc:S}),P=!0):this.ga(I,S)||(i.track({type:2,doc:S}),P=!0,(u&&this.Aa(S,u)>0||h&&this.Aa(S,h)<0)&&(c=!0)):!I&&S?(i.track({type:0,doc:S}),P=!0):I&&!S&&(i.track({type:1,doc:I}),P=!0,(u||h)&&(c=!0)),P&&(S?(o=o.add(S),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ra:o,fa:i,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,g)=>function(S,D){let N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return N(S)-N(D)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(i),r=r!=null&&r;let c=t&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Br(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _u,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let t=[];return e.forEach(i=>{this.da.has(i)||t.push(new Iu(i))}),this.da.forEach(i=>{e.has(i)||t.push(new yu(i))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Br.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},tm=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},nm=class{constructor(e){this.key=e,this.va=!1}},im=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Yn(c=>IE(c),Nu),this.Ma=new Map,this.xa=new Set,this.Oa=new Re($.comparator),this.Na=new Map,this.La=new Fo,this.Ba={},this.ka=new Map,this.qa=Vo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function JO(n,e,t=!0){return m(this,null,function*(){let i=tb(n),r,s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield YE(i,e,t,!0),r})}function XO(n,e){return m(this,null,function*(){let t=tb(n);yield YE(t,e,!0,!1)})}function YE(n,e,t,i){return m(this,null,function*(){let r=yield xO(n.localStore,zt(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return i&&(c=yield ZO(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&$E(n.remoteStore,r),c})}function ZO(n,e,t,i,r){return m(this,null,function*(){n.Ka=(g,I,S)=>function(N,P,W,Q){return m(this,null,function*(){let Y=P.view.ma(W);Y.ns&&(Y=yield Qw(N.localStore,P.query,!1).then(({documents:E})=>P.view.ma(E,Y)));let de=Q&&Q.targetChanges.get(P.targetId),Fe=Q&&Q.targetMismatches.get(P.targetId)!=null,oe=P.view.applyChanges(Y,N.isPrimaryClient,de,Fe);return eE(N,P.targetId,oe.wa),oe.snapshot})}(n,g,I,S);let s=yield Qw(n.localStore,e,!0),o=new em(e,s.Ts),c=o.ma(s.documents),u=xo.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=o.applyChanges(c,n.isPrimaryClient,u);eE(n,t,h.wa);let f=new tm(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot})}function eM(n,e,t){return m(this,null,function*(){let i=K(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Nu(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&bm(i.remoteStore,r.targetId),rm(i,r.targetId)}).catch(zo))):(rm(i,r.targetId),yield jp(i.localStore,r.targetId,!0))})}function tM(n,e){return m(this,null,function*(){let t=K(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),bm(t.remoteStore,i.targetId))})}function nM(n,e,t){return m(this,null,function*(){let i=uM(n);try{let r=yield function(o,c){let u=K(o),h=We.now(),f=c.reduce((S,D)=>S.add(D.key),ie()),g,I;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let D=mn(),N=ie();return u.cs.getEntries(S,f).next(P=>{D=P,D.forEach((W,Q)=>{Q.isValidDocument()||(N=N.add(W))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,D)).next(P=>{g=P;let W=[];for(let Q of c){let Y=uO(Q,g.get(Q.key).overlayedDocument);Y!=null&&W.push(new gn(Q.key,Y,fE(Y.value.mapValue),Ti.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,W,c)}).next(P=>{I=P;let W=P.applyToLocalDocumentSet(g,N);return u.documentOverlayCache.saveOverlays(S,P.batchId,W)})}).then(()=>({batchId:I.batchId,changes:bE(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Re(ce)),h=h.insert(c,u),o.Ba[o.currentUser.toKey()]=h}(i,r.batchId,t),yield Wo(i,r.changes),yield Lu(i.remoteStore)}catch(r){let s=Cm(r,"Failed to persist write");t.reject(s)}})}function JE(n,e){return m(this,null,function*(){let t=K(n);try{let i=yield NO(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Na.get(s);o&&(he(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?he(o.va):r.removedDocuments.size>0&&(he(o.va),o.va=!1))}),yield Wo(t,i,e)}catch(i){yield zo(i)}})}function Zw(n,e,t){let i=K(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let u=K(o);u.onlineState=c;let h=!1;u.queries.forEach((f,g)=>{for(let I of g.j_)I.Z_(c)&&(h=!0)}),h&&Rm(u)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function iM(n,e,t){return m(this,null,function*(){let i=K(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Na.get(e),s=r&&r.key;if(s){let o=new Re($.comparator);o=o.insert(s,Dt.newNoDocument(s,X.min()));let c=ie().add(s),u=new su(X.min(),new Map,new Re(ce),o,c);yield JE(i,u),i.Oa=i.Oa.remove(s),i.Na.delete(e),Dm(i)}else yield jp(i.localStore,e,!1).then(()=>rm(i,e,t)).catch(zo)})}function rM(n,e){return m(this,null,function*(){let t=K(n),i=e.batch.batchId;try{let r=yield kO(t.localStore,e);ZE(t,i,null),XE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Wo(t,r)}catch(r){yield zo(r)}})}function sM(n,e,t){return m(this,null,function*(){let i=K(n);try{let r=yield function(o,c){let u=K(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(g=>(he(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(i.localStore,e);ZE(i,e,t),XE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Wo(i,r)}catch(r){yield zo(r)}})}function XE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ZE(n,e,t){let i=K(n),r=i.Ba[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function rm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||eb(n,i)})}function eb(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(bm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Dm(n))}function eE(n,e,t){for(let i of t)i instanceof yu?(n.La.addReference(i.key,e),oM(n,i)):i instanceof Iu?(L("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||eb(n,i.key)):H()}function oM(n,e){let t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(L("SyncEngine","New document in limbo: "+t),n.xa.add(i),Dm(n))}function Dm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(Se.fromString(e)),i=n.qa.next();n.Na.set(i,new nm(t)),n.Oa=n.Oa.insert(t,i),$E(n.remoteStore,new Lo(zt(Im(t.path)),i,"TargetPurposeLimboResolution",uE.oe))}}function Wo(n,e,t){return m(this,null,function*(){let i=K(n),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((c,u)=>{o.push(i.Ka(u,e,t).then(h=>{var f;if((h||t)&&i.isPrimaryClient){let g=h?!h.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);let g=Lp.Wi(u.targetId,h);s.push(g)}}))}),yield Promise.all(o),i.Ca.d_(r),yield function(u,h){return m(this,null,function*(){let f=K(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>k.forEach(h,I=>k.forEach(I.$i,S=>f.persistence.referenceDelegate.addReference(g,I.targetId,S)).next(()=>k.forEach(I.Ui,S=>f.persistence.referenceDelegate.removeReference(g,I.targetId,S)))))}catch(g){if(!qo(g))throw g;L("LocalStore","Failed to update sequence numbers: "+g)}for(let g of h){let I=g.targetId;if(!g.fromCache){let S=f.os.get(I),D=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(D);f.os=f.os.insert(I,N)}}})}(i.localStore,s))})}function aM(n,e){return m(this,null,function*(){let t=K(n);if(!t.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let i=yield jE(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new x(R.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Wo(t,i.hs)}})}function cM(n,e){let t=K(n),i=t.Na.get(e);if(i&&i.va)return ie().add(i.key);{let r=ie(),s=t.Ma.get(e);if(!s)return r;for(let o of s){let c=t.Fa.get(o);r=r.unionWith(c.view.Va)}return r}}function tb(n){let e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iM.bind(null,e),e.Ca.d_=QO.bind(null,e.eventManager),e.Ca.$a=YO.bind(null,e.eventManager),e}function uM(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sM.bind(null,e),e}var tE=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return m(this,null,function*(){this.serializer=Mu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,i){return null}Ha(t,i){return null}za(t){return PO(this.persistence,new Fp,t.initialUser,this.serializer)}Ga(t){return new Op(xp.Zr,this.serializer)}Wa(t){return new Bp}terminate(){return m(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var lM=(()=>{class n{initialize(t,i){return m(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aM.bind(null,this.syncEngine),yield KO(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Xp}()}createDatastore(t){let i=Mu(t.databaseInfo.databaseId),r=function(o){return new qp(o)}(t.databaseInfo);return function(o,c,u,h){return new Hp(o,c,u,h)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,s,o,c,u){return new Qp(r,s,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,i=>Zw(this.syncEngine,i,0),function(){return du.D()?new du:new $p}())}createSyncEngine(t,i){return function(s,o,c,u,h,f,g){let I=new im(s,o,c,u,h,f);return g&&(I.Qa=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return m(this,null,function*(){var t,i;yield function(s){return m(this,null,function*(){let o=K(s);L("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Go(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return n.provider={build:()=>new n},n})();var wu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var sm=class{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=$e.UNAUTHENTICATED,this.clientId=Xc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,o=>m(this,null,function*(){L("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(L("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=Cm(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function xf(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>m(this,null,function*(){i.isEqual(r)||(yield jE(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function nE(n,e){return m(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield hM(n);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Yw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Yw(e.remoteStore,r)),n._onlineComponents=e})}function hM(n){return m(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(r){return r.name==="FirebaseError"?r.code===R.FAILED_PRECONDITION||r.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Pr("Error using user provided cache. Falling back to memory cache: "+t),yield xf(n,new tE)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield xf(n,new tE);return n._offlineComponents})}function nb(n){return m(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield nE(n,n._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield nE(n,new lM))),n._onlineComponents})}function dM(n){return nb(n).then(e=>e.syncEngine)}function ib(n){return m(this,null,function*(){let e=yield nb(n),t=e.eventManager;return t.onListen=JO.bind(null,e.syncEngine),t.onUnlisten=eM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tM.bind(null,e.syncEngine),t})}function fM(n,e,t={}){let i=new Rt;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,c,u,h){let f=new wu({next:I=>{f.Za(),o.enqueueAndForget(()=>QE(s,g));let S=I.docs.has(c);!S&&I.fromCache?h.reject(new x(R.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&I.fromCache&&u&&u.source==="server"?h.reject(new x(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(I)},error:I=>h.reject(I)}),g=new vu(Im(c.path),f,{includeMetadataChanges:!0,_a:!0});return KE(s,g)}(yield ib(n),n.asyncQueue,e,t,i)})),i.promise}function pM(n,e,t={}){let i=new Rt;return n.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(s,o,c,u,h){let f=new wu({next:I=>{f.Za(),o.enqueueAndForget(()=>QE(s,g)),I.fromCache&&u.source==="server"?h.reject(new x(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(I)},error:I=>h.reject(I)}),g=new vu(c,f,{includeMetadataChanges:!0,_a:!0});return KE(s,g)}(yield ib(n),n.asyncQueue,e,t,i)})),i.promise}function rb(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var iE=new Map;function sb(n,e,t){if(!t)throw new x(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mM(n,e,t,i){if(e===!0&&i===!0)throw new x(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rE(n){if(!$.isDocumentKey(n))throw new x(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sE(n){if($.isDocumentKey(n))throw new x(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function Pi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Vu(n);throw new x(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Eu=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new x(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new x(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$r=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eu(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Lf;switch(i.type){case"firstParty":return new jf(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new x(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return m(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=iE.get(t);i&&(L("ComponentProvider","Removing Datastore"),iE.delete(t),i.terminate())}(this),Promise.resolve()}};function ob(n,e,t,i={}){var r;let s=(n=Pi(n,$r))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=$e.MOCK_USER;else{c=py(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new x(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $e(h)}n._authCredentials=new Vf(new Jc(c,u))}}var zr=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ct=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Kn=class n extends zr{constructor(e,t,i){super(e,t,Im(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ab(n,e,...t){if(n=Le(n),sb("collection","path",e),n instanceof $r){let i=Se.fromString(e,...t);return sE(i),new Kn(n,null,i)}{if(!(n instanceof ct||n instanceof Kn))throw new x(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Se.fromString(e,...t));return sE(i),new Kn(n.firestore,null,i)}}function cb(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Xc.newId()),sb("doc","path",e),n instanceof $r){let i=Se.fromString(e,...t);return rE(i),new ct(n,null,new $(i))}{if(!(n instanceof ct||n instanceof Kn))throw new x(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Se.fromString(e,...t));return rE(i),new ct(n.firestore,n instanceof Kn?n.converter:null,new $(i))}}var bu=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fu(this,"async_queue_retry"),this.Vu=()=>{let i=Mf();i&&L("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let t=Mf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Mf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return m(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!qo(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw fn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let r=Yp.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&H()}verifyOperationInProgress(){}wu(){return m(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var qr=class extends $r{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new bu,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return m(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bu(e),this._firestoreClient=void 0,yield e}})}};function ub(n,e){let t=typeof n=="object"?n:dr(),i=typeof n=="string"?n:e||"(default)",r=ao(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=fy("firestore");s&&ob(r,...s)}return r}function Pm(n){if(n._terminated)throw new x(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gM(n),n._firestoreClient}function gM(n){var e,t,i;let r=n._freezeSettings(),s=function(c,u,h,f){return new Gf(c,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,rb(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new sm(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var Uo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nt.fromBase64String(e))}catch(t){throw new x(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Gr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wr=class{constructor(e){this._methodName=e}};var jo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var Bo=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}};var _M=/^__.*__$/;var Tu=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new gn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var Au=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lb(this.Cu)&&_M.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},om=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Mu(e)}Qu(e,t,i,r=!1){return new Au({Cu:e,methodName:t,qu:i,path:gt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hb(n){let e=n._freezeSettings(),t=Mu(n._databaseId);return new om(n._databaseId,!!e.ignoreUndefinedProperties,t)}var Su=class n extends Wr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function vM(n,e,t){return new Au({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var am=class n extends Wr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=vM(this,e,!0),i=this.Ku.map(s=>Qr(s,t)),r=new Jn(i);return new op(e.path,r)}isEqual(e){return e instanceof n&&Fn(this.Ku,e.Ku)}};function yM(n,e,t,i){let r=n.Qu(1,e,t);fb("Data must be an object, but it was:",r,i);let s=[],o=It.empty();ki(i,(u,h)=>{let f=km(e,u,t);h=Le(h);let g=r.Nu(f);if(h instanceof Su)s.push(f);else{let I=Qr(h,g);I!=null&&(s.push(f),o.set(f,I))}});let c=new Bt(s);return new Tu(o,c,r.fieldTransforms)}function IM(n,e,t,i,r,s){let o=n.Qu(1,e,t),c=[oE(e,i,t)],u=[r];if(s.length%2!=0)throw new x(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)c.push(oE(e,s[I])),u.push(s[I+1]);let h=[],f=It.empty();for(let I=c.length-1;I>=0;--I)if(!TM(h,c[I])){let S=c[I],D=u[I];D=Le(D);let N=o.Nu(S);if(D instanceof Su)h.push(S);else{let P=Qr(D,N);P!=null&&(h.push(S),f.set(S,P))}}let g=new Bt(h);return new Tu(f,g,o.fieldTransforms)}function wM(n,e,t,i=!1){return Qr(t,n.Qu(i?4:3,e))}function Qr(n,e){if(db(n=Le(n)))return fb("Unsupported field value:",e,n),EM(n,e);if(n instanceof Wr)return function(i,r){if(!lb(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let u=Qr(c,r.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Le(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=We.fromDate(i);return{timestampValue:uu(r.serializer,s)}}if(i instanceof We){let s=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:uu(r.serializer,s)}}if(i instanceof jo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Uo)return{bytesValue:OE(r.serializer,i._byteString)};if(i instanceof ct){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Em(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Bo)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return wm(c.serializer,u)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Vu(i)}`)}(n,e)}function EM(n,e){let t={};return lE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(n,(i,r)=>{let s=Qr(r,e.Mu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function db(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof We||n instanceof jo||n instanceof Uo||n instanceof ct||n instanceof Wr||n instanceof Bo)}function fb(n,e,t){if(!db(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Vu(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function oE(n,e,t){if((e=Le(e))instanceof Gr)return e._internalPath;if(typeof e=="string")return km(n,e);throw Cu("Field path arguments must be of type string or ",n,!1,void 0,t)}var bM=new RegExp("[~\\*/\\[\\]]");function km(n,e,t){if(e.search(bM)>=0)throw Cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gr(...e.split("."))._internalPath}catch{throw Cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cu(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${i}`),o&&(u+=` in document ${r}`),u+=")"),new x(R.INVALID_ARGUMENT,c+n+u)}function TM(n,e){return n.some(t=>t.isEqual(e))}var Ru=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(pb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},cm=class extends Ru{data(){return super.data()}};function pb(n,e){return typeof e=="string"?km(n,e):e instanceof Gr?e._internalPath:e._delegate._internalPath}function AM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $o=class{},um=class extends $o{};function mb(n,e,...t){let i=[];e instanceof $o&&i.push(e),i=i.concat(t),function(s){let o=s.filter(u=>u instanceof hm).length,c=s.filter(u=>u instanceof lm).length;if(o>1||o>0&&c>0)throw new x(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var lm=class n extends um{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return gb(e._query,t),new zr(e.firestore,e.converter,rp(e._query,t))}_parse(e){let t=hb(e.firestore);return function(s,o,c,u,h,f,g){let I;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new x(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cE(g,f);let S=[];for(let D of g)S.push(aE(u,s,D));I={arrayValue:{values:S}}}else I=aE(u,s,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cE(g,f),I=wM(c,o,g,f==="in"||f==="not-in");return xe.create(h,f,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var hm=class n extends $o{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Pt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let u of c)gb(o,u),o=rp(o,u)}(e._query,t),new zr(e.firestore,e.converter,rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function aE(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new x(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yE(e)&&t.indexOf("/")!==-1)throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Se.fromString(t));if(!$.isDocumentKey(i))throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Nw(n,new $(i))}if(t instanceof ct)return Nw(n,t._key);throw new x(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vu(t)}.`)}function cE(n,e){if(!Array.isArray(n)||n.length===0)throw new x(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gb(n,e){let t=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new x(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var dm=class{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return ki(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;let s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Te(o.doubleValue));return new Bo(s)}convertGeoPoint(e){return new jo(Te(e.latitude),Te(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=gm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){let t=pn(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Se.fromString(e);he(UE(i));let r=new nu(i.get(1),i.get(3)),s=new $(i.popFirst(5));return r.isEqual(t)||fn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var bi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Du=class extends Ru{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Dr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(pb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Dr=class extends Du{data(e={}){return super.data(e)}},fm=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bi(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Dr(this._firestore,this._userDataWriter,i.key,i,new bi(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let u=new Dr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Dr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:SM(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function SM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function _b(n){n=Pi(n,ct);let e=Pi(n.firestore,qr);return fM(Pm(e),n._key).then(t=>RM(e,n,t))}var Pu=class extends dm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}};function vb(n){n=Pi(n,zr);let e=Pi(n.firestore,qr),t=Pm(e),i=new Pu(e);return AM(n._query),pM(t,n._query).then(r=>new fm(e,i,n,r))}function yb(n,e,t,...i){n=Pi(n,ct);let r=Pi(n.firestore,qr),s=hb(r),o;return o=typeof(e=Le(e))=="string"||e instanceof Gr?IM(s,"updateDoc",n._key,e,t,i):yM(s,"updateDoc",n._key,e),CM(r,[o.toMutation(n._key,Ti.exists(!0))])}function CM(n,e){return function(i,r){let s=new Rt;return i.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return nM(yield dM(i),r,s)})),s.promise}(Pm(n),e)}function RM(n,e,t){let i=t.docs.get(e._key),r=new Pu(n);return new Du(n,r,e._key,i,new bi(t.hasPendingWrites,t.fromCache),e.converter)}function Ib(...n){return new am("arrayUnion",n)}(function(e,t=!0){(function(r){Hr=r})($n),Bn(new yt("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new qr(new Ff(i.getProvider("auth-internal")),new $f(i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new x(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(h.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ve(Rw,"4.7.3",e),Ve(Rw,"4.7.3","esm2017")})();var Oi=class{constructor(e){return e}},wb="firestore",Nm=class{constructor(){return co(wb)}};var Om=new ee("angularfire2.firestore-instances");function DM(n,e){let t=fc(wb,n,e);return t&&new Oi(t)}function PM(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Oi(i)}}var kM={provide:Nm,deps:[[new Xe,Om]]},NM={provide:Oi,useFactory:DM,deps:[[new Xe,Om],nn]};function Eb(n,...e){return Ve("angularfire",fi.full,"fst"),Nt([NM,kM,{provide:Om,useFactory:PM(n),multi:!0,deps:[Ee,Mt,mr,pi,[new Xe,To],[new Xe,pr],...e]}])}var bb=Be(Ib,!0);var Tb=Be(ab,!0);var Mm=Be(cb,!0);var Ab=Be(_b,!0);var Sb=Be(vb,!0);var Cb=Be(ub,!0);var Rb=Be(mb,!0);var xm=Be(yb,!0);var Yr=(()=>{class n{constructor(t,i){this.auth=t,this.router=i,this.user$=Iw(t)}login(t,i){return Tw(this.auth,t,i).then(r=>{console.log("Login successful!",r.user),this.router.navigate(["/overview"])}).catch(r=>{throw console.error("Error during login:",r.message),r})}authState(){return this.user$}register(t,i){return ww(this.auth,t,i).then(r=>{console.log("Registration successful!",r.user),this.router.navigate(["/overview"])}).catch(r=>{throw console.error("Error during registration:",r.message),r})}logout(){return Aw(this.auth).then(()=>{console.log("Logout successful!"),this.router.navigate(["/login"])}).catch(t=>{throw console.error("Error during logout:",t.message),t})}forgotPassword(t){return bw(this.auth,t).then(()=>{console.log("Mail sent")}).catch(i=>{throw console.error("Error during passsword reset:",i.message),i})}getCurrentUser(){return this.auth.currentUser}static{this.\u0275fac=function(i){return new(i||n)(V(Ii),V(Ge))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Jr=(()=>{class n{constructor(t,i){this.firestore=t,this.authService=i}getCompletedCourses(){return this.getUserUid().pipe(q(t=>Mm(this.firestore,"users",t)),Je(t=>De(Ab(t)).pipe(Je(i=>m(this,null,function*(){if(i.exists()){let s=i.data().completed_courses;return s||(s=[],yield xm(t,{completed_courses:s}),console.log("Created 'test' field for user:",i.id)),s}else return console.error("No such document!"),[]})))))}addCompletedCourse(t){return this.getUserUid().pipe(q(i=>Mm(this.firestore,"users",i)),Je(i=>De(xm(i,{completed_courses:bb(t)})).pipe(q(()=>{console.log("Course added to completed_courses:",t)}))))}getAllCourses(){let t=Tb(this.firestore,"courses");return De(Sb(Rb(t))).pipe(q(i=>i.docs.map(r=>r.data())))}getUserUid(){return this.authService.authState().pipe(bt(t=>!!t),q(t=>t.uid))}static{this.\u0275fac=function(i){return new(i||n)(V(Oi),V(Yr))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Fm;try{Fm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Fm=!1}var Ko=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?X_(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Fm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(V(Yt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ho;function MM(){if(Ho==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ho=!0}))}finally{Ho=Ho||!1}return Ho}function Um(n){return MM()?n:!!n.capture}function Db(n){return n.composedPath?n.composedPath()[0]:n.target}function Pb(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function jm(n){return Array.isArray(n)?n:[n]}function Bm(n){return n instanceof Tt?n.nativeElement:n}var Nb=new Set,Mi,xM=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):VM}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&LM(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(V(Ko),V(Ts,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LM(n,e){if(!Nb.has(n))try{Mi||(Mi=document.createElement("style"),e&&Mi.setAttribute("nonce",e),Mi.setAttribute("type","text/css"),document.head.appendChild(Mi)),Mi.sheet&&(Mi.sheet.insertRule(`@media ${n} {body{ }}`,0),Nb.add(n))}catch(t){console.error(t)}}function VM(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Mb=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new st}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Ob(jm(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=Ob(jm(t)).map(o=>this._registerQuery(o).observable),s=Bi(r);return s=Ia(s.pipe(kt(1)),s.pipe(m_(1),l_(0))),s.pipe(q(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:u,query:h})=>{c.matches=c.matches||u,c.breakpoints[h]=u}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),s={observable:new En(o=>{let c=u=>this._zone.run(()=>o.next(u));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Ea(i),q(({matches:o})=>({query:t,matches:o})),$i(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static{this.\u0275fac=function(i){return new(i||n)(V(xM),V(Ee))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ob(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Vb(n){return n.buttons===0||n.detail===0}function Fb(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var xi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(xi||{}),xb="cdk-high-contrast-black-on-white",Lb="cdk-high-contrast-white-on-black",$m="cdk-high-contrast-active",Ub=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=j(Mb).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return xi.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return xi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return xi.BLACK_ON_WHITE}return xi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove($m,xb,Lb),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===xi.BLACK_ON_WHITE?t.add($m,xb):i===xi.WHITE_ON_BLACK&&t.add($m,Lb)}}static{this.\u0275fac=function(i){return new(i||n)(V(Ko),V(Ne))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var zm=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({})}}return n})();function UM(){return!0}var jM=new ee("mat-sanity-checks",{providedIn:"root",factory:UM}),Wm=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return Pb()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||n)(V(Ub),V(jM,8),V(Ne))}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({imports:[zm,zm]})}}return n})();var wt=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(wt||{}),qm=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=wt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},jb=Um({passive:!0,capture:!0}),Gm=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Db(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,jb)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,jb)))}},Bb={enterDuration:225,exitDuration:150},BM=800,$b=Um({passive:!0,capture:!0}),zb=["mousedown","touchstart"],qb=["mouseup","mouseleave","touchend","touchcancel"],Gb=class n{static{this._eventManager=new Gm}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Bm(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=M(M({},Bb),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||$M(e,t,r),c=e-r.left,u=t-r.top,h=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${u-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(f);let g=window.getComputedStyle(f),I=g.transitionProperty,S=g.transitionDuration,D=I==="none"||S==="0s"||S==="0s, 0s"||r.width===0&&r.height===0,N=new qm(this,f,i,D);f.style.transform="scale3d(1, 1, 1)",N.state=wt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=N);let P=null;return!D&&(h||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let W=()=>this._finishRippleTransition(N),Q=()=>this._destroyRipple(N);f.addEventListener("transitionend",W),f.addEventListener("transitioncancel",Q),P={onTransitionEnd:W,onTransitionCancel:Q}}),this._activeRipples.set(N,P),(D||!h)&&this._finishRippleTransition(N),N}fadeOutRipple(e){if(e.state===wt.FADING_OUT||e.state===wt.HIDDEN)return;let t=e.element,i=M(M({},Bb),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=wt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Bm(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,zb.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{qb.forEach(t=>{this._triggerElement.addEventListener(t,this,$b)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===wt.FADING_IN?this._startFadeOutTransition(e):e.state===wt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=wt.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=wt.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){let t=Vb(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+BM;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Fb(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===wt.VISIBLE||e.config.terminateOnPointerUp&&e.state===wt.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(zb.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(qb.forEach(t=>e.removeEventListener(t,this,$b)),this._pointerUpEventsRegistered=!1))}};function $M(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var zM=["*"],Fu;function qM(){if(Fu===void 0&&(Fu=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Fu=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Fu}function Qo(n){return qM()?.createHTML(n)||n}function Wb(n){return Error(`Unable to find icon with the name "${n}"`)}function GM(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function Hb(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Kb(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var _n=class{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},WM=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new _n(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){let o=this._sanitizer.sanitize(ht.HTML,r);if(!o)throw Kb(r);let c=Qo(o);return this._addSvgIconConfig(t,i,new _n("",c,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new _n(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){let s=this._sanitizer.sanitize(ht.HTML,i);if(!s)throw Kb(i);let o=Qo(s);return this._addSvgIconSetConfig(t,new _n("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(ht.RESOURCE_URL,t);if(!i)throw Hb(t);let r=this._cachedIconsByUrl.get(i);return r?U(Uu(r)):this._loadSvgIconFromConfig(new _n(t,null)).pipe(Ae(s=>this._cachedIconsByUrl.set(i,s)),q(s=>Uu(s)))}getNamedSvgIcon(t,i=""){let r=Qb(i,t),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):ii(Wb(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?U(Uu(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(q(i=>Uu(i)))}_getSvgFromIconSetConfigs(t,i){let r=this._extractIconWithNameFromAnySet(t,i);if(r)return U(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Tn(c=>{let h=`Loading icon set URL: ${this._sanitizer.sanitize(ht.RESOURCE_URL,o.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(h)),U(null)})));return wa(s).pipe(q(()=>{let o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw Wb(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let o=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(o,t,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ae(i=>t.svgText=i),q(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?U(null):this._fetchIcon(t).pipe(Ae(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){let s=t.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let c=this._svgElementFromString(Qo("<svg></svg>"));return c.appendChild(o),this._setSvgAttributes(c,r)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){let i=this._svgElementFromString(Qo("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){let{name:o,value:c}=r[s];o!=="id"&&i.setAttribute(o,c)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw GM();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(ht.RESOURCE_URL,i);if(!o)throw Hb(i);let c=this._inProgressUrlFetches.get(o);if(c)return c;let u=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(q(h=>Qo(h)),ri(()=>this._inProgressUrlFetches.delete(o)),p_());return this._inProgressUrlFetches.set(o,u),u}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(Qb(t,i),r),this}_addSvgIconSetConfig(t,i){let r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,t);if(s)return HM(s)?new _n(s.url,null,s.options):new _n(s,null)}}static{this.\u0275fac=function(i){return new(i||n)(V(ov,8),V(rh),V(Ne,8),V(si))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uu(n){return n.cloneNode(!0)}function Qb(n,e){return n+":"+e}function HM(n){return!!(n.url&&n.options)}var KM=new ee("MAT_ICON_DEFAULT_OPTIONS"),QM=new ee("mat-icon-location",{providedIn:"root",factory:YM});function YM(){let n=j(Ne),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var Yb=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],JM=Yb.map(n=>`[${n}]`).join(", "),XM=/^url\(['"]?#(.*?)['"]?\)$/,ju=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,c){this._elementRef=t,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ya.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=t.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(JM),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)Yb.forEach(o=>{let c=i[s],u=c.getAttribute(o),h=u?u.match(XM):null;if(h){let f=r.get(c);f||(f=[],r.set(c,f)),f.push({name:o,value:h[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(kt(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(i){return new(i||n)(J(Tt),J(WM),Nl("aria-hidden"),J(QM),J(si),J(KM,8))}}static{this.\u0275cmp=_e({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(oi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),x_(r.color?"mat-"+r.color:""),Ki("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Nn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Cs,Rs],ngContentSelectors:zM,decls:1,vars:0,template:function(i,r){i&1&&(xl(),Ll(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),Jb=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({imports:[Wm,Wm]})}}return n})();var Zb=(()=>{class n{constructor(){this.image="",this.material=""}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-display-learning-material"]],inputs:{image:"image",material:"material"},decls:5,vars:3,consts:[[1,"h-full","flex","px-1","items-end","bg-cover","bg-center","bg-no-repeat"],[1,"h-fit","w-full","xl:max-w-[80%]","lg:max-w-[100%]","mx-auto","shadow-2xl","bg-slate-300","bg-opacity-65","p-4","backdrop-blur-sm","overflow-scroll","xl:mb-12","lg:mb-6","md:mb-0"],[1,"font-mono","text-sm"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),re(4),B()()()()),i&2&&(M_("background-image","url("+r.image+")"),te(4),at(" ",r.material," "))}})}}return n})();function ex(n,e){if(n&1){let t=kn();F(0,"div",4)(1,"button",5),be("click",function(){let r=Rn(t).$implicit,s=qe();return Dn(s.checkAnswer(r))}),F(2,"h1",6),re(3),B()()()}if(n&2){let t=e.$implicit;te(3),L_(t.option)}}var eT=(()=>{class n{constructor(){this.question="",this.options=[],this.correctAnswerEvent=new ot}checkAnswer(t){t.correctAnswer&&this.correctAnswerEvent.emit()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=_e({type:n,selectors:[["app-display-quiz"]],inputs:{question:"question",options:"options"},outputs:{correctAnswerEvent:"correctAnswerEvent"},decls:8,vars:2,consts:[[1,"h-full","flex","flex-col","justify-around","p-10"],[1,"text-center","text-3xl","font-mono"],[1,"text-center","mt-10","text-xl","font-mono"],["class","outline my-5 mx-44",4,"ngFor","ngForOf"],[1,"outline","my-5","mx-44"],[1,"w-full","hover:bg-slate-400",3,"click"],[1,"font-mono"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div")(2,"h1",1),re(3,"Question:"),B(),F(4,"h2",2),re(5),B()(),F(6,"div"),dt(7,ex,4,1,"div",3),B()()),i&2&&(te(5),at(" ",r.question,""),te(2),Pe("ngForOf",r.options))},dependencies:[Ma]})}}return n})();function nx(n,e){if(n&1){let t=kn();F(0,"button",8),be("click",function(){Rn(t);let r=qe();return Dn(r.previousSection())}),F(1,"mat-icon",9),re(2,"chevron_left"),B()()}}function ix(n,e){if(n&1&&(F(0,"h1",10),re(1),B()),n&2){let t=qe();te(),Fl(" ",t.currentSection+1," / ",t.course.lessons.length," ")}}function rx(n,e){if(n&1&&(F(0,"h1",10),re(1),B()),n&2){let t=qe();te(),Fl(" ",t.currentQuestion+1," / ",t.course.quiz.length," ")}}function sx(n,e){if(n&1&&ke(0,"app-display-learning-material",11),n&2){let t=qe();Pe("material",t.course.lessons[t.currentSection].material)("image",t.course.lessons[t.currentSection].image)}}function ox(n,e){if(n&1){let t=kn();F(0,"app-display-quiz",12),be("correctAnswerEvent",function(){Rn(t);let r=qe();return Dn(r.onCorrectAnswer())}),B()}if(n&2){let t=qe();Pe("question",t.course.quiz[t.currentQuestion].question)("options",t.course.quiz[t.currentQuestion].options)}}function ax(n,e){if(n&1){let t=kn();F(0,"button",8),be("click",function(){Rn(t);let r=qe();return Dn(r.nextSection())}),F(1,"mat-icon",9),re(2,"chevron_right"),B()()}}var tT=(()=>{class n{constructor(t,i,r){this.route=t,this.dataService=i,this.router=r,this.currentSection=0,this.currentQuestion=0,this.showQuiz=!1,this.courses=[],this.course={title:"",courseCoverImage:"",courseId:0,lessons:[],quiz:[]}}ngOnInit(){this.route.paramMap.subscribe(t=>{let i=t.get("id"),r=i?+i:0;this.dataService.getAllCourses().pipe(q(s=>s.find(o=>o.courseId===r))).subscribe(s=>{s&&(this.course=s)})})}nextSection(){if(this.course){if(this.currentSection==this.course.lessons.length-1){this.showQuiz=!0;return}this.currentSection+=1}}previousSection(){this.currentSection!=0&&(this.currentSection-=1)}onCorrectAnswer(){this.currentQuestion!=this.course.quiz.length-1?this.currentQuestion+=1:(this.addCourseToCompletedCourses(this.course.courseId),this.router.navigate(["/overview"]))}addCourseToCompletedCourses(t){this.dataService.addCompletedCourse(t).subscribe({next:()=>{console.log("Course added successfully!")},error:i=>{console.error("Error adding course:",i)}})}static{this.\u0275fac=function(i){return new(i||n)(J(Ln),J(Jr),J(Ge))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-quiz-page"]],decls:10,vars:6,consts:[[1,"h-[calc(100vh-4rem)]","w-screen","flex","items-center","justify-center"],[1,"w-[75%]","h-[80%]","bg-slate-200","shadow-2xl","p-10","flex","items-center"],["class","h-40 w-12 bg-slate-300 outline outline-1 rounded-lg",3,"click",4,"ngIf"],[1,"flex-grow","h-full","mx-7","flex","flex-col"],["class","text-center text-3xl mb-3 font-semibold",4,"ngIf"],[1,"outline","outline-1","rounded-lg","flex-grow","min-h-0","overflow-scroll"],[3,"material","image",4,"ngIf"],[3,"question","options","correctAnswerEvent",4,"ngIf"],[1,"h-40","w-12","bg-slate-300","outline","outline-1","rounded-lg",3,"click"],[1,"h-10","w-10"],[1,"text-center","text-3xl","mb-3","font-semibold"],[3,"material","image"],[3,"correctAnswerEvent","question","options"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1),dt(2,nx,3,0,"button",2),F(3,"div",3),dt(4,ix,2,2,"h1",4)(5,rx,2,2,"h1",4),F(6,"div",5),dt(7,sx,1,2,"app-display-learning-material",6)(8,ox,1,2,"app-display-quiz",7),B()(),dt(9,ax,3,0,"button",2),B()()),i&2&&(te(2),Pe("ngIf",!r.showQuiz),te(2),Pe("ngIf",!r.showQuiz),te(),Pe("ngIf",r.showQuiz),te(2),Pe("ngIf",!r.showQuiz),te(),Pe("ngIf",r.showQuiz),te(),Pe("ngIf",!r.showQuiz))},dependencies:[xa,ju,Zb,eT],styles:[".mat-icon[_ngcontent-%COMP%]{height:48px!important;width:48px!important}.material-icons[_ngcontent-%COMP%]{font-size:60px!important}"]})}}return n})();var nT=(()=>{class n{constructor(t){this.router=t,this.courseTitle="",this.courseId=1,this.coverImage="",this.icon="check_box_outline_blank"}navigateToCourse(t){this.router.navigate([`/course/${t}`])}static{this.\u0275fac=function(i){return new(i||n)(J(Ge))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-course-list-item"]],inputs:{courseTitle:"courseTitle",courseId:"courseId",coverImage:"coverImage",icon:"icon"},decls:7,vars:3,consts:[[1,"bg-white","py-1","rounded-2xl","shadow-2xl",3,"click"],[1,"h-14","pl-2","pr-6","flex","items-center","outline-1","gap-x-5"],[1,"aspect-square","h-[80%]","object-cover","rounded-full",3,"src"],[1,"ml-auto"],[1,"transform","scale-[1.6]",3,"fontIcon"]],template:function(i,r){i&1&&(F(0,"div",0),be("click",function(){return r.navigateToCourse(r.courseId)}),F(1,"div",1),ke(2,"img",2),F(3,"h1"),re(4),B(),F(5,"div",3),ke(6,"mat-icon",4),B()()()),i&2&&(te(2),Vl("src",r.coverImage,R_),te(2),at(" Course Number: ",r.courseTitle,""),te(2),Vl("fontIcon",r.icon))},dependencies:[ju]})}}return n})();function ux(n,e){if(n&1&&ke(0,"app-course-list-item",4),n&2){let t=e.$implicit,i=qe();Pe("coverImage",t.courseCoverImage)("icon",i.isCourseCompleted(t.courseId)?"check_box_outline":"check_box_outline_blank")("courseId",t.courseId)("courseTitle",t.title)("ngClass",i.isCourseCompleted(t.courseId)?"outline outline-2 rounded-xl outline-green-500":"")}}var iT=(()=>{class n{constructor(t){this.dataService=t,this.courses=[],this.user=null,this.completedCourses=[],this.destroy$=new st,this.dataService.getCompletedCourses().subscribe({next:i=>{console.log(i),this.completedCourses=i},error:i=>{console.error("Error fetching completed courses:",i)}}),this.dataService.getAllCourses().subscribe({next:i=>{this.courses=i},error:i=>{console.error("Error fetching courses:",i)}})}isCourseCompleted(t){return this.completedCourses.includes(t)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||n)(J(Jr))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-course-view"]],decls:4,vars:1,consts:[[1,"h-[calc(100vh-4rem)]","w-screen","flex","items-center","justify-center"],[1,"w-[75%]","h-[75%]","outline","bg-slate-200","shadow-2xl","p-10","flex","items-center","justify-center"],[1,"w-[70%]","gap-y-3","flex","flex-col"],[3,"coverImage","icon","courseId","courseTitle","ngClass",4,"ngFor","ngForOf"],[3,"coverImage","icon","courseId","courseTitle","ngClass"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1)(2,"div",2),dt(3,ux,1,5,"app-course-list-item",3),B()()()),i&2&&(te(3),Pe("ngForOf",r.courses))},dependencies:[Y_,Ma,nT]})}}return n})();var dT=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(J(Aa),J(Tt))}}static{this.\u0275dir=Ze({type:n})}}return n})(),lx=(()=>{class n extends dT{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Gi(n)))(r||n)}})()}static{this.\u0275dir=Ze({type:n,features:[Pn]})}}return n})(),fT=new ee("");var hx={provide:fT,useExisting:ws(()=>Ku),multi:!0};function dx(){let n=ci()?ci().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var fx=new ee(""),Ku=(()=>{class n extends dT{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dx())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(J(Aa),J(Tt),J(fx,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&be("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[ai([hx]),Pn]})}}return n})();function px(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Qm=new ee(""),pT=new ee("");function mx(n){return px(n.value)?{required:!0}:null}function rT(n){return null}function mT(n){return n!=null}function gT(n){return Na(n)?De(n):n}function _T(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function vT(n,e){return e.map(t=>t(n))}function gx(n){return!n.validate}function yT(n){return n.map(e=>gx(e)?e:t=>e.validate(t))}function _x(n){if(!n)return null;let e=n.filter(mT);return e.length==0?null:function(t){return _T(vT(t,e))}}function Ym(n){return n!=null?_x(yT(n)):null}function vx(n){if(!n)return null;let e=n.filter(mT);return e.length==0?null:function(t){let i=vT(t,e).map(gT);return wa(i).pipe(q(_T))}}function Jm(n){return n!=null?vx(yT(n)):null}function sT(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yx(n){return n._rawValidators}function Ix(n){return n._rawAsyncValidators}function Km(n){return n?Array.isArray(n)?n:[n]:[]}function $u(n,e){return Array.isArray(n)?n.includes(e):n===e}function oT(n,e){let t=Km(e);return Km(n).forEach(r=>{$u(t,r)||t.push(r)}),t}function aT(n,e){return Km(e).filter(t=>!$u(n,t))}var zu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ym(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Jm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},es=class extends zu{get formDirective(){return null}get path(){return null}},ta=class extends zu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},qu=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},wx={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},c$=fe(M({},wx),{"[class.ng-submitted]":"isSubmitted"}),IT=(()=>{class n extends qu{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(J(ta,2))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ki("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Pn]})}}return n})(),wT=(()=>{class n extends qu{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(J(es,10))}}static{this.\u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ki("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pn]})}}return n})();var Yo="VALID",Bu="INVALID",Xr="PENDING",Jo="DISABLED",ts=class{},Gu=class extends ts{constructor(e,t){super(),this.value=e,this.source=t}},Zo=class extends ts{constructor(e,t){super(),this.pristine=e,this.source=t}},ea=class extends ts{constructor(e,t){super(),this.touched=e,this.source=t}},Zr=class extends ts{constructor(e,t){super(),this.status=e,this.source=t}};function ET(n){return(Qu(n)?n.validators:n)||null}function Ex(n){return Array.isArray(n)?Ym(n):n||null}function bT(n,e){return(Qu(e)?e.asyncValidators:n)||null}function bx(n){return Array.isArray(n)?Jm(n):n||null}function Qu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Tx(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new pe(1e3,"");if(!i[t])throw new pe(1001,"")}function Ax(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new pe(1002,"")})}var Wu=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ds(()=>this.statusReactive()),this.statusReactive=Ss(void 0),this._pristine=Ds(()=>this.pristineReactive()),this.pristineReactive=Ss(!0),this._touched=Ds(()=>this.touchedReactive()),this.touchedReactive=Ss(!1),this._events=new st,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return On(this.statusReactive)}set status(e){On(()=>this.statusReactive.set(e))}get valid(){return this.status===Yo}get invalid(){return this.status===Bu}get pending(){return this.status==Xr}get disabled(){return this.status===Jo}get enabled(){return this.status!==Jo}get pristine(){return On(this.pristineReactive)}set pristine(e){On(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return On(this.touchedReactive)}set touched(e){On(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(oT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aT(e,this._rawAsyncValidators))}hasValidator(e){return $u(this._rawValidators,e)}hasAsyncValidator(e){return $u(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(M({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new ea(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new ea(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(M({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Zo(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Zo(!0,i))}markAsPending(e={}){this.status=Xr;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zr(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Jo,this.errors=null,this._forEachChild(r=>{r.disable(fe(M({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gu(this.value,i)),this._events.next(new Zr(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Yo,this._forEachChild(i=>{i.enable(fe(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yo||this.status===Xr)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Gu(this.value,t)),this._events.next(new Zr(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jo:Yo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Xr,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=gT(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Zr(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?Jo:this.errors?Bu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xr)?Xr:this._anyControlsHaveStatus(Bu)?Bu:Yo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Zo(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ea(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ex(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=bx(this._rawAsyncValidators)}},Hu=class extends Wu{constructor(e,t,i){super(ET(t),bT(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ax(this,!0,e),Object.keys(e).forEach(i=>{Tx(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Xm=new ee("CallSetDisabledState",{providedIn:"root",factory:()=>Zm}),Zm="always";function Sx(n,e){return[...e.path,n]}function TT(n,e,t=Zm){AT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Rx(n,e),Px(n,e),Dx(n,e),Cx(n,e)}function cT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Cx(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function AT(n,e){let t=yx(n);e.validator!==null?n.setValidators(sT(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Ix(n);e.asyncValidator!==null?n.setAsyncValidators(sT(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();cT(e._rawValidators,r),cT(e._rawAsyncValidators,r)}function Rx(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ST(n,e)})}function Dx(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ST(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ST(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Px(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function kx(n,e){n==null,AT(n,e)}function Nx(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ox(n){return Object.getPrototypeOf(n.constructor)===lx}function Mx(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function xx(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Ku?t=s:Ox(s)?i=s:r=s}),r||i||t||null}var Lx={provide:es,useExisting:ws(()=>eg)},Xo=Promise.resolve(),eg=(()=>{class n extends es{get submitted(){return On(this.submittedReactive)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=Ds(()=>this.submittedReactive()),this.submittedReactive=Ss(!1),this._directives=new Set,this.ngSubmit=new ot,this.form=new Hu({},Ym(t),Jm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Xo.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),TT(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Xo.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Xo.then(()=>{let i=this._findContainer(t.path),r=new Hu({});kx(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Xo.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Xo.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Mx(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(J(Qm,10),J(pT,10),J(Xm,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&be("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ai([Lx]),Pn]})}}return n})();function uT(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lT(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Vx=class extends Wu{constructor(e=null,t,i){super(ET(t),bT(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(lT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){lT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Fx={provide:ta,useExisting:ws(()=>tg)},hT=Promise.resolve(),tg=(()=>{class n extends ta{constructor(t,i,r,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new Vx,this._registered=!1,this.name="",this.update=new ot,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=xx(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Nx(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){TT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){hT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Nn(i);hT.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Sx(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(J(es,9),J(Qm,10),J(pT,10),J(fT,10),J(Yi,8),J(Xm,8))}}static{this.\u0275dir=Ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ai([Fx]),Pn,qi]})}}return n})(),CT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var Ux=(()=>{class n{constructor(){this._validator=rT}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):rT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ze({type:n,features:[qi]})}}return n})();var jx={provide:Qm,useExisting:ws(()=>ng),multi:!0};var ng=(()=>{class n extends Ux{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Nn,this.createValidator=t=>mx}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Gi(n)))(r||n)}})()}static{this.\u0275dir=Ze({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&oi("required",r._enabled?"":null)},inputs:{required:"required"},features:[ai([jx]),Pn]})}}return n})();var Bx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({})}}return n})();var Yu=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Xm,useValue:t.callSetDisabledState??Zm}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({imports:[Bx]})}}return n})();function zx(n,e){n&1&&(F(0,"label",20),re(1,"Repeat password"),B())}function qx(n,e){if(n&1){let t=kn();F(0,"div",9)(1,"input",21),Ra("ngModelChange",function(r){Rn(t);let s=qe();return Ca(s.repeatPassword,r)||(s.repeatPassword=r),Dn(r)}),B()()}if(n&2){let t=qe();te(),Sa("ngModel",t.repeatPassword)}}function Gx(n,e){if(n&1&&(F(0,"div",22)(1,"span",23),re(2,"Error!"),B(),re(3),B()),n&2){let t=qe();te(3),at(" ",t.errorMessage," ")}}var RT=(()=>{class n{constructor(t){this.authService=t,this.email="",this.password="",this.errorMessage="",this.isLogin=!0,this.repeatPassword=""}toggleLogin(){this.isLogin=!this.isLogin}getCurrentUser(){let t=this.authService.getCurrentUser();t&&console.log(t)}register(){if(this.password!==this.repeatPassword){this.errorMessage="Passwords do not match";return}console.log(this.password,this.repeatPassword,this.email),this.authService.register(this.email,this.password).then(()=>{console.log("Register successful!")}).catch(t=>{this.errorMessage=t.message})}login(){console.log(this.password,this.repeatPassword,this.email),this.authService.login(this.email,this.password).then(()=>{console.log("Login successful!")}).catch(t=>{this.errorMessage=t.message})}forgotPassword(t){console.log(t)}static{this.\u0275fac=function(i){return new(i||n)(J(Yr))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-login-page"]],decls:31,vars:8,consts:[[1,"flex","min-h-full","flex-col","justify-center","pb-44","px-6","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-sm","flex","flex-col","justify-center"],[1,"mt-10","text-center","text-2xl/9","font-bold","tracking-tight","text-gray-900"],[1,"text-center","tracking-tight","text-gray-900"],[1,"flex","w-20","mt-2","sm:mx-auto","justify-center","rounded-md","bg-indigo-600","disabled:brightness-50","py-1.5","text-sm/6","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"],[3,"click"],[1,"sm:mx-auto","mt-6","sm:w-full","sm:max-w-sm"],[1,"space-y-6",3,"ngSubmit"],["for","email",1,"block","text-sm/6","font-medium","text-gray-900"],[1,"mt-2"],["type","email","name","email","id","email","autocomplete","email","required","",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline","focus:outline-2","focus:-outline-offset-2","focus:outline-indigo-600","sm:text-sm/6",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between"],["for","password",1,"block","text-sm/6","font-medium","text-gray-900"],[1,"text-sm"],[1,"font-semibold","text-indigo-600","hover:text-indigo-500",3,"click"],["type","password","name","password","id","password","autocomplete","current-password","required","",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline","focus:outline-2","focus:-outline-offset-2","focus:outline-indigo-600","sm:text-sm/6",3,"ngModelChange","ngModel"],["for","repeat-password","class","block text-sm/6 font-medium text-gray-900 mt-2",4,"ngIf"],["class","mt-2",4,"ngIf"],["type","submit",1,"flex","w-full","justify-center","rounded-md","bg-indigo-600","px-3","py-1.5","text-sm/6","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600"],["class","p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400","role","alert",4,"ngIf"],["for","repeat-password",1,"block","text-sm/6","font-medium","text-gray-900","mt-2"],["type","password","name","repeat-password","id","repeat-password","autocomplete","current-password","required","",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline","focus:outline-2","focus:-outline-offset-2","focus:outline-indigo-600","sm:text-sm/6",3,"ngModelChange","ngModel"],["role","alert",1,"p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],[1,"font-medium"]],template:function(i,r){i&1&&(F(0,"div",0)(1,"div",1)(2,"h2",2),re(3),B(),F(4,"p",3),re(5," Toggle Login/Register "),B(),F(6,"button",4),be("click",function(){return r.toggleLogin()}),re(7),B()(),F(8,"button",5),be("click",function(){return r.getCurrentUser()}),re(9," GET CURRENT USER "),B(),F(10,"div",6)(11,"form",7),be("ngSubmit",function(){return r.isLogin?r.login():r.register()}),F(12,"div")(13,"label",8),re(14,"Email address"),B(),F(15,"div",9)(16,"input",10),Ra("ngModelChange",function(o){return Ca(r.email,o)||(r.email=o),o}),B()()(),F(17,"div")(18,"div",11)(19,"label",12),re(20,"Password"),B(),F(21,"div",13)(22,"a",14),be("click",function(){return r.forgotPassword(r.email)}),re(23,"Forgot password?"),B()()(),F(24,"div",9)(25,"input",15),Ra("ngModelChange",function(o){return Ca(r.password,o)||(r.password=o),o}),B()(),dt(26,zx,2,0,"label",16)(27,qx,2,1,"div",17),B(),F(28,"button",18),re(29),B(),dt(30,Gx,4,1,"div",19),B()()()),i&2&&(te(3),at(" ",r.isLogin?"Login ur account":"Sign up for an account"," "),te(4),at(" ",r.isLogin?"Login":"Register"," "),te(9),Sa("ngModel",r.email),te(9),Sa("ngModel",r.password),te(),Pe("ngIf",!r.isLogin),te(),Pe("ngIf",!r.isLogin),te(2),at(" ",r.isLogin?"Sign in":"Sign Up"," "),te(),Pe("ngIf",r.errorMessage))},dependencies:[xa,CT,Ku,IT,wT,ng,tg,eg]})}}return n})();var Wx=[{path:"",component:uy},{path:"login",component:RT},{path:"course/:id",component:tT},{path:"overview",component:iT}],DT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({imports:[zh.forRoot(Wx),zh]})}}return n})();var PT=(()=>{class n{constructor(t,i,r){this.router=t,this.authService=i,this.dataService=r,this.title="Anti-Glow",this.user=null,this.destroy$=new st,this.authService.authState().pipe($i(this.destroy$)).subscribe(s=>{this.user=s})}printUser(){let t=this.authService.getCurrentUser();console.log("User",t),console.log("THIS User",this.user)}logout(){this.authService.logout().then(()=>{this.user=null})}navigateToOverview(){this.router.navigate(["/overview"])}navigateToLogin(){this.router.navigate(["/login"])}navigateToHome(){this.router.navigate(["/"])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||n)(J(Ge),J(Yr),J(Jr))}}static{this.\u0275cmp=_e({type:n,selectors:[["app-root"]],decls:12,vars:2,consts:[[1,"outline-2","top-0","w-full","h-16","bg-indigo-600","flex","justify-center"],[1,"w-[1000px]","mx-10","flex","place-items-center","justify-between"],[1,"text-white","text-3xl",3,"click"],[1,"text-white","pr-3",3,"click"],[1,"text-white","pr-3",3,"click","disabled"]],template:function(i,r){i&1&&(F(0,"nav",0)(1,"div",1)(2,"button",2),be("click",function(){return r.navigateToHome()}),re(3," Anti-Glow"),B(),F(4,"div")(5,"button",3),be("click",function(){return r.navigateToOverview()}),re(6," Overview"),B(),F(7,"button",4),be("click",function(){return r.navigateToLogin()}),re(8),B(),F(9,"button",3),be("click",function(){return r.logout()}),re(10," Log out "),B()()()(),ke(11,"router-outlet")),i&2&&(te(7),Pe("disabled",r.user),te(),at(" ",r.user?r.user.email:"Log in",""))},dependencies:[Vh]})}}return n})();var kT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({imports:[Ji,Yu]})}}return n})();var NT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=we({type:n})}static{this.\u0275inj=Ie({imports:[Ji,Jb]})}}return n})();var Hx="@",Kx=(()=>{class n{constructor(t,i,r,s,o){this.doc=t,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=j(D_,{optional:!0}),this.loadingSchedulerFn=j(Qx,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-OLXTKVNT.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(r=>{throw new pe(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,i){let r=this.delegate.createRenderer(t,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new ig(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(t,i);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){ba()}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),ig=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(Hx)}},Qx=new ee("");function OT(n="animations"){return k_("NgAsyncAnimations"),Nt([{provide:Ta,useFactory:(e,t,i)=>new Kx(e,t,i,n),deps:[Ne,Fa,Ee]},{provide:Ol,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var MT={production:!1,firebase:{apiKey:"AIzaSyA9HRiN7ZlYjVawTeahdT5obMpI_O-OF5Q",authDomain:"cyberwijs-b2d35.firebaseapp.com",projectId:"cyberwijs-b2d35",storageBucket:"cyberwijs-b2d35.firebasestorage.app",messagingSenderId:"799404641834",appId:"1:799404641834:web:f0a6b1cdeafb82d46c7d53"}};var xT=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=we({type:n,bootstrap:[PT]})}static{this.\u0275inj=Ie({providers:[Eb(()=>Cb()),Vy(()=>Fy(MT.firebase)),yw(()=>Ew()),OT("noop")],imports:[pv,DT,kT,NT,Yu]})}}return n})();fv().bootstrapModule(xT).catch(n=>console.error(n));
